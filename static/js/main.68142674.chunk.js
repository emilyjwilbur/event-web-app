(this["webpackJsonpevent-web-app"]=this["webpackJsonpevent-web-app"]||[]).push([[0],{299:function(e,t,n){},460:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(33),a=n.n(c),o=(n(296),n(297),n(298),n(299),n(24)),i=n(484),s=n(18),l=n(277),u=n(480),d=n(23),j=n(228),b=n(487),p=n(190),h=n(94),O=n(488),f=n(278),x=n(276),v=n(1);function m(e){var t=e.attendee;return Object(v.jsx)(O.a.Item,{as:d.a,to:"/profile/".concat(t.id),children:Object(v.jsx)(x.a,{size:"mini",circular:!0,src:t.photoURL})})}var g=n(463),y=n(14),w=n.n(y),E=n(22),C=n(10),k=n(202);n(466),n(308),n(310),n(465);k.a.initializeApp({apiKey:"AIzaSyAJKD6-wlcmHwRzD2HhxkKNQdrt4BJvhG0",authDomain:"eventspace-a2198.firebaseapp.com",projectId:"eventspace-a2198",storageBucket:"eventspace-a2198.appspot.com",messagingSenderId:"1004675596430",appId:"1:1004675596430:web:4018cfe41370857cff09df"}),k.a.firestore();var S=k.a,U=S.firestore();function L(e){if(e.exists){var t=e.data();for(var n in t)t.hasOwnProperty(n)&&t[n]instanceof S.firestore.Timestamp&&(t[n]=t[n].toDate());return Object(C.a)(Object(C.a)({},t),{},{id:e.id})}}function I(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,c=S.auth().currentUser,a=U.collection("events").orderBy("date").startAfter(r).limit(n);switch(e){case"isGoing":return a.where("attendeeIds","array-contains",c.uid).where("date",">=",t);case"isHost":return a.where("hostUid","==",c.uid).where("date",">=",t);default:return a.where("date",">=",t)}}function T(e){return U.collection("events").doc(e)}function N(e){var t=S.auth().currentUser;return U.collection("events").add(Object(C.a)(Object(C.a)({},e),{},{hostUid:t.uid,hostedBy:t.displayName,hostPhotoURL:t.photoURL||null,attendees:S.firestore.FieldValue.arrayUnion({id:t.uid,displayName:t.displayName,photoURL:t.photoURL||null}),attendeeIds:S.firestore.FieldValue.arrayUnion(t.uid)}))}function R(e){return U.collection("events").doc(e.id).update({isCancelled:!e.isCancelled})}function P(e){return U.collection("users").doc(e.uid).set({displayName:e.displayName,email:e.email,photoURL:e.photoURL||null,createdAt:S.firestore.FieldValue.serverTimestamp()})}function F(e){return U.collection("users").doc(e)}function A(e){return _.apply(this,arguments)}function _(){return(_=Object(E.a)(w.a.mark((function e(t){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=S.auth().currentUser,e.prev=1,n.displayName===t.displayName){e.next=5;break}return e.next=5,n.updateProfile({displayName:t.displayName});case 5:return e.next=7,U.collection("users").doc(n.uid).update(t);case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(1),e.t0;case 13:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function M(){return(M=Object(E.a)(w.a.mark((function e(t,n){var r,c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=S.auth().currentUser,c=U.collection("users").doc(r.uid),e.prev=2,e.next=5,c.get();case 5:if(e.sent.data().photoURL){e.next=11;break}return e.next=9,U.collection("users").doc(r.uid).update({photoURL:t});case 9:return e.next=11,r.updateProfile({photoURL:t});case 11:return e.next=13,U.collection("users").doc(r.uid).collection("photos").add({name:n,url:t});case 13:return e.abrupt("return",e.sent);case 16:throw e.prev=16,e.t0=e.catch(2),e.t0;case 19:case"end":return e.stop()}}),e,null,[[2,16]])})))).apply(this,arguments)}function D(e){return V.apply(this,arguments)}function V(){return(V=Object(E.a)(w.a.mark((function e(t){var n,r,c,a,o,i,s,l;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=S.auth().currentUser,r=new Date,c=U.collection("events").where("attendeeIds","array-contains",n.uid).where("date",">=",r),a=U.collection("following").doc(n.uid).collection("userFollowing"),(o=U.batch()).update(U.collection("users").doc(n.uid),{photoURL:t.url}),e.prev=6,e.next=9,c.get();case 9:for(i=e.sent,s=0;s<i.docs.length;s++)(l=i.docs[s]).data().hostUid===n.uid&&o.update(i.docs[s].ref,{hostPhotoURL:t.url}),o.update(i.docs[s].ref,{attendees:l.data().attendees.filter((function(e){return e.id===n.uid&&(e.photoURL=t.url),e}))});return e.next=13,a.get();case 13:return e.sent.docs.forEach((function(e){var r=U.collection("following").doc(e.id).collection("userFollowers").doc(n.uid);o.update(r,{photoURL:t.url})})),e.next=17,o.commit();case 17:return e.next=19,n.updateProfile({photoURL:t.url});case 19:return e.abrupt("return",e.sent);case 22:throw e.prev=22,e.t0=e.catch(6),e.t0;case 25:case"end":return e.stop()}}),e,null,[[6,22]])})))).apply(this,arguments)}function z(e){var t=S.auth().currentUser.uid;return U.collection("users").doc(t).collection("photos").doc(e).delete()}function G(e){var t=S.auth().currentUser;return U.collection("events").doc(e.id).update({attendees:S.firestore.FieldValue.arrayUnion({id:t.uid,displayName:t.displayName,photoURL:t.photoURL||null}),attendeeIds:S.firestore.FieldValue.arrayUnion(t.uid)})}function H(e){return B.apply(this,arguments)}function B(){return(B=Object(E.a)(w.a.mark((function e(t){var n,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=S.auth().currentUser,e.prev=1,e.next=4,U.collection("events").doc(t.id).get();case 4:return r=e.sent,e.abrupt("return",U.collection("events").doc(t.id).update({attendeeIds:S.firestore.FieldValue.arrayRemove(n.uid),attendees:r.data().attendees.filter((function(e){return e.id!==n.uid}))}));case 8:throw e.prev=8,e.t0=e.catch(1),e.t0;case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function q(e){return K.apply(this,arguments)}function K(){return(K=Object(E.a)(w.a.mark((function e(t){var n,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=S.auth().currentUser,r=U.batch(),e.prev=2,r.set(U.collection("following").doc(n.uid).collection("userFollowing").doc(t.id),{displayName:t.displayName,photoURL:t.photoURL,uid:t.id}),r.update(U.collection("users").doc(n.uid),{followingCount:S.firestore.FieldValue.increment(1)}),e.next=7,r.commit();case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(2),e.t0;case 13:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}function W(e){return Y.apply(this,arguments)}function Y(){return(Y=Object(E.a)(w.a.mark((function e(t){var n,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=S.auth().currentUser,r=U.batch(),e.prev=2,r.delete(U.collection("following").doc(n.uid).collection("userFollowing").doc(t.id)),r.update(U.collection("users").doc(n.uid),{followingCount:S.firestore.FieldValue.increment(-1)}),e.next=7,r.commit();case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(2),e.t0;case 13:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}function J(e){var t=S.auth().currentUser.uid;return U.collection("following").doc(t).collection("userFollowing").doc(e).get()}function Z(e){var t=e.event;return Object(v.jsxs)(j.a.Group,{children:[Object(v.jsx)(j.a,{children:Object(v.jsx)(b.a.Group,{children:Object(v.jsxs)(b.a,{children:[Object(v.jsx)(b.a.Image,{size:"tiny",circular:!0,src:t.hostPhotoURL}),Object(v.jsxs)(b.a.Content,{children:[Object(v.jsx)(b.a.Header,{content:t.title}),Object(v.jsxs)(b.a.Description,{children:["Hosted by ",Object(v.jsx)(d.a,{to:"/profile/".concat(t.hostUid),children:t.hostedBy})]}),t.isCancelled&&Object(v.jsx)(p.a,{style:{top:"-40px"},ribbon:"right",color:"red",content:"This event has been canceled."})]})]})})}),Object(v.jsx)(j.a,{children:Object(v.jsxs)("span",{children:[Object(v.jsx)(h.a,{name:"clock"})," ",Object(g.default)(t.date,"MMMM d, yyyy h:mm a"),Object(v.jsx)(h.a,{name:"marker"})," ",t.venue.address]})}),Object(v.jsx)(j.a,{secondary:!0,children:Object(v.jsx)(O.a,{horizontal:!0,children:t.attendees.map((function(e){return Object(v.jsx)(m,{attendee:e},e.id)}))})}),Object(v.jsxs)(j.a,{clearing:!0,children:[Object(v.jsx)("div",{children:t.description}),Object(v.jsx)(f.a,{onClick:function(){return e=t.id,U.collection("events").doc(e).delete();var e},color:"gray",floated:"right",content:"Delete"}),Object(v.jsx)(f.a,{as:d.a,to:"/events/".concat(t.id),color:"facebook",floated:"right",content:"View"})]})]})}var Q=n(258),X=n.n(Q);function $(e){var t=e.events,n=e.getNextEvents,r=e.loading,c=e.moreEvents;return Object(v.jsx)(v.Fragment,{children:0!==t.length&&Object(v.jsx)(X.a,{pageStart:0,loadMore:n,hasMore:!r&&c,initialLoad:!1,children:t.map((function(e){return Object(v.jsx)(Z,{event:e},e.id)}))})})}var ee=n(12),te=n(491);function ne(){return Object(v.jsx)(te.a,{fluid:!0,children:Object(v.jsxs)(j.a.Group,{children:[Object(v.jsx)(j.a,{style:{minHeight:110},children:Object(v.jsxs)(te.a,{children:[Object(v.jsxs)(te.a.Header,{image:!0,children:[Object(v.jsx)(te.a.Line,{}),Object(v.jsx)(te.a.Line,{})]}),Object(v.jsx)(te.a.Paragraph,{children:Object(v.jsx)(te.a.Line,{})})]})}),Object(v.jsx)(j.a,{children:Object(v.jsxs)(te.a,{children:[Object(v.jsx)(te.a.Line,{}),Object(v.jsx)(te.a.Line,{})]})}),Object(v.jsx)(j.a,{secondary:!0,style:{minHeight:70}}),Object(v.jsx)(j.a,{clearing:!0,children:Object(v.jsx)(f.a,{disabled:!0,color:"blue",floated:"right",content:"View"})})]})})}var re=n(274),ce=n(496),ae=n(273),oe="CREATE_EVENT",ie="UPDATE_EVENT",se="DELETE_EVENT",le="FETCH_EVENTS",ue="LISTEN_TO_EVENT_CHAT",de="CLEAR_COMMENTS",je="LISTEN_TO_SELECTED_EVENT",be="CLEAR_EVENTS",pe="SET_FILTER",he="SET_START_DATE",Oe="RETAIN_STATE",fe="ASYNC_ACTION_START",xe="ASYNC_ACTION_FINISH",ve="ASYNC_ACTION_ERROR",me="APP_LOADED";function ge(){return{type:fe}}function ye(){return{type:xe}}function we(e){return console.log(e),{type:ve,payload:e}}var Ee={loading:!1,error:null,initialized:!1};function Ce(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case fe:return Object(C.a)(Object(C.a)({},e),{},{loading:!0,error:null});case xe:return Object(C.a)(Object(C.a)({},e),{},{loading:!1});case ve:return Object(C.a)(Object(C.a)({},e),{},{loading:!1,error:r});case me:return Object(C.a)(Object(C.a)({},e),{},{initialized:!0});default:return e}}function ke(e,t,n,r){return function(){var c=Object(E.a)(w.a.mark((function c(a){var o,i,s,l;return w.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return a(ge()),c.prev=1,c.next=4,I(e,t,n,r).get();case 4:o=c.sent,i=o.docs[o.docs.length-1],s=o.docs.length>=n,l=o.docs.map((function(e){return L(e)})),a({type:le,payload:{events:l,moreEvents:s,lastVisible:i}}),a(ye()),c.next=15;break;case 12:c.prev=12,c.t0=c.catch(1),a(we(c.t0));case 15:case"end":return c.stop()}}),c,null,[[1,12]])})));return function(e){return c.apply(this,arguments)}}()}function Se(e){return function(t){t(Le()),t({type:pe,payload:e})}}function Ue(e){return{type:je,payload:e}}function Le(){return{type:be}}function Ie(e){var t=e.loading,n=Object(ee.d)(),r=Object(ee.e)((function(e){return e.auth})).authenticated,c=Object(ee.e)((function(e){return e.event})),a=c.filter,o=c.startDate;return Object(v.jsxs)(v.Fragment,{children:[r&&Object(v.jsxs)(re.a,{vertical:!0,size:"large",style:{width:"100%"},children:[Object(v.jsx)(ce.a,{icon:"filter",attached:!0,color:"blue",content:"Filters"}),Object(v.jsx)(re.a.Item,{content:"All Events",active:"all"===a,onClick:function(){return n(Se("all"))},disabled:t}),Object(v.jsx)(re.a.Item,{content:"I'm Going",active:"isGoing"===a,onClick:function(){return n(Se("isGoing"))},disabled:t}),Object(v.jsx)(re.a.Item,{content:"I'm Hosting",active:"isHost"===a,onClick:function(){return n(Se("isHost"))},disabled:t})]}),Object(v.jsx)(ce.a,{icon:"calendar",attached:!0,color:"blue",content:"Select Date"}),Object(v.jsx)(ae.a,{onChange:function(e){return n(function(e){return function(t){t(Le()),t({type:he,payload:e})}}(e))},value:o||new Date,tileDisabled:function(){return t}})]})}var Te=n(485),Ne=n(28);function Re(e){if(e)return Object.entries(e).map((function(e){return Object.assign({},e[1],{id:e[0]})}))}function Pe(){return S.auth().signOut()}function Fe(e){return Ae.apply(this,arguments)}function Ae(){return(Ae=Object(E.a)(w.a.mark((function e(t){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.auth().createUserWithEmailAndPassword(t.email,t.password);case 3:return n=e.sent,e.next=6,n.user.updateProfile({displayName:t.displayName});case 6:return e.next=8,P(n.user);case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e.catch(0),e.t0;case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function _e(){return(_e=Object(E.a)(w.a.mark((function e(t){var n,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"facebook"===t&&(n=new S.auth.FacebookAuthProvider),"google"===t&&(n=new S.auth.GoogleAuthProvider),e.prev=2,e.next=5,S.auth().signInWithPopup(n);case 5:if(r=e.sent,console.log(r),!r.additionalUserInfo.isNewUser){e.next=10;break}return e.next=10,P(r.user);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),Ne.b.error(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})))).apply(this,arguments)}function Me(e){var t=S.auth().currentUser.uid;return S.storage().ref().child("".concat(t,"/user_images/").concat(e)).delete()}function De(e,t){var n=S.auth().currentUser,r={displayName:n.displayName,photoURL:n.photoURL,uid:n.uid,text:t.comment,date:Date.now(),parentId:t.parentId};return S.database().ref("chat/".concat(e)).push(r)}function Ve(e){return S.database().ref("chat/".concat(e)).orderByKey()}function ze(){var e=S.auth().currentUser;return S.database().ref("posts/".concat(e.uid)).orderByKey().limitToLast(5)}var Ge="LISTEN_TO_CURRENT_USER_PROFILE",He="LISTEN_TO_SELECTED_USER_PROFILE",Be="LISTEN_TO_USER_PHOTOS",qe="LISTEN_TO_USER_EVENTS",Ke="LISTEN_TO_FOLLOWERS",We="LISTEN_TO_FOLLOWINGS",Ye="SET_FOLLOW_USER",Je="SET_UNFOLLOW_USER",Ze="CLEAR_FOLLOWINGS",Qe="LISTEN_TO_FEED";function Xe(){return{type:Ye}}function $e(){return{type:Je}}var et=n(489);function tt(e){var t,n=e.post;switch(n.code){case"joined-event":t=Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(d.a,{to:"/profile/".concat(n.userUid),children:n.displayName})," has signed up to ",Object(v.jsx)(d.a,{to:"/events/".concat(n.eventId),children:n.title})]});break;case"left-event":t=Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(d.a,{to:"/profile/".concat(n.userUid),children:n.displayName})," has canceled their place on",Object(v.jsx)(d.a,{to:"/events/".concat(n.eventId),children:n.title})]});break;default:t="Something happened"}return Object(v.jsxs)(Te.a.Event,{children:[Object(v.jsx)(Te.a.Label,{image:n.photoURL}),Object(v.jsxs)(Te.a.Content,{children:[Object(v.jsxs)(Te.a.Date,{children:[Object(et.a)(new Date(n.date),new Date)," ago"]}),Object(v.jsx)(Te.a.Summary,{children:t})]})]})}function nt(){var e=Object(ee.d)(),t=Object(ee.e)((function(e){return e.profile})).feed;return Object(r.useEffect)((function(){return ze().on("value",(function(t){if(t.exists()){var n=Re(t.val()).reverse();e(function(e){return{type:Qe,payload:e}}(n))}})),function(){ze().off()}}),[e]),Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(ce.a,{attached:!0,color:"blue",icon:"newspaper",content:"News feed"}),Object(v.jsx)(j.a,{attached:"bottom",children:Object(v.jsx)(Te.a,{children:t.map((function(e){return Object(v.jsx)(tt,{post:e},e.id)}))})})]})}function rt(){var e=Object(ee.d)(),t=Object(ee.e)((function(e){return e.event})),n=t.events,c=t.moreEvents,a=t.filter,o=t.startDate,i=t.lastVisible,d=t.retainState,j=Object(ee.e)((function(e){return e.async})).loading,b=Object(ee.e)((function(e){return e.auth})).authenticated,p=Object(r.useState)(!1),h=Object(s.a)(p,2),O=h[0],f=h[1];return Object(r.useEffect)((function(){if(!d)return f(!0),e(ke(a,o,2)).then((function(){f(!1)})),function(){e({type:Oe})}}),[e,a,o,d]),Object(v.jsxs)(l.a,{children:[Object(v.jsxs)(l.a.Column,{width:10,children:[O&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(ne,{}),Object(v.jsx)(ne,{})]}),Object(v.jsx)($,{events:n,getNextEvents:function(){e(ke(a,o,2,i))},loading:j,moreEvents:c})]}),Object(v.jsxs)(l.a.Column,{width:6,children:[b&&Object(v.jsx)(nt,{}),Object(v.jsx)(Ie,{loading:j})]}),Object(v.jsx)(l.a.Column,{width:10,children:Object(v.jsx)(u.a,{active:j})})]})}function ct(e){var t=e.query,n=e.data,c=e.deps,a=e.shouldExecute,o=void 0===a||a,i=Object(ee.d)();Object(r.useEffect)((function(){if(o){i(ge());var e=t().onSnapshot((function(e){e.exists?(n(L(e)),i(ye())):i(we({code:"not-found",message:"Could not find document"}))}),(function(e){return i(we())}));return function(){e()}}}),c)}var at=n(486),ot=n(26),it=n(27);function st(e){var t=e.eventId,n=e.parentId,r=e.closeForm;return Object(v.jsx)(ot.c,{initialValues:{comment:""},validationSchema:it.a({comment:it.c().required()}),onSubmit:function(){var e=Object(E.a)(w.a.mark((function e(c,a){var o,i;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=a.setSubmitting,i=a.resetForm,e.prev=1,e.next=4,De(t,Object(C.a)(Object(C.a)({},c),{},{parentId:n}));case 4:i(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),Ne.b.error(e.t0.message);case 10:return e.prev=10,o(!1),r({open:!1,commentId:null}),e.finish(10);case 14:case"end":return e.stop()}}),e,null,[[1,7,10,14]])})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting,n=e.handleSubmit,r=e.isValid;return Object(v.jsx)(ot.b,{className:"ui form",children:Object(v.jsx)(ot.a,{name:"comment",children:function(e){var c=e.field;return Object(v.jsxs)("div",{style:{position:"relative"},children:[Object(v.jsx)(u.a,{active:t}),Object(v.jsx)("textarea",Object(C.a)(Object(C.a)({rows:2},c),{},{placeholder:"Enter your comment (Press ENTER to submit, SHIFT + ENTER for new line)",onKeyPress:function(e){"Enter"===e.key&&e.shiftKey||"Enter"!==e.key||e.shiftKey||(e.preventDefault(),r&&n())}}))]})}})})}})}function lt(e){return new Promise((function(t){return setTimeout(t,e)}))}function ut(e){var t=Object.create(null);e.forEach((function(e){return t[e.id]=Object(C.a)(Object(C.a)({},e),{},{childNodes:[]})}));var n=[];return e.forEach((function(e){e.parentId?t[e.parentId].childNodes.push(t[e.id]):n.push(t[e.id])})),n}function dt(e){var t=e.eventId,n=Object(ee.d)(),c=Object(ee.e)((function(e){return e.event})).comments,a=Object(ee.e)((function(e){return e.auth})).authenticated,o=Object(r.useState)({open:!1,commentId:null}),i=Object(s.a)(o,2),l=i[0],u=i[1];function b(){u({open:!1,commentId:null})}return Object(r.useEffect)((function(){return Ve(t).on("value",(function(e){e.exists()&&n(function(e){return{type:ue,payload:e}}(Re(e.val()).reverse()))})),function(){n({type:de}),Ve().off()}}),[t,n]),Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(j.a,{textAlign:"center",attached:"top",inverted:!0,color:"facebook",style:{border:"none"},children:Object(v.jsx)(ce.a,{children:a?"Chat about this event":"Sign in to view and comment"})}),a&&Object(v.jsxs)(j.a,{attached:!0,children:[Object(v.jsx)(st,{eventId:t,parentId:0,closeForm:u}),Object(v.jsx)(at.a.Group,{children:ut(c).map((function(e){return Object(v.jsxs)(at.a,{children:[Object(v.jsx)(at.a.Avatar,{src:e.photoURL||"/event-web-app/assets/user.png"}),Object(v.jsxs)(at.a.Content,{children:[Object(v.jsx)(at.a.Author,{as:d.a,to:"/profile/".concat(e.uid),children:e.displayName}),Object(v.jsx)(at.a.Metadata,{children:Object(v.jsx)("div",{children:Object(et.a)(e.date,new Date)})}),Object(v.jsx)(at.a.Text,{children:e.text.split("\n").map((function(e,t){return Object(v.jsxs)("span",{children:[e,Object(v.jsx)("br",{})]},t)}))}),Object(v.jsxs)(at.a.Actions,{children:[Object(v.jsx)(at.a.Action,{onClick:function(){return u({open:!0,commentId:e.id})},children:"Reply"}),l.open&&l.commentId===e.id&&Object(v.jsx)(st,{eventId:t,parentId:e.id,closeForm:b})]})]}),e.childNodes.length>0&&Object(v.jsx)(at.a.Group,{children:e.childNodes.reverse().map((function(e){return Object(v.jsxs)(at.a,{children:[Object(v.jsx)(at.a.Avatar,{src:e.photoURL||"/event-web-app/assets/user.png"}),Object(v.jsxs)(at.a.Content,{children:[Object(v.jsx)(at.a.Author,{as:d.a,to:"/profile/".concat(e.uid),children:e.displayName}),Object(v.jsx)(at.a.Metadata,{children:Object(v.jsx)("div",{children:Object(et.a)(e.date,new Date)})}),Object(v.jsx)(at.a.Text,{children:e.text.split("\n").map((function(e,t){return Object(v.jsxs)("span",{children:[e,Object(v.jsx)("br",{})]},t)}))}),Object(v.jsxs)(at.a.Actions,{children:[Object(v.jsx)(at.a.Action,{onClick:function(){return u({open:!0,commentId:e.id})},children:"Reply"}),l.open&&l.commentId===e.id&&Object(v.jsx)(st,{eventId:t,parentId:e.parentId,closeForm:b})]})]})]},e.id)}))})]},e.id)}))})]})]})}var jt=n(203),bt=n(481),pt="OPEN_MODAL",ht="CLOSE_MODAL";function Ot(e){return{type:pt,payload:e}}function ft(){return{type:ht}}function xt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case pt:var c=r.modalType,a=r.modalProps;return{modalType:c,modalProps:a};case ht:return null;default:return e}}function vt(e){var t=e.history,n=e.setModalOpen,c=Object(r.useState)(!0),a=Object(s.a)(c,2),o=a[0],i=a[1],l=Object(ee.e)((function(e){return e.auth})).prevLocation,u=Object(ee.d)();function d(){if(!t)return i(!1),void n(!1);t&&l?t.push(l.pathname):t.push("/events"),i(!1)}function j(e){u(Ot({modalType:e})),i(!1),void 0!==n&&n(!1)}return Object(v.jsxs)(jt.a,{open:o,size:"mini",onClose:d,children:[Object(v.jsx)(jt.a.Header,{content:"You need to be signed in to do that"}),Object(v.jsxs)(jt.a.Content,{children:[Object(v.jsx)("p",{children:"Please login or register to see this content"}),Object(v.jsxs)(f.a.Group,{widths:4,children:[Object(v.jsx)(f.a,{fluid:!0,color:"blue",content:"Login",onClick:function(){return j("LoginForm")}}),Object(v.jsx)(f.a.Or,{}),Object(v.jsx)(f.a,{fluid:!0,color:"gray",content:"Register",onClick:function(){return j("RegisterForm")}})]}),Object(v.jsx)(bt.a,{}),Object(v.jsxs)("div",{style:{textAlign:"center"},children:[Object(v.jsx)("p",{children:"Or click cancel to continue as a guest"}),Object(v.jsx)(f.a,{onClick:d,content:"Cancel"})]})]})]})}var mt={filter:"brightness(30%)"},gt={position:"absolute",bottom:"5%",left:"5%",width:"100%",height:"auto",color:"white"};function yt(e){var t=e.event,n=e.isHost,c=e.isGoing,a=Object(r.useState)(!1),o=Object(s.a)(a,2),i=o[0],l=o[1],u=Object(ee.e)((function(e){return e.auth})).authenticated,p=Object(r.useState)(!1),h=p.modalOpen,O=p.setModalOpen;function m(){return(m=Object(E.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.prev=1,e.next=4,G(t);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),Ne.b.error(e.t0.message);case 9:return e.prev=9,l(!1),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[1,6,9,12]])})))).apply(this,arguments)}function y(){return(y=Object(E.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.prev=1,e.next=4,H(t);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),Ne.b.error(e.t0.message);case 9:return e.prev=9,l(!1),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[1,6,9,12]])})))).apply(this,arguments)}return Object(v.jsxs)(v.Fragment,{children:[h&&Object(v.jsx)(vt,{setModalOpen:O}),Object(v.jsxs)(j.a.Group,{children:[Object(v.jsxs)(j.a,{basic:!0,attached:"top",style:{padding:"0"},children:[Object(v.jsx)(x.a,{src:"/event-web-app"+"/assets/categoryImages/".concat(t.category,".jpg"),fluid:!0,style:mt}),Object(v.jsx)(j.a,{basic:!0,stye:gt,children:Object(v.jsx)(b.a.Group,{children:Object(v.jsx)(b.a,{children:Object(v.jsxs)(b.a.Content,{children:[Object(v.jsx)(ce.a,{size:"huge",content:t.title,style:{color:"black"}}),Object(v.jsx)("p",{children:Object(g.default)(t.date,"MMMM d, yyyy h:mm a")}),Object(v.jsxs)("p",{children:["Hosted by ",Object(v.jsx)("strong",{children:Object(v.jsx)(d.a,{to:"/profile/".concat(t.hostUid),children:t.hostedBy})})]})]})})})})]}),Object(v.jsxs)(j.a,{attached:"bottom",clearing:!0,children:[!n&&Object(v.jsx)(v.Fragment,{children:c?Object(v.jsx)(f.a,{onClick:function(){return y.apply(this,arguments)},loading:i,children:"Cancel My Place"}):Object(v.jsx)(f.a,{onClick:u?function(){return m.apply(this,arguments)}:function(){return O(!0)},loading:i,color:"facebook",children:"JOIN THIS EVENT"})}),n&&Object(v.jsx)(f.a,{as:d.a,to:"/manage/".concat(t.id),color:"facebook",floated:"right",children:"Manage Event"})]})]})]})}var wt=n(194);function Et(){return Object(v.jsx)(h.a,{name:"marker",size:"big",color:"red"})}function Ct(e){var t=e.latLng;return Object(v.jsx)(j.a,{attached:"bottom",style:{padding:0},children:Object(v.jsx)("div",{style:{height:300,width:"100%"},children:Object(v.jsx)(wt.a,{bootstrapURLKeys:{key:"AIzaSyDgO0x7YfN3CkJv_vBMfxnYADSdk2ZUTy0"},center:t,zoom:14,children:Object(v.jsx)(Et,{lat:t.lat,lng:t.lng})})})})}function kt(e){var t=e.event,n=Object(r.useState)(!1),c=Object(s.a)(n,2),a=c[0],o=c[1];return Object(v.jsxs)(j.a.Group,{children:[Object(v.jsx)(j.a,{attached:"top",children:Object(v.jsxs)(l.a,{children:[Object(v.jsx)(l.a.Column,{width:1,children:Object(v.jsx)(h.a,{size:"large",color:"grey",name:"info"})}),Object(v.jsx)(l.a.Column,{width:15,children:Object(v.jsx)("p",{children:t.description})})]})}),Object(v.jsx)(j.a,{attached:!0,children:Object(v.jsxs)(l.a,{verticalAlign:"middle",children:[Object(v.jsx)(l.a.Column,{width:1,children:Object(v.jsx)(h.a,{name:"calendar",size:"large",color:"grey"})}),Object(v.jsx)(l.a.Column,{width:15,children:Object(v.jsx)("span",{children:Object(g.default)(t.date,"MMMM d, yyyy h:mm a")})})]})}),Object(v.jsx)(j.a,{attached:!0,children:Object(v.jsxs)(l.a,{verticalAlign:"middle",children:[Object(v.jsx)(l.a.Column,{width:1,children:Object(v.jsx)(h.a,{name:"marker",size:"large",color:"blue"})}),Object(v.jsx)(l.a.Column,{width:11,children:Object(v.jsx)("span",{children:t.venue.address})}),Object(v.jsx)(l.a.Column,{width:4,children:Object(v.jsx)(f.a,{onClick:function(){return o(!a)},color:"facebook",size:"tiny",content:a?"Hide Map":"Show Map"})})]})}),a&&Object(v.jsx)(Ct,{latLng:t.venue.latLng})]})}function St(e){var t=e.attendees,n=e.hostUid;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)(j.a,{textAlign:"center",style:{border:"none"},attached:"top",primary:!0,inverted:!0,children:[t.length," ",t.length>1?"People":"Person"," Going"]}),Object(v.jsx)(j.a,{attached:!0,children:Object(v.jsx)(b.a.Group,{relaxed:!0,divided:!0,children:t.map((function(e){return Object(v.jsxs)(b.a,{as:d.a,to:"/profile/".concat(e.id),style:{position:"relative"},children:[n===e.id&&Object(v.jsx)(p.a,{style:{position:"absolute"},color:"orange",ribbon:"right",content:"Host"}),Object(v.jsx)(b.a.Image,{size:"tiny",src:e.photoURL||"/assets/user.png"}),Object(v.jsx)(b.a.Content,{verticalAlign:"middle",children:Object(v.jsx)(b.a.Header,{as:"h3",children:Object(v.jsx)("span",{children:e.displayName})})})]},e.id)}))})})]})}var Ut=n(494);function Lt(e){var t=e.inverted,n=void 0===t||t,r=e.content,c=void 0===r?"Loading...":r;return Object(v.jsx)(Ut.a,{inverted:n,active:!0,children:Object(v.jsx)(u.a,{content:c})})}function It(e){var t,n=e.match,r=Object(ee.d)(),c=Object(ee.e)((function(e){return e.auth})).currentUser,a=Object(ee.e)((function(e){return e.event.selectedEvent})),i=Object(ee.e)((function(e){return e.async})),s=i.loading,u=i.error,d=(null===a||void 0===a?void 0:a.hostUid)===(null===c||void 0===c?void 0:c.uid),j=null===a||void 0===a||null===(t=a.attendees)||void 0===t?void 0:t.some((function(e){return e.id===(null===c||void 0===c?void 0:c.uid)}));return ct({query:function(){return T(n.params.id)},data:function(e){return r(Ue(e))},deps:[n.params.id,r]}),s||!a&&!u?Object(v.jsx)(Lt,{content:"Loading event..."}):u?Object(v.jsx)(o.a,{to:"/error"}):Object(v.jsxs)(l.a,{children:[Object(v.jsxs)(l.a.Column,{width:10,children:[Object(v.jsx)(yt,{event:a,isGoing:j,isHost:d}),Object(v.jsx)(kt,{event:a}),Object(v.jsx)(dt,{eventId:a.id})]}),Object(v.jsx)(l.a.Column,{width:6,children:Object(v.jsx)(St,{attendees:null===a||void 0===a?void 0:a.attendees,hostUid:a.hostUid})})]})}var Tt=n(483),Nt=n(59),Rt=n(492),Pt=["label"];function Ft(e){var t=e.label,n=Object(Nt.a)(e,Pt),r=Object(ot.d)(n),c=Object(s.a)(r,2),a=c[0],o=c[1];return Object(v.jsxs)(Rt.a,{error:o.touched&&!!o.error,children:[Object(v.jsx)("label",{children:t}),Object(v.jsx)("input",Object(C.a)(Object(C.a)({},a),n)),o.touched&&o.error?Object(v.jsx)(p.a,{basic:!0,color:"red",children:o.error}):null]})}var At=["label"];function _t(e){var t=e.label,n=Object(Nt.a)(e,At),r=Object(ot.d)(n),c=Object(s.a)(r,2),a=c[0],o=c[1];return Object(v.jsxs)(Rt.a,{error:o.touched&&!!o.error,children:[Object(v.jsx)("label",{children:t}),Object(v.jsx)("textarea",Object(C.a)(Object(C.a)({},a),n)),o.touched&&o.error?Object(v.jsx)(p.a,{basic:!0,color:"red",children:o.error}):null]})}var Mt=n(482),Dt=["label"];function Vt(e){var t=e.label,n=Object(Nt.a)(e,Dt),r=Object(ot.d)(n),c=Object(s.a)(r,3),a=c[0],o=c[1],i=c[2];return Object(v.jsxs)(Rt.a,{error:o.touched&&!!o.error,children:[Object(v.jsx)("label",{children:t}),Object(v.jsx)(Mt.a,Object(C.a)({clearable:!0,value:a.value||null,onChange:function(e,t){return i.setValue(t.value)},onBlur:function(){return i.setTouched(!0)}},n)),o.touched&&o.error?Object(v.jsx)(p.a,{basic:!0,color:"red",children:o.error}):null]})}var zt=[{key:"drinks",text:"Drinks",value:"drinks"},{key:"culture",text:"Culture",value:"culture"},{key:"film",text:"Film",value:"film"},{key:"food",text:"Food",value:"food"},{key:"music",text:"Music",value:"music"},{key:"travel",text:"Travel",value:"travel"}],Gt=n(264),Ht=n.n(Gt),Bt=(n(411),["label"]);function qt(e){var t=e.label,n=Object(Nt.a)(e,Bt),r=Object(ot.e)().setFieldValue,c=Object(ot.d)(n),a=Object(s.a)(c,2),o=a[0],i=a[1];return Object(v.jsxs)(Rt.a,{error:i.touched&&!!i.error,children:[Object(v.jsx)("label",{children:t}),Object(v.jsx)(Ht.a,Object(C.a)(Object(C.a)(Object(C.a)({},o),n),{},{selected:o.value&&new Date(o.value)||null,onChange:function(e){return r(o.name,e)}})),i.touched&&i.error?Object(v.jsx)(p.a,{basic:!0,color:"red",children:i.error}):null]})}var Kt=n(97),Wt=n.n(Kt),Yt=["label","options"];function Jt(e){e.label;var t=e.options,n=Object(Nt.a)(e,Yt),r=Object(ot.d)(n),c=Object(s.a)(r,3),a=c[0],o=c[1],i=c[2];return Object(v.jsx)(Wt.a,{value:a.value.address,onChange:function(e){return i.setValue({address:e})},onSelect:function(e){return t=e,void Object(Kt.geocodeByAddress)(t).then((function(e){return Object(Kt.getLatLng)(e[0])})).then((function(e){return i.setValue({address:t,latLng:e})})).catch((function(e){return i.setError(e)}));var t},searchOptions:t,children:function(e){var t=e.getInputProps,r=e.suggestions,c=e.getSuggestionItemProps,s=e.loading;return Object(v.jsxs)(Rt.a,{error:o.touched&&!!o.error,children:[Object(v.jsx)("input",Object(C.a)({},t(Object(C.a)({name:a.name,onBlur:function(e){return function(e){a.onBlur(e),a.value.latLng||i.setValue({address:"",latLng:null})}(e)}},n)))),o.touched&&o.error?Object(v.jsx)(p.a,{basic:!0,color:"red",children:o.error.address}):null,(null===r||void 0===r?void 0:r.length)>0&&Object(v.jsx)(j.a,{loading:s,style:{marginTop:0,position:"absolute",zIndex:1e3,width:"100%"},children:Object(v.jsx)(O.a,{selection:!0,children:r.map((function(e){return Object(v.jsxs)(O.a.Item,Object(C.a)(Object(C.a)({},c(e)),{},{children:[Object(v.jsx)(O.a.Header,{children:e.formattedSuggestion.mainText}),Object(v.jsx)(O.a.Description,{children:e.formattedSuggestion.secondaryText})]}))}))})})]})}})}function Zt(e){var t=e.match,n=e.history,c=Object(ee.d)(),a=Object(r.useState)(!1),i=Object(s.a)(a,2),l=i[0],u=i[1],b=Object(r.useState)(!1),p=Object(s.a)(b,2),h=p[0],O=p[1],x=Object(ee.e)((function(e){return e.event})).selectedEvent,m=Object(ee.e)((function(e){return e.async})),g=m.loading,y=m.error,C=null!==x&&void 0!==x?x:{title:"",category:"",description:"",city:{address:"",latLng:null},venue:{address:"",latLng:null},date:""},k=it.a({title:it.c().required("You must provide a title"),category:it.c().required("You must provide a category"),description:it.c().required(),city:it.a().shape({address:it.c().required("City is required")}),venue:it.a().shape({address:it.c().required("Venue is required")}),date:it.c().required()});function S(){return(S=Object(E.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!1),u(!0),e.prev=2,e.next=5,R(t);case 5:u(!1),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(2),u(!0),Ne.b.error(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[2,8]])})))).apply(this,arguments)}return ct({shouldExecute:!!t.params.id,query:function(){return T(t.params.id)},data:function(e){return c(Ue(e))},deps:[t.params.id,c]}),g?Object(v.jsx)(Lt,{content:"Loading event..."}):y?Object(v.jsx)(o.a,{to:"/error"}):Object(v.jsxs)(j.a,{clearing:!0,children:[Object(v.jsx)(ot.c,{initialValues:C,validationSchema:k,onSubmit:function(){var e=Object(E.a)(w.a.mark((function e(t,r){var c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=r.setSubmitting,e.prev=1,!x){e.next=7;break}return e.next=5,a=t,U.collection("events").doc(a.id).update(a);case 5:e.next=9;break;case 7:return e.next=9,N(t);case 9:c(!1),n.push("/events"),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),Ne.b.error(e.t0.message),c(!1);case 17:case"end":return e.stop()}var a}),e,null,[[1,13]])})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting,n=e.dirty,r=e.isValid,c=e.values;return Object(v.jsxs)(ot.b,{className:"ui form",children:[Object(v.jsx)(ce.a,{content:"EVENT DETAILS"}),Object(v.jsx)(Ft,{name:"title",placeholder:"Event Title"}),Object(v.jsx)(Vt,{name:"category",placeholder:"Category",options:zt}),Object(v.jsx)(_t,{name:"description",placeholder:"Description",rows:3}),Object(v.jsx)(ce.a,{content:"EVENT LOCATION DETAILS"}),Object(v.jsx)(Jt,{name:"city",placeholder:"City"}),Object(v.jsx)(Jt,{name:"venue",disabled:!c.city.latLng,placeholder:"Venue",options:{location:new google.maps.LatLng(c.city.latLng),radius:1e3,types:["establishment"]}}),Object(v.jsx)(qt,{name:"date",placeholderText:"Event Date",timeFormat:"HH:mm",showTimeSelect:!0,timeCaption:"time",dateFormat:"MMMM d, yyyy h:mm a"}),x&&Object(v.jsx)(f.a,{loading:l,type:"button",floated:"left",color:x.isCancelled?"green":"red",content:x.isCancelled?"Reactivate Event":"Cancel Event",onClick:function(){return O(!0)}}),Object(v.jsx)(f.a,{loading:t,disabled:!r||!n||t,type:"submit",floated:"right",positive:!0,content:"Submit"}),Object(v.jsx)(f.a,{disabled:t,as:d.a,to:"/events",type:"submit",floated:"right",content:"Cancel"})]})}}),Object(v.jsx)(Tt.a,{content:(null===x||void 0===x?void 0:x.isCancelled)?"This will reactivate the event - are you sure?":"This will cancel the event - are you sure?",open:h,onCancel:function(){return O(!1)},onConfirm:function(){return function(e){return S.apply(this,arguments)}(x)}})]})}function Qt(e){var t=e.history;return Object(v.jsx)(j.a,{inverted:!0,textAlign:"center",vertical:!0,className:"masthead",children:Object(v.jsxs)(i.a,{children:[Object(v.jsx)(ce.a,{as:"h1",inverted:!0,children:"EventSpace"}),Object(v.jsxs)(f.a,{onClick:function(){return t.push("/events")},size:"huge",inverted:!0,children:["Get Started",Object(v.jsx)(h.a,{name:"right arrow",inverted:!0})]})]})})}var Xt=n(152);function $t(){var e=Object(ee.e)((function(e){return e.profile})).currentUserProfile,t=Object(o.f)();function n(){return(n=Object(E.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.push("/"),e.next=4,Pe();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),Ne.b.error(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}return Object(v.jsxs)(re.a.Item,{position:"right",children:[Object(v.jsx)(x.a,{avatar:!0,spaced:"right",src:(null===e||void 0===e?void 0:e.photoURL)||"/event-web-app/assets/user.png"}),Object(v.jsx)(Xt.a,{pointing:"top left",text:null===e||void 0===e?void 0:e.displayName,children:Object(v.jsxs)(Xt.a.Menu,{children:[Object(v.jsx)(Xt.a.Item,{as:d.a,to:"/createEvent",text:"Create Event",icon:"plus"}),Object(v.jsx)(Xt.a.Item,{as:d.a,to:"/profile/".concat(null===e||void 0===e?void 0:e.id),text:"My Profile",icon:"user"}),Object(v.jsx)(Xt.a.Item,{as:d.a,to:"/account",text:"My Account",icon:"settings"}),Object(v.jsx)(Xt.a.Item,{onClick:function(){return n.apply(this,arguments)},text:"Sign Out",icon:"power"})]})})]})}function en(e){e.setAuthenticated;var t=Object(ee.d)();return Object(v.jsxs)(re.a.Item,{position:"right",children:[Object(v.jsx)(f.a,{onClick:function(){return t(Ot({modalType:"LoginForm"}))},basic:!0,inverted:!0,content:"Login"}),Object(v.jsx)(f.a,{onClick:function(){return t(Ot({modalType:"RegisterForm"}))},basic:!0,inverted:!0,content:"Register",style:{marginLeft:"0.5em"}})]})}function tn(e){e.setFormOpen;var t=Object(ee.e)((function(e){return e.auth})).authenticated;return Object(v.jsx)(re.a,{inverted:!0,fixed:"top",children:Object(v.jsxs)(i.a,{children:[Object(v.jsxs)(re.a.Item,{as:d.b,exact:!0,to:"/",header:!0,children:[Object(v.jsx)("img",{src:"/event-web-app/assets/logo.png",alt:"logo",style:{marginRight:15}}),"EventSpace"]}),Object(v.jsx)(re.a.Item,{as:d.b,to:"/events",name:"Events"}),Object(v.jsx)(re.a.Item,{as:d.b,to:"/sandbox",name:"Sandbox"}),t&&Object(v.jsx)(re.a.Item,{as:d.b,to:"/createEvent",children:Object(v.jsx)(f.a,{inverted:!0,color:"",content:"Create Event"})}),t?Object(v.jsx)($t,{}):Object(v.jsx)(en,{})]})})}var nn=function(e){var t=e.text;return Object(v.jsx)("div",{children:t})};function rn(e){var t=e.location;return Object(v.jsx)("div",{style:{height:"100vh",width:"100%"},children:Object(v.jsx)(wt.a,{bootstrapURLKeys:{key:"AIzaSyDgO0x7YfN3CkJv_vBMfxnYADSdk2ZUTy0"},center:t.center,zoom:t.zoom,children:Object(v.jsx)(nn,{lat:t.center.lat,lng:t.center.lng,text:"My Marker"})})})}function cn(e){var t=e.setLocation,n=Object(r.useState)(""),c=Object(s.a)(n,2),a=c[0],o=c[1];return Object(v.jsx)(Wt.a,{value:a,onChange:function(e){o(e)},onSelect:function(e){Object(Kt.geocodeByAddress)(e).then((function(e){return Object(Kt.getLatLng)(e[0])})).then((function(e){console.log("Success",e),t(e)})).catch((function(e){return console.error("Error",e)})),o(e)},children:function(e){var t=e.getInputProps,n=e.suggestions,r=e.getSuggestionItemProps,c=e.loading;return Object(v.jsxs)("div",{children:[Object(v.jsx)("input",Object(C.a)({},t({placeholder:"Search Places ...",className:"location-search-input"}))),Object(v.jsxs)("div",{className:"autocomplete-dropdown-container",children:[c&&Object(v.jsx)("div",{children:"Loading..."}),n.map((function(e){var t=e.active?"suggestion-item--active":"suggestion-item",n=e.active?{backgroundColor:"#fafafa",cursor:"pointer"}:{backgroundColor:"#ffffff",cursor:"pointer"};return Object(v.jsx)("div",Object(C.a)(Object(C.a)({},r(e,{className:t,style:n})),{},{children:Object(v.jsx)("span",{children:e.description})}))}))]})]})}})}var an="INCREMENT_COUNTER",on="DECREMENT_COUNTER";var sn={data:42};function ln(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sn,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case an:return Object(C.a)(Object(C.a)({},e),{},{data:e.data+r});case on:return Object(C.a)(Object(C.a)({},e),{},{data:e.data-r});default:return e}}function un(){var e=Object(ee.d)(),t=Object(r.useState)(null),n=Object(s.a)(t,2),c=n[0],a=n[1],o=Object(ee.e)((function(e){return e.test.data})),i=Object(ee.e)((function(e){return e.async})).loading,l=Object(r.useState)({center:{lat:10.99835602,lng:77.01502627},zoom:11}),u=Object(s.a)(l,2),d=u[0],j=u[1];return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("h1",{children:"Testing 123"}),Object(v.jsxs)("h2",{children:["The data is: ",o," "]}),Object(v.jsx)(f.a,{name:"increment",loading:i&&"increment"===c,onClick:function(t){var n;e((n=20,function(){var e=Object(E.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(ge()),e.prev=1,e.next=4,lt(1e3);case 4:t({type:an,payload:n}),t(ye()),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t(we(e.t0));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}())),a(t.target.name)},content:"increment",color:"green"}),Object(v.jsx)(f.a,{name:"decrement",loading:i&&"decrement"===c,onClick:function(t){var n;e((n=10,function(){var e=Object(E.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(ge()),e.prev=1,e.next=4,lt(1e3);case 4:t({type:on,payload:n}),t(ye()),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),t(we(e.t0)),Ne.b.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}())),a(t.target.name)},content:"decrement",color:"red"}),Object(v.jsx)(f.a,{onClick:function(){return e(Ot({modalType:"TestModal",modalProps:{data:o}}))},content:"Open Modal",color:"teal"}),Object(v.jsxs)("div",{style:{marginTop:15},children:[Object(v.jsx)(cn,{setLocation:function(e){j(Object(C.a)(Object(C.a)({},d),{},{center:{lat:e.lat,lng:e.lng}}))}}),Object(v.jsx)(rn,{location:d})]})]})}function dn(e){var t=e.children,n=e.size,r=e.header,c=Object(ee.d)();return Object(v.jsxs)(jt.a,{open:!0,onClose:function(){return c(ft())},size:n,children:[r&&Object(v.jsx)(jt.a.Header,{children:r}),Object(v.jsx)(jt.a.Content,{children:t})]})}function jn(e){var t=e.data;return Object(v.jsx)(dn,{size:"mini",header:"Test Modal",children:Object(v.jsxs)("div",{children:["The data is: ",t]})})}function bn(){var e=Object(ee.d)();function t(t){e(ft()),function(e){_e.apply(this,arguments)}(t)}return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(f.a,{onClick:function(){return t("facebook")},icon:"facebook",fluid:!0,color:"facebook",style:{marginBottom:10},content:"Login with Facebook"}),Object(v.jsx)(f.a,{onClick:function(){return t("google")},icon:"google",fluid:!0,color:"google plus",content:"Login with Google"})]})}function pn(){var e=Object(ee.d)();return Object(v.jsx)(dn,{size:"mini",header:"Sign into EventSpace",children:Object(v.jsx)(ot.c,{initialValues:{email:"",password:""},validationSchema:it.a({email:it.c().required().email(),password:it.c().required()}),onSubmit:function(){var t=Object(E.a)(w.a.mark((function t(n,r){var c,a;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=r.setSubmitting,a=r.setErrors,t.prev=1,t.next=4,o=n,S.auth().signInWithEmailAndPassword(o.email,o.password);case 4:c(!1),e(ft()),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),a({auth:"Invalid email or password"}),c(!1);case 12:case"end":return t.stop()}var o}),t,null,[[1,8]])})));return function(e,n){return t.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting,n=e.isValid,r=e.dirty,c=e.errors;return Object(v.jsxs)(ot.b,{className:"ui form",children:[Object(v.jsx)(Ft,{name:"email",placeholder:"Email Address"}),Object(v.jsx)(Ft,{name:"password",placeholder:"Password",type:"password"}),c.auth&&Object(v.jsx)(p.a,{basic:!0,color:"red",style:{marginBottom:10},content:c.auth}),Object(v.jsx)(f.a,{loading:t,disabled:!n||!r||t,type:"submit",fluid:!0,size:"large",color:"facebook",content:"Login"}),Object(v.jsx)(bt.a,{horizontal:!0,children:"Or"}),Object(v.jsx)(bn,{})]})}})})}function hn(){var e=Object(ee.d)();return Object(v.jsx)(dn,{size:"mini",header:"Register to EventSpace",children:Object(v.jsx)(ot.c,{initialValues:{displayName:"",email:"",password:""},validationSchema:it.a({displayName:it.c().required(),email:it.c().required().email(),password:it.c().required()}),onSubmit:function(){var t=Object(E.a)(w.a.mark((function t(n,r){var c,a;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=r.setSubmitting,a=r.setErrors,t.prev=1,t.next=4,Fe(n);case 4:c(!1),e(ft()),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),a({auth:t.t0.message}),c(!1);case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,n){return t.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting,n=e.isValid,r=e.dirty,c=e.errors;return Object(v.jsxs)(ot.b,{className:"ui form",children:[Object(v.jsx)(Ft,{name:"displayName",placeholder:"Display Name"}),Object(v.jsx)(Ft,{name:"email",placeholder:"Email Address"}),Object(v.jsx)(Ft,{name:"password",placeholder:"Password",type:"password"}),c.auth&&Object(v.jsx)(p.a,{basic:!0,color:"red",style:{marginBottom:10},content:c.auth}),Object(v.jsx)(f.a,{loading:t,disabled:!n||!r||t,type:"submit",fluid:!0,size:"large",color:"facebook",content:"Register"}),Object(v.jsx)(bt.a,{horizontal:!0,children:"Or"}),Object(v.jsx)(bn,{})]})}})})}function On(){var e,t={TestModal:jn,LoginForm:pn,RegisterForm:hn},n=Object(ee.e)((function(e){return e.modals}));if(n){var r=n.modalType,c=n.modalProps,a=t[r];e=Object(v.jsx)(a,Object(C.a)({},c))}return Object(v.jsx)("span",{children:e})}function fn(){var e=Object(ee.e)((function(e){return e.async})).error;return Object(v.jsxs)(j.a,{placeholder:!0,children:[Object(v.jsx)(ce.a,{textAlign:"center",content:(null===e||void 0===e?void 0:e.message)||"Oops - we have an error."}),Object(v.jsx)(f.a,{as:d.a,to:"/events",primary:!0,style:{marginTop:20},content:"Return to events page"})]})}function xn(){var e=Object(ee.e)((function(e){return e.auth})).currentUser;return Object(v.jsxs)(j.a,{children:[Object(v.jsx)(ce.a,{dividing:!0,size:"large",content:"Account"}),"password"===e.providerId&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(ce.a,{color:"teal",sub:!0,content:"Change Password"}),Object(v.jsx)("p",{children:"Use this form to change your password"}),Object(v.jsx)(ot.c,{initialValues:{newPassword1:"",newPassword2:""},validationSchema:it.a({newPassword1:it.c().required("Password is required"),newPassword2:it.c().oneOf([it.b("newPassword1"),null],"Passwords do not match")}),onSubmit:function(){var e=Object(E.a)(w.a.mark((function e(t,n){var r,c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.setSubmitting,c=n.setErrors,e.prev=1,e.next=4,a=t,S.auth().currentUser.updatePassword(a.newPassword1);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),c({auth:e.t0.message});case 9:return e.prev=9,r(!1),e.finish(9);case 12:case"end":return e.stop()}var a}),e,null,[[1,6,9,12]])})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){var t=e.errors,n=e.isSubmitting,r=e.isValid,c=e.dirty;return Object(v.jsxs)(ot.b,{className:"ui form",children:[Object(v.jsx)(Ft,{name:"newPassword1",type:"password",placeholder:"New Password"}),Object(v.jsx)(Ft,{name:"newPassword2",type:"password",placeholder:"Confirm Password"}),t.auth&&Object(v.jsx)(p.a,{basic:!0,color:"red",style:{marginBottom:10},content:t.auth}),Object(v.jsx)(f.a,{type:"submit",style:{display:"block"},disabled:!r||n||!c,loading:n,size:"large",positive:!0,content:"Update Password"})]})}})]}),"facebook.com"===e.providerId&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(ce.a,{color:"teal",sub:!0,content:"Facebook account"}),Object(v.jsx)("p",{children:"Please visit Facebook to update your account."}),Object(v.jsx)(f.a,{icon:"facebook",color:"facebook",as:d.a,to:"https://facebook.com",content:"Go to Facebook"})]}),"google.com"===e.providerId&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(ce.a,{color:"teal",sub:!0,content:"Google account"}),Object(v.jsx)("p",{children:"Please visit Google to update your account."}),Object(v.jsx)(f.a,{icon:"google",color:"google plus",as:d.a,to:"https://google.com",content:"Go to Google"})]})]})}var vn=n(498);function mn(e){var t=e.profile;return Object(v.jsx)(ot.c,{initialValues:{displayName:t.displayName,description:t.description||""},validationSchema:it.a({displayName:it.c().required()}),onSubmit:function(){var e=Object(E.a)(w.a.mark((function e(t,n){var r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.setSubmitting,e.prev=1,e.next=4,A(t);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),Ne.b.error(e.t0.message);case 9:return e.prev=9,r(!1),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[1,6,9,12]])})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting,n=e.isValid,r=e.dirty;return Object(v.jsxs)(ot.b,{className:"ui form",children:[Object(v.jsx)(Ft,{name:"displayName",placeholder:"Display Name"}),Object(v.jsx)(_t,{name:"description",placeholder:"Description"}),Object(v.jsx)(f.a,{loading:t,disabled:t||!n||!r,floated:"right",type:"submit",size:"large",positive:!0,content:"Update Profile"})]})}})}function gn(e){var t=e.profile,n=e.isCurrentUser,c=Object(r.useState)(!1),a=Object(s.a)(c,2),o=a[0],i=a[1];return Object(v.jsx)(vn.a.Pane,{children:Object(v.jsxs)(l.a,{children:[Object(v.jsxs)(l.a.Column,{width:16,children:[Object(v.jsx)(ce.a,{floated:"left",icon:"user",content:"About ".concat(t.displayName)}),n&&Object(v.jsx)(f.a,{onClick:function(){return i(!o)},floated:"right",basic:!0,content:o?"Cancel":"Edit"})]}),Object(v.jsx)(l.a.Column,{width:16,children:o?Object(v.jsx)(mn,{profile:t}):Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("div",{style:{marginBottom:10},children:[Object(v.jsxs)("strong",{children:["Member Since:",Object(g.default)(t.createdAt,"dd MMM yyyy")," "]}),Object(v.jsx)("div",{children:t.description||null})]})})})]})})}var yn=n(490);function wn(e){var t=e.query,n=e.data,c=e.deps,a=Object(ee.d)();Object(r.useEffect)((function(){a(ge());var e=t().onSnapshot((function(e){var t=e.docs.map((function(e){return L(e)}));n(t),a(ye())}),(function(e){return a(we(e))}));return function(){e()}}),c)}function En(e){var t=e.profile,n=Object(ee.d)(),c=Object(r.useState)(0),a=Object(s.a)(c,2),o=a[0],i=a[1],u=Object(ee.e)((function(e){return e.profile})).profileEvents,j=Object(ee.e)((function(e){return e.async})).loading;wn({query:function(){return function(e,t){var n=U.collection("events"),r=new Date;switch(e){case 1:return n.where("attendeeIds","array-contains",t).where("date","<=",r).orderBy("date","desc");case 2:return n.where("hostUid","==",t).orderBy("date");default:return n.where("attendeeIds","array-contains",t).where("date",">=",r).orderBy("date")}}(o,t.id)},data:function(e){return n(function(e){return{type:qe,payload:e}}(e))},deps:[n,o,t.id]});return Object(v.jsx)(vn.a.Pane,{loading:j,children:Object(v.jsxs)(l.a,{children:[Object(v.jsx)(l.a.Column,{width:16,children:Object(v.jsx)(ce.a,{floated:"left",icon:"calendar",content:"Events"})}),Object(v.jsxs)(l.a.Column,{width:16,children:[Object(v.jsx)(vn.a,{onTabChange:function(e,t){return i(t.activeIndex)},panes:[{menuItem:"Future Events",pane:{key:"future"}},{menuItem:"Past Events",pane:{key:"past"}},{menuItem:"Hosting Events",pane:{key:"hosting"}}],menu:{secondary:!0,pointing:!0}}),Object(v.jsx)(yn.a.Group,{itemsPerRow:5,style:{marginTop:10},children:u.map((function(e){return Object(v.jsxs)(yn.a,{as:d.a,to:"/events/".concat(e.id),children:[Object(v.jsx)(x.a,{src:"/assets/categoryImages/".concat(e.category,".jpg"),style:{minHeight:100,objectFit:"cover"}}),Object(v.jsxs)(yn.a.Content,{children:[Object(v.jsx)(yn.a.Header,{content:e.title,textAlign:"center"}),Object(v.jsxs)(yn.a.Meta,{textAlign:"center",children:[Object(v.jsx)("div",{children:Object(g.default)(e.date,"dd MMM yyyy")}),Object(v.jsx)("div",{children:Object(g.default)(e.date,"hh:mm a")})]})]})]},e.id)}))})]})]})})}function Cn(e){var t=e.profile;return Object(v.jsxs)(yn.a,{as:d.a,to:"/profile/".concat(t.id),children:[Object(v.jsx)(x.a,{src:t.photoURL||"/event-web-app/assets/user.png"}),Object(v.jsx)(yn.a.Content,{children:Object(v.jsx)(yn.a.Header,{content:t.displayName})})]})}function kn(e){var t=e.profile,n=e.activeTab,r=Object(ee.d)(),c=Object(ee.e)((function(e){return e.profile})),a=c.followings,o=c.followers;return wn({query:3===n?function(){return e=t.id,U.collection("following").doc(e).collection("userFollowers");var e}:function(){return e=t.id,U.collection("following").doc(e).collection("userFollowing");var e},data:function(e){return r(3===n?function(e){return{type:Ke,payload:e}}(e):function(e){return{type:We,payload:e}}(e))},deps:[n,r]}),Object(v.jsx)(vn.a.Pane,{children:Object(v.jsxs)(l.a,{children:[Object(v.jsx)(l.a.Column,{width:16,children:Object(v.jsx)(ce.a,{floated:"left",icon:"user",content:3===n?"Followers":"Following"})}),Object(v.jsx)(l.a.Column,{width:16,children:Object(v.jsxs)(yn.a.Group,{itemsPerRow:5,children:[3===n&&o.map((function(e){return Object(v.jsx)(Cn,{profile:e},e.id)})),4===n&&a.map((function(e){return Object(v.jsx)(Cn,{profile:e},e.id)}))]})})]})})}var Sn=n(267),Un=n.n(Sn);n(457);function Ln(e){var t=e.setImage,n=e.imagePreview,c=Object(r.useRef)(null);return Object(v.jsx)(Un.a,{ref:c,src:n,style:{height:200,width:"100%"},aspectRatio:1,preview:".img-preview",guides:!1,viewMode:1,dragMode:"move",scalable:!0,cropBoxMovable:!0,cropBoxResizable:!0,crop:function(){"undefined"!==typeof c.current.getCroppedCanvas()&&c.current.getCroppedCanvas().toBlob((function(e){t(e)}),"image/jpeg")}})}var In=n(275);function Tn(e){var t=e.setFiles,n={border:"dashed 3px #eee",borderRadius:"5%",paddingTop:"30px",textAlign:"center"},c=Object(r.useCallback)((function(e){t(e.map((function(e){return Object.assign(e,{preview:URL.createObjectURL(e)})})))}),[t]),a=Object(In.a)({onDrop:c}),o=a.getRootProps,i=a.getInputProps,s=a.isDragActive;return Object(v.jsxs)("div",Object(C.a)(Object(C.a)({},o()),{},{style:s?Object(C.a)(Object(C.a)({},n),{border:"dashed 3px green"}):n,children:[Object(v.jsx)("input",Object(C.a)({},i())),Object(v.jsx)(h.a,{name:"upload",size:"huge"}),Object(v.jsx)(ce.a,{content:"Drop image here."})]}))}var Nn=n(269),Rn=n.n(Nn);function Pn(e){var t=e.setEditMode,n=Object(r.useState)([]),c=Object(s.a)(n,2),a=c[0],o=c[1],i=Object(r.useState)(null),u=Object(s.a)(i,2),d=u[0],j=u[1],b=Object(r.useState)(!1),p=Object(s.a)(b,2),h=p[0],O=p[1];function x(){o([]),j(null)}return Object(v.jsxs)(l.a,{children:[Object(v.jsxs)(l.a.Column,{width:4,children:[Object(v.jsx)(ce.a,{color:"blue",sub:!0,content:"Step 1 - Add Photo"}),Object(v.jsx)(Tn,{setFiles:o})]}),Object(v.jsx)(l.a.Column,{width:1}),Object(v.jsxs)(l.a.Column,{width:4,children:[Object(v.jsx)(ce.a,{color:"blue",sub:!0,content:"Step 2 - Resize"}),a.length>0&&Object(v.jsx)(Ln,{setImage:j,imagePreview:a[0].preview})]}),Object(v.jsx)(l.a.Column,{width:1}),Object(v.jsxs)(l.a.Column,{width:4,children:[Object(v.jsx)(ce.a,{color:"blue",sub:!0,content:"Step 3 - Preview & Upload"}),a.length>0&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"img-preview",style:{minHeight:200,minWidth:200,overflow:"hidden"}}),Object(v.jsxs)(f.a.Group,{children:[Object(v.jsx)(f.a,{loading:h,onClick:function(){O(!0);var e=Rn()()+"."+function(e){return e.slice(2+(e.lastIndexOf(".")-1>>>0))}(a[0].name),n=function(e,t){var n=S.auth().currentUser;return S.storage().ref().child("".concat(n.uid,"/user_images/").concat(t)).put(e)}(d,e);n.on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;console.log("upload is "+t+"% done")}),(function(e){Ne.b.error(e.message)}),(function(){n.snapshot.ref.getDownloadURL().then((function(n){(function(e,t){return M.apply(this,arguments)})(n,e).then((function(){O(!1),x(),t(!1)})).catch((function(e){Ne.b.error(e.message),O(!1)}))}))}))},style:{width:100},positive:!0,icon:"check"}),Object(v.jsx)(f.a,{disabled:h,onClick:x,style:{width:100},icon:"close"})]})]})]})]})}function Fn(e){var t=e.profile,n=e.isCurrentUser,c=Object(ee.d)(),a=Object(r.useState)(!1),o=Object(s.a)(a,2),i=o[0],u=o[1],d=Object(ee.e)((function(e){return e.async})).loading,j=Object(ee.e)((function(e){return e.profile})).photos,b=Object(r.useState)({isUpdating:!1,target:null}),p=Object(s.a)(b,2),h=p[0],O=p[1],m=Object(r.useState)({isDeleting:!1,target:null}),g=Object(s.a)(m,2),y=g[0],C=g[1];function k(){return(k=Object(E.a)(w.a.mark((function e(t,n){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O({isUpdating:!0,target:n}),e.prev=1,e.next=4,D(t);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),Ne.b.error(e.t0.message);case 9:return e.prev=9,O({isUpdating:!1,target:null}),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[1,6,9,12]])})))).apply(this,arguments)}function S(){return(S=Object(E.a)(w.a.mark((function e(t,n){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C({isDeleting:!0,target:n}),e.prev=1,e.next=4,Me(t.name);case 4:return e.next=6,z(t.id);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),Ne.b.error(e.t0.message);case 11:return e.prev=11,C({isDeleting:!1,target:null}),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])})))).apply(this,arguments)}return wn({query:function(){return e=t.id,U.collection("users").doc(e).collection("photos");var e},data:function(e){return c(function(e){return{type:Be,payload:e}}(e))},deps:[t.id,c]}),Object(v.jsx)(vn.a.Pane,{loading:d,children:Object(v.jsxs)(l.a,{children:[Object(v.jsxs)(l.a.Column,{width:16,children:[Object(v.jsx)(ce.a,{floated:"left",icon:"user",content:"Photos"}),n&&Object(v.jsx)(f.a,{onClick:function(){return u(!i)},floated:"right",basic:!0,content:i?"Cancel":"Add Photo"})]}),Object(v.jsx)(l.a.Column,{width:16,children:i?Object(v.jsx)(Pn,{setEditMode:u}):Object(v.jsx)(yn.a.Group,{itemsPerRow:5,children:j.map((function(e){return Object(v.jsxs)(yn.a,{children:[Object(v.jsx)(x.a,{src:e.url}),Object(v.jsxs)(f.a.Group,{fluid:!0,widths:2,children:[Object(v.jsx)(f.a,{name:e.id,loading:h.isUpdating&&h.target===e.id,onClick:function(t){return function(e,t){return k.apply(this,arguments)}(e,t.target.name)},disabled:e.url===t.photoURL,basic:!0,color:"green",content:"Main"}),Object(v.jsx)(f.a,{name:e.id,loading:y.isDeleting&&y.target===e.id,disabled:e.url===t.photoURL,onClick:function(t){return function(e,t){return S.apply(this,arguments)}(e,t.target.name)},basic:!0,color:"red",icon:"trash"})]})]},e.id)}))})})]})})}function An(e){var t=e.profile,n=e.isCurrentUser,c=Object(r.useState)(0),a=Object(s.a)(c,2),o=a[0],i=a[1],l=[{menuItem:"About",render:function(){return Object(v.jsx)(gn,{profile:t,isCurrentUser:n})}},{menuItem:"Photos",render:function(){return Object(v.jsx)(Fn,{profile:t,isCurrentUser:n})}},{menuItem:"Events",render:function(){return Object(v.jsx)(En,{profile:t})}},{menuItem:"Followers",render:function(){return Object(v.jsx)(kn,{profile:t,activeTab:o},t.id)}},{menuItem:"Following",render:function(){return Object(v.jsx)(kn,{profile:t,activeTab:o},t.id)}}];return Object(v.jsx)(vn.a,{menu:{fluid:!0,vertical:!0},menuPosition:"right",panes:l,onTabChange:function(e,t){return i(t.activeIndex)}})}var _n=n(493),Mn=n(499);function Dn(e){var t=e.profile,n=e.isCurrentUser,c=Object(ee.d)(),a=Object(r.useState)(!1),o=Object(s.a)(a,2),i=o[0],u=o[1],d=Object(ee.e)((function(e){return e.profile})).followingUser;function p(){return(p=Object(E.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.prev=1,e.next=4,q(t);case 4:c(Xe()),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),Ne.b.error(e.t0.message);case 10:return e.prev=10,u(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[1,7,10,13]])})))).apply(this,arguments)}function h(){return(h=Object(E.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.prev=1,e.next=4,W(t);case 4:c($e()),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),Ne.b.error(e.t0.message);case 10:return e.prev=10,u(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[1,7,10,13]])})))).apply(this,arguments)}return Object(r.useEffect)((function(){if(!n)return u(!0),function(){return e.apply(this,arguments)}().then((function(){return u(!1)})),function(){c({type:Ze})};function e(){return(e=Object(E.a)(w.a.mark((function e(){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,J(t.id);case 3:(n=e.sent)&&n.exists&&c(Xe()),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),Ne.b.error(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}}),[c,t.id,n]),Object(v.jsx)(j.a,{children:Object(v.jsxs)(l.a,{children:[Object(v.jsx)(l.a.Column,{width:12,children:Object(v.jsx)(b.a.Group,{children:Object(v.jsxs)(b.a,{children:[Object(v.jsx)(b.a.Image,{avatar:!0,size:"small",src:t.photoURL||"/event-web-app/assets/user.png"}),Object(v.jsx)(b.a.Content,{verticalAlign:"middle",children:Object(v.jsx)(ce.a,{as:"h1",style:{display:"block",marginBottom:10},content:t.displayName})})]})})}),Object(v.jsxs)(l.a.Column,{width:4,children:[Object(v.jsxs)(_n.a.Group,{children:[Object(v.jsx)(_n.a,{label:"Followers",value:t.followerCount||0}),Object(v.jsx)(_n.a,{label:"Following",value:t.followingCount||0})]}),!n&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(bt.a,{}),Object(v.jsxs)(Mn.a,{animated:"move",children:[Object(v.jsx)(Mn.a.Content,{visible:!0,style:{width:"100%"},children:Object(v.jsx)(f.a,{fluid:!0,color:"facebook",content:d?"Following":"Not Following"})}),Object(v.jsx)(Mn.a.Content,{hidden:!0,style:{width:"100%"},children:Object(v.jsx)(f.a,{onClick:d?function(){return function(){return h.apply(this,arguments)}()}:function(){return function(){return p.apply(this,arguments)}()},loading:i,basic:!0,fluid:!0,color:d?"gray":"facebook",content:d?"Unfollow":"Follow"})})]})]})]})]})})}function Vn(e){var t,n=e.match,r=Object(ee.d)(),c=Object(ee.e)((function(e){return e.profile})),a=c.selectedUserProfile,o=c.currentUserProfile,i=Object(ee.e)((function(e){return e.auth})).currentUser,s=Object(ee.e)((function(e){return e.async})),u=s.loading,d=s.error;return ct({query:function(){return F(n.params.id)},data:function(e){return r(function(e){return{type:He,payload:e}}(e))},deps:[r,n.params.id],shouldExecute:n.params.id!==i.uid}),t=n.params.id===i.uid?o:a,u&&!t||!t&&!d?Object(v.jsx)(Lt,{content:"Loading profile...."}):Object(v.jsx)(l.a,{children:Object(v.jsxs)(l.a.Column,{width:16,children:[Object(v.jsx)(Dn,{profile:t,isCurrentUser:i.uid===t.id}),Object(v.jsx)(An,{profile:t,isCurrentUser:i.uid===t.id})]})})}var zn=["component","prevLocation"];function Gn(e){var t=e.component,n=(e.prevLocation,Object(Nt.a)(e,zn)),r=Object(ee.e)((function(e){return e.auth})).authenticated;return Object(v.jsx)(o.b,Object(C.a)(Object(C.a)({},n),{},{render:function(e){return r?Object(v.jsx)(t,Object(C.a)({},e)):Object(v.jsx)(vt,Object(C.a)({},e))}}))}function Hn(){var e=Object(o.g)().key;return Object(ee.e)((function(e){return e.async})).initialized?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(On,{}),Object(v.jsx)(Ne.a,{position:"bottom-right",hideProgressBar:!0}),Object(v.jsx)(o.b,{exact:!0,path:"/",component:Qt}),Object(v.jsx)(o.b,{path:"/(.+)",render:function(){return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(tn,{}),Object(v.jsxs)(i.a,{className:"main",children:[Object(v.jsx)(o.b,{exact:!0,path:"/events",component:rt}),Object(v.jsx)(o.b,{exact:!0,path:"/sandbox",component:un}),Object(v.jsx)(o.b,{path:"/events/:id",component:It}),Object(v.jsx)(Gn,{path:["/createEvent","/manage/:id"],component:Zt},e),Object(v.jsx)(Gn,{path:"/account",component:xn}),Object(v.jsx)(Gn,{path:"/profile/:id",component:Vn}),Object(v.jsx)(o.b,{path:"/error",component:fn})]})]})}})]}):Object(v.jsx)(Lt,{content:"Loading App..."})}var Bn=n(129),qn=n(270),Kn="SIGN_IN_USER",Wn="SIGN_OUT_USER",Yn=n(47),Jn={authenticated:!1,currentUser:null,prevLocation:null,currentLocation:null};function Zn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jn,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case Kn:return Object(C.a)(Object(C.a)({},e),{},{authenticated:!0,currentUser:{email:r.email,photoURL:r.photoURL,uid:r.uid,displayName:r.displayName,providerId:r.providerData[0].providerId}});case Wn:return Object(C.a)(Object(C.a)({},e),{},{authenticated:!1,currentUser:null});case Yn.a:return Object(C.a)(Object(C.a)({},e),{},{prevLocation:e.currentLocation,currentLocation:r.location});default:return e}}var Qn=n(43),Xn={events:[],comments:[],moreEvents:!0,selectedEvent:null,lastVisible:null,filter:"all",startDate:new Date,retainState:!1};function $n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xn,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case oe:return Object(C.a)(Object(C.a)({},e),{},{events:[].concat(Object(Qn.a)(e.events),[r])});case ie:return Object(C.a)(Object(C.a)({},e),{},{events:[].concat(Object(Qn.a)(e.events.filter((function(e){return e.id!==r.id}))),[r])});case se:return Object(C.a)(Object(C.a)({},e),{},{events:Object(Qn.a)(e.events.filter((function(e){return e.id!==r})))});case le:return Object(C.a)(Object(C.a)({},e),{},{events:[].concat(Object(Qn.a)(e.events),Object(Qn.a)(r.events)),moreEvents:r.moreEvents,lastVisible:r.lastVisible});case ue:return Object(C.a)(Object(C.a)({},e),{},{comments:r});case de:return Object(C.a)(Object(C.a)({},e),{},{comments:[]});case je:return Object(C.a)(Object(C.a)({},e),{},{selectedEvent:r});case be:return Object(C.a)(Object(C.a)({},e),{},{events:[],moreEvents:!0,lastVisible:null});case pe:return Object(C.a)(Object(C.a)({},e),{},{retainState:!1,moreEvents:!0,filter:r});case he:return Object(C.a)(Object(C.a)({},e),{},{retainState:!1,moreEvents:!0,startDate:r});case Oe:return Object(C.a)(Object(C.a)({},e),{},{retainState:!0});default:return e}}var er={currentUserProfile:null,selectedUserProfile:null,photos:[],profileEvents:[],followers:[],followings:[],followingUser:!1,feed:[]};function tr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:er,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case Ge:return Object(C.a)(Object(C.a)({},e),{},{currentUserProfile:r});case He:return Object(C.a)(Object(C.a)({},e),{},{selectedUserProfile:r});case Be:return Object(C.a)(Object(C.a)({},e),{},{photos:r});case qe:return Object(C.a)(Object(C.a)({},e),{},{profileEvents:r});case Ke:return Object(C.a)(Object(C.a)({},e),{},{followers:r});case We:return Object(C.a)(Object(C.a)({},e),{},{followings:r});case Ye:return Object(C.a)(Object(C.a)({},e),{},{followingUser:!0});case Je:return Object(C.a)(Object(C.a)({},e),{},{followingUser:!1});case Ze:return Object(C.a)(Object(C.a)({},e),{},{followers:[],followings:[]});case Qe:return Object(C.a)(Object(C.a)({},e),{},{feed:r});default:return e}}var nr=n(146),rr=function(e){return Object(Bn.combineReducers)({router:Object(nr.b)(e),test:ln,event:$n,modals:xt,auth:Zn,async:Ce,profile:tr})},cr=n(272);function ar(){return function(e){return S.auth().onAuthStateChanged((function(t){t?(e(function(e){return{type:Kn,payload:e}}(t)),F(t.uid).onSnapshot((function(t){var n;e((n=L(t),{type:Ge,payload:n})),e({type:me})}))):(e({type:Wn}),e({type:me}))}))}}var or=n(52),ir=Object(or.a)();function sr(){var e=Object(o.g)().pathname;return Object(r.useEffect)((function(){window.scrollTo(0,0)}),[e]),null}var lr=function(){var e=Object(Bn.createStore)(rr(ir),Object(qn.composeWithDevTools)(Object(Bn.applyMiddleware)(cr.a)));return e.dispatch(ar()),e}(),ur=document.getElementById("root");a.a.render(Object(v.jsx)(ee.a,{store:lr,children:Object(v.jsxs)(nr.a,{history:ir,children:[Object(v.jsx)(sr,{}),Object(v.jsx)(Hn,{})]})}),ur)}},[[460,1,2]]]);
//# sourceMappingURL=main.68142674.chunk.js.map