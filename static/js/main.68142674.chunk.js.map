{"version":3,"sources":["features/events/eventDashboard/EventListAttendee.jsx","app/config/firebase.js","app/firestore/firestoreService.js","features/events/eventDashboard/EventListItem.jsx","features/events/eventDashboard/EventList.jsx","features/events/eventDashboard/EventListItemPlaceholder.jsx","features/events/eventConstants.js","app/async/asyncReducer.js","features/events/eventActions.js","features/events/eventDashboard/EventFilters.jsx","app/firestore/firebaseService.js","features/profiles/profileConstants.js","features/profiles/profileActions.js","features/events/eventDashboard/EventFeedItem.jsx","features/events/eventDashboard/EventsFeed.jsx","features/events/eventDashboard/EventDashboard.jsx","app/hooks/useFirestoreDoc.js","features/events/eventDetailed/EventDetailedChatForm.jsx","app/common/util/util.js","features/events/eventDetailed/EventDetailedChat.jsx","app/common/modals/modalReducer.js","features/auth/UnauthModal.jsx","features/events/eventDetailed/EventDetailedHeader.jsx","features/events/eventDetailed/EventDetailedMap.jsx","features/events/eventDetailed/EventDetailedInfo.jsx","features/events/eventDetailed/EventDetailedSidebar.jsx","app/layout/LoadingComponent.jsx","features/events/eventDetailed/EventDetailedPage.jsx","app/common/form/MyTextInput.jsx","app/common/form/MyTextArea.jsx","app/common/form/MySelectInput.jsx","app/api/categoryOptions.js","app/common/form/MyDateInput.jsx","app/common/form/MyPlaceInput.jsx","features/events/eventForm/EventForm.jsx","features/home/HomePage.jsx","features/nav/SignedInMenu.jsx","features/nav/SignedOutMenu.jsx","features/nav/NavBar.jsx","features/sandbox/TestMap.jsx","features/sandbox/TestPlaceInput.jsx","features/sandbox/testReducer.js","features/sandbox/Sandbox.jsx","app/common/modals/ModalWrapper.jsx","features/sandbox/TestModal.jsx","features/auth/SocialLogin.jsx","features/auth/LoginForm.jsx","features/auth/RegisterForm.jsx","app/common/modals/ModalManager.jsx","app/common/errors/ErrorComponent.jsx","features/auth/AccountPage.jsx","features/profiles/profilePage/ProfileForm.jsx","features/profiles/profilePage/AboutTab.jsx","app/hooks/useFirestoreCollection.js","features/profiles/profilePage/EventsTab.jsx","features/profiles/profilePage/ProfileCard.jsx","features/profiles/profilePage/FollowingTab.jsx","app/common/photos/PhotoWidgetCropper.jsx","app/common/photos/PhotoWidgetDropzone.jsx","app/common/photos/PhotoUploadWidget.jsx","features/profiles/profilePage/PhotosTab.jsx","features/profiles/profilePage/ProfileContent.jsx","features/profiles/profilePage/ProfileHeader.jsx","features/profiles/profilePage/ProfilePage.jsx","app/layout/PrivateRoute.jsx","app/layout/App.jsx","features/auth/authConstants.js","features/auth/authReducer.js","features/events/eventReducer.js","features/profiles/profileReducer.js","app/store/rootReducer.js","features/auth/authActions.js","app/store/configureStore.js","app/layout/ScrollToTop.jsx","index.js"],"names":["EventListAttendee","attendee","List","Item","as","Link","to","id","Image","size","circular","src","photoURL","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","firestore","db","dataFromSnapshot","snapshot","exists","data","prop","hasOwnProperty","Timestamp","toDate","fetchEventsFromFirestore","filter","startDate","limit","lastDocSnapshot","user","auth","currentUser","eventsRef","collection","orderBy","startAfter","where","uid","listenToEventFromFirestore","eventId","doc","addEventToFirestore","event","add","hostUid","hostedBy","displayName","hostPhotoURL","attendees","FieldValue","arrayUnion","attendeeIds","cancelEventToggle","update","isCancelled","setUserProfileData","set","email","createdAt","serverTimestamp","getUserProfile","userId","updateUserProfile","profile","a","updateProfile","downloadURL","filename","userDocRef","get","name","url","setMainPhoto","photo","today","Date","eventDocQuery","userFollowingRef","batch","eventsQuerySnap","i","docs","length","eventDoc","ref","forEach","docRef","followingDocRef","commit","deletePhotoFromCollection","photoId","userUid","delete","addUserAttendance","cancelUserAttendance","arrayRemove","followUser","followingCount","increment","unfollowUser","getFollowingDoc","profileId","EventListItem","Segment","Group","Content","Header","content","title","Description","Label","style","top","ribbon","color","Icon","format","date","venue","address","secondary","horizontal","map","clearing","description","Button","onClick","floated","EventList","events","getNextEvents","loading","moreEvents","pageStart","loadMore","hasMore","initialLoad","EventListItemPlaceholder","Placeholder","fluid","minHeight","image","Line","Paragraph","disabled","CREATE_EVENT","UPDATE_EVENT","DELETE_EVENT","FETCH_EVENTS","LISTEN_TO_EVENT_CHAT","CLEAR_COMMENTS","LISTEN_TO_SELECTED_EVENT","CLEAR_EVENTS","SET_FILTER","SET_START_DATE","RETAIN_STATE","ASYNC_ACTION_START","ASYNC_ACTION_FINISH","ASYNC_ACTION_ERROR","APP_LOADED","asyncActionStart","type","asyncActionFinish","asyncActionError","error","console","log","payload","initialState","initialized","asyncReducer","state","fetchEvents","dispatch","lastVisible","setFilter","value","clearEvents","listenToSelectedEvent","EventFilters","useDispatch","authenticated","useSelector","Menu","vertical","width","icon","attached","active","onChange","setStartDate","tileDisabled","firebaseObjectToArray","Object","entries","e","assign","signOutFirebase","signOut","registerInFirebase","creds","createUserWithEmailAndPassword","password","result","selectedProvider","provider","FacebookAuthProvider","GoogleAuthProvider","signInWithPopup","additionalUserInfo","isNewUser","toast","message","deleteFromFirebaseStorage","storage","child","addEventChatComment","values","newComment","text","comment","now","parentId","database","push","getEventChatRef","orderByKey","getUserFeedRef","limitToLast","LISTEN_TO_CURRENT_USER_PROFILE","LISTEN_TO_SELECTED_USER_PROFILE","LISTEN_TO_USER_PHOTOS","LISTEN_TO_USER_EVENTS","LISTEN_TO_FOLLOWERS","LISTEN_TO_FOLLOWINGS","SET_FOLLOW_USER","SET_UNFOLLOW_USER","CLEAR_FOLLOWINGS","LISTEN_TO_FEED","setFollowUser","setUnfollowUser","EventFeedItem","summary","post","code","Feed","Event","formatDistance","Summary","EventsFeed","feed","useEffect","on","val","reverse","listenToFeed","off","EventDashboard","retainState","async","useState","loadingInitial","setLoadingInitial","then","Grid","Column","Loader","useFirestoreDoc","query","deps","shouldExecute","unsubscribe","onSnapshot","EventDetailedChatForm","closeForm","initialValues","validationSchema","Yup","required","onSubmit","setSubmitting","resetForm","open","commentId","isSubmitting","handleSubmit","isValid","className","field","position","rows","placeholder","onKeyPress","key","shiftKey","preventDefault","delay","ms","Promise","resolve","setTimeout","createDataTree","dataset","hashtable","create","childNodes","dataTree","EventDetailedChat","comments","showReplyForm","setShowReplyForm","handleCloseReplyForm","listenToEventsChat","textAlign","inverted","border","Comment","Avatar","process","Author","Metadata","Text","split","Actions","Action","OPEN_MODAL","CLOSE_MODAL","openModal","closeModal","modalReducer","modalType","modalProps","UnauthModal","history","setModalOpen","setOpen","prevLocation","handleClose","pathname","handleOpenLoginModal","undefined","Modal","onClose","widths","Or","Divider","eventImageStyle","eventImageTextStyle","bottom","left","height","EventDetailedHeader","isHost","isGoing","setLoading","modalOpen","basic","padding","category","stye","Marker","EventDetailedMap","latLng","bootstrapURLKeys","center","zoom","lat","lng","EventDetailedInfo","mapOpen","setMapOpenToggle","verticalAlign","EventDetailedSidebar","primary","relaxed","divided","LoadingComponent","Dimmer","EventDetailedPage","match","selectedEvent","some","params","MyTextInput","label","props","useField","meta","FormField","touched","MyTextArea","MySelectInput","helpers","Select","clearable","d","setValue","onBlur","setTouched","categoryData","MyDateInput","setFieldValue","useFormikContext","selected","MyPlaceInput","options","onSelect","geocodeByAddress","results","getLatLng","catch","setError","searchOptions","getInputProps","suggestions","getSuggestionItemProps","handleBlur","marginTop","zIndex","selection","suggestion","formattedSuggestion","mainText","secondaryText","EventForm","loadingCancel","setLoadingCancel","confirmOpen","setConfirmOpen","city","shape","dirty","location","google","maps","LatLng","radius","types","placeholderText","timeFormat","showTimeSelect","timeCaption","dateFormat","positive","Confirm","onCancel","onConfirm","handleCancelToggle","HomePage","Container","SignedInMenu","currentUserProfile","useHistory","avatar","spaced","Dropdown","pointing","SignedOutMenu","setAuthenticated","marginLeft","NavBar","setFormOpen","fixed","NavLink","exact","header","alt","marginRight","AnyReactComponent","TestMap","TestPlaceInput","setLocation","setAddress","backgroundColor","cursor","INCREMENT_COUNTER","DECREMENT_COUNTER","testReducer","Sandbox","target","setTarget","test","amount","ModalWrapper","children","TestModal","SocialLogin","handleSocialLogin","socialLogin","marginBottom","LoginForm","setErrors","signInWithEmailAndPassword","errors","RegisterForm","ModalManager","renderedModal","modalLookup","currentModal","modals","ModalComponent","ErrorComponent","AccountPage","dividing","providerId","sub","newPassword1","newPassword2","oneOf","updatePassword","display","ProfileForm","AboutTab","isCurrentUser","editMode","setEditMode","Tab","Pane","useFirestoreCollection","EventsTab","activeTab","setActiveTab","profileEvents","getUserEventsQuery","listenToUserEvents","onTabChange","activeIndex","panes","menuItem","pane","menu","Card","itemsPerRow","objectFit","Meta","ProfileCard","FollowingTab","followings","followers","listenToFollowers","listenToFollowings","PhotoWidgetCropper","setImage","imagePreview","cropper","useRef","aspectRatio","preview","guides","viewMode","dragMode","scalable","cropBoxMovable","cropBoxResizable","crop","current","getCroppedCanvas","toBlob","blob","PhotoWidgetDropzone","setFiles","dropzoneStyles","borderRadius","paddingTop","onDrop","useCallback","acceptedFiles","file","URL","createObjectURL","useDropzone","getRootProps","isDragActive","PhotoUploadWidget","files","handleCancelCrop","minWidth","overflow","cuid","slice","lastIndexOf","getFileExtension","uploadTask","put","uploadToFirebaseStorage","progress","bytesTransferred","totalBytes","getDownloadURL","updateUserProfilePhoto","PhotosTab","photos","isUpdating","updating","setUpdating","isDeleting","deleting","setDeleting","listenToUserPhotos","handleSetMainPhoto","handleDeletePhoto","ProfileContent","render","menuPosition","ProfileHeader","followingUser","fetchFollowingDoc","followingDoc","Statistic","followerCount","Reveal","animated","visible","hidden","handleUnfollowUser","handleFollowUser","ProfilePage","selectedUserProfile","listenToSelectedUserProfile","PrivateRoute","Component","component","rest","App","useLocation","hideProgressBar","path","SIGN_IN_USER","SIGN_OUT_USER","currentLocation","authReducer","providerData","LOCATION_CHANGE","eventReducer","evt","profileReducer","rootReducer","combineReducers","router","connectRouter","verifyAuth","onAuthStateChanged","signInUser","createBrowserHistory","ScrollToTop","window","scrollTo","store","createStore","composeWithDevTools","applyMiddleware","thunk","configureStore","rootEl","document","getElementById","ReactDOM"],"mappings":"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","file":"static/js/main.68142674.chunk.js","sourcesContent":["import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { List, Image } from 'semantic-ui-react';\n\nexport default function EventListAttendee({attendee}) {\n    return(\n     <List.Item as={Link} to={`/profile/${attendee.id}`}>\n         <Image size='mini' circular src={attendee.photoURL} />\n     </List.Item> \n    )\n}","import firebase from 'firebase/app';\nimport 'firebase/firestore';\nimport 'firebase/database';\nimport 'firebase/auth';\nimport 'firebase/storage';\n\nconst firebaseConfig = {\n    apiKey: \"AIzaSyAJKD6-wlcmHwRzD2HhxkKNQdrt4BJvhG0\",\n    authDomain: \"eventspace-a2198.firebaseapp.com\",\n    projectId: \"eventspace-a2198\",\n    storageBucket: \"eventspace-a2198.appspot.com\",\n    messagingSenderId: \"1004675596430\",\n    appId: \"1:1004675596430:web:4018cfe41370857cff09df\"\n}\n\nfirebase.initializeApp(firebaseConfig);\nfirebase.firestore();\n\nexport default firebase;","import firebase from \"../config/firebase\";\n\nconst db = firebase.firestore();\n\nexport function dataFromSnapshot(snapshot) {\n  if (!snapshot.exists) return undefined;\n  const data = snapshot.data();\n\n  for (const prop in data) {\n    if (data.hasOwnProperty(prop)) {\n      if (data[prop] instanceof firebase.firestore.Timestamp) {\n        data[prop] = data[prop].toDate();\n      }\n    }\n  }\n\n  return {\n    ...data,\n    id: snapshot.id,\n  };\n}\n\nexport function fetchEventsFromFirestore(\n  filter,\n  startDate,\n  limit,\n  lastDocSnapshot = null\n) {\n  const user = firebase.auth().currentUser;\n  let eventsRef = db\n    .collection(\"events\")\n    .orderBy(\"date\")\n    .startAfter(lastDocSnapshot)\n    .limit(limit);\n  switch (filter) {\n    case \"isGoing\":\n      return eventsRef\n        .where(\"attendeeIds\", \"array-contains\", user.uid)\n        .where(\"date\", \">=\", startDate);\n    case \"isHost\":\n      return eventsRef\n        .where(\"hostUid\", \"==\", user.uid)\n        .where(\"date\", \">=\", startDate);\n    default:\n      return eventsRef.where(\"date\", \">=\", startDate);\n  }\n}\n\nexport function listenToEventFromFirestore(eventId) {\n  return db.collection(\"events\").doc(eventId);\n}\n\nexport function addEventToFirestore(event) {\n  const user = firebase.auth().currentUser;\n  return db.collection(\"events\").add({\n    ...event,\n    hostUid: user.uid,\n    hostedBy: user.displayName,\n    hostPhotoURL: user.photoURL || null,\n    attendees: firebase.firestore.FieldValue.arrayUnion({\n      id: user.uid,\n      displayName: user.displayName,\n      photoURL: user.photoURL || null,\n    }),\n    attendeeIds: firebase.firestore.FieldValue.arrayUnion(user.uid),\n  });\n}\n\nexport function updateEventInFirestore(event) {\n  return db.collection(\"events\").doc(event.id).update(event);\n}\n\nexport function deleteEventInFirestore(eventId) {\n  return db.collection(\"events\").doc(eventId).delete();\n}\n\nexport function cancelEventToggle(event) {\n  return db.collection(\"events\").doc(event.id).update({\n    isCancelled: !event.isCancelled,\n  });\n}\n\nexport function setUserProfileData(user) {\n  return db\n    .collection(\"users\")\n    .doc(user.uid)\n    .set({\n      displayName: user.displayName,\n      email: user.email,\n      photoURL: user.photoURL || null,\n      createdAt: firebase.firestore.FieldValue.serverTimestamp(),\n    });\n}\n\nexport function getUserProfile(userId) {\n  return db.collection(\"users\").doc(userId);\n}\n\nexport async function updateUserProfile(profile) {\n  const user = firebase.auth().currentUser;\n  try {\n    if (user.displayName !== profile.displayName) {\n      await user.updateProfile({\n        displayName: profile.displayName,\n      });\n    }\n    return await db.collection(\"users\").doc(user.uid).update(profile);\n  } catch (error) {\n    throw error;\n  }\n}\n\nexport async function updateUserProfilePhoto(downloadURL, filename) {\n  const user = firebase.auth().currentUser;\n  const userDocRef = db.collection(\"users\").doc(user.uid);\n  try {\n    const userDoc = await userDocRef.get();\n    if (!userDoc.data().photoURL) {\n      await db.collection(\"users\").doc(user.uid).update({\n        photoURL: downloadURL,\n      });\n      await user.updateProfile({\n        photoURL: downloadURL,\n      });\n    }\n    return await db.collection(\"users\").doc(user.uid).collection(\"photos\").add({\n      name: filename,\n      url: downloadURL,\n    });\n  } catch (error) {\n    throw error;\n  }\n}\n\nexport function getUserPhotos(userUid) {\n  return db.collection(\"users\").doc(userUid).collection(\"photos\");\n}\n\nexport async function setMainPhoto(photo) {\n  const user = firebase.auth().currentUser;\n  const today = new Date();\n  const eventDocQuery = db\n    .collection(\"events\")\n    .where(\"attendeeIds\", \"array-contains\", user.uid)\n    .where(\"date\", \">=\", today);\n  const userFollowingRef = db\n    .collection(\"following\")\n    .doc(user.uid)\n    .collection(\"userFollowing\");\n\n  const batch = db.batch();\n\n  batch.update(db.collection(\"users\").doc(user.uid), {\n    photoURL: photo.url,\n  });\n\n  try {\n    const eventsQuerySnap = await eventDocQuery.get();\n    for (let i = 0; i < eventsQuerySnap.docs.length; i++) {\n      let eventDoc = eventsQuerySnap.docs[i];\n      if (eventDoc.data().hostUid === user.uid) {\n        batch.update(eventsQuerySnap.docs[i].ref, {\n          hostPhotoURL: photo.url,\n        });\n      }\n      batch.update(eventsQuerySnap.docs[i].ref, {\n        attendees: eventDoc.data().attendees.filter((attendee) => {\n          if (attendee.id === user.uid) {\n            attendee.photoURL = photo.url;\n          }\n          return attendee;\n        }),\n      });\n    }\n\n    const userFollowingSnap = await userFollowingRef.get();\n    userFollowingSnap.docs.forEach((docRef) => {\n      let followingDocRef = db\n        .collection(\"following\")\n        .doc(docRef.id)\n        .collection(\"userFollowers\")\n        .doc(user.uid);\n      batch.update(followingDocRef, {\n        photoURL: photo.url\n      })\n    });\n\n    await batch.commit();\n\n    return await user.updateProfile({\n      photoURL: photo.url,\n    });\n  } catch (error) {\n    throw error;\n  }\n}\n\nexport function deletePhotoFromCollection(photoId) {\n  const userUid = firebase.auth().currentUser.uid;\n  return db\n    .collection(\"users\")\n    .doc(userUid)\n    .collection(\"photos\")\n    .doc(photoId)\n    .delete();\n}\n\nexport function addUserAttendance(event) {\n  const user = firebase.auth().currentUser;\n  return db\n    .collection(\"events\")\n    .doc(event.id)\n    .update({\n      attendees: firebase.firestore.FieldValue.arrayUnion({\n        id: user.uid,\n        displayName: user.displayName,\n        photoURL: user.photoURL || null,\n      }),\n      attendeeIds: firebase.firestore.FieldValue.arrayUnion(user.uid),\n    });\n}\n\nexport async function cancelUserAttendance(event) {\n  const user = firebase.auth().currentUser;\n  try {\n    const eventDoc = await db.collection(\"events\").doc(event.id).get();\n    return db\n      .collection(\"events\")\n      .doc(event.id)\n      .update({\n        attendeeIds: firebase.firestore.FieldValue.arrayRemove(user.uid),\n        attendees: eventDoc\n          .data()\n          .attendees.filter((attendee) => attendee.id !== user.uid),\n      });\n  } catch (error) {\n    throw error;\n  }\n}\n\nexport function getUserEventsQuery(activeTab, userUid) {\n  let eventsRef = db.collection(\"events\");\n  const today = new Date();\n  switch (activeTab) {\n    case 1: //past events\n      return eventsRef\n        .where(\"attendeeIds\", \"array-contains\", userUid)\n        .where(\"date\", \"<=\", today)\n        .orderBy(\"date\", \"desc\");\n    case 2: //hosting\n      return eventsRef.where(\"hostUid\", \"==\", userUid).orderBy(\"date\");\n    default:\n      return eventsRef\n        .where(\"attendeeIds\", \"array-contains\", userUid)\n        .where(\"date\", \">=\", today)\n        .orderBy(\"date\");\n  }\n}\n\nexport async function followUser(profile) {\n  const user = firebase.auth().currentUser;\n  const batch = db.batch();\n\n  try {\n    batch.set(\n      db\n        .collection(\"following\")\n        .doc(user.uid)\n        .collection(\"userFollowing\")\n        .doc(profile.id),\n      {\n        displayName: profile.displayName,\n        photoURL: profile.photoURL,\n        uid: profile.id,\n      }\n    );\n\n    batch.update(db.collection(\"users\").doc(user.uid), {\n      followingCount: firebase.firestore.FieldValue.increment(1),\n    });\n\n    return await batch.commit();\n  } catch (error) {\n    throw error;\n  }\n}\n\nexport async function unfollowUser(profile) {\n  const user = firebase.auth().currentUser;\n  const batch = db.batch();\n\n  try {\n    batch.delete(\n      db\n        .collection(\"following\")\n        .doc(user.uid)\n        .collection(\"userFollowing\")\n        .doc(profile.id)\n    );\n    batch.update(db.collection(\"users\").doc(user.uid), {\n      followingCount: firebase.firestore.FieldValue.increment(-1),\n    });\n\n    return await batch.commit();\n  } catch (error) {\n    throw error;\n  }\n}\n\nexport function getFollowersCollection(profileId) {\n  return db.collection(\"following\").doc(profileId).collection(\"userFollowers\");\n}\n\nexport function getFollowingCollection(profileId) {\n  return db.collection(\"following\").doc(profileId).collection(\"userFollowing\");\n}\n\nexport function getFollowingDoc(profileId) {\n  const userUid = firebase.auth().currentUser.uid;\n  return db\n    .collection(\"following\")\n    .doc(userUid)\n    .collection(\"userFollowing\")\n    .doc(profileId)\n    .get();\n}\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Item, Segment, Icon, List, Button, Label } from \"semantic-ui-react\";\nimport EventListAttendee from \"./EventListAttendee\";\nimport {format} from 'date-fns'\nimport { deleteEventInFirestore } from \"../../../app/firestore/firestoreService\";\n\nexport default function EventListItem({ event }) {\n\n\n  return (\n    <Segment.Group>\n      <Segment>\n        <Item.Group>\n          <Item>\n            <Item.Image size=\"tiny\" circular src={event.hostPhotoURL} />\n            <Item.Content>\n              <Item.Header content={event.title} />\n              <Item.Description>Hosted by <Link to={`/profile/${event.hostUid}`}>{event.hostedBy}</Link></Item.Description>\n              {event.isCancelled && (\n                <Label \n                  style={{top: '-40px'}}\n                  ribbon='right'\n                  color='red'\n                  content='This event has been canceled.'\n\n                />\n              )}\n            </Item.Content>\n          </Item>\n        </Item.Group>\n      </Segment>\n      <Segment>\n        <span>\n          <Icon name=\"clock\" /> {format(event.date, 'MMMM d, yyyy h:mm a')}\n          <Icon name=\"marker\" /> {event.venue.address}\n        </span>\n      </Segment>\n      <Segment secondary>\n        <List horizontal>\n          {event.attendees.map((attendee) => (\n            <EventListAttendee key={attendee.id} attendee={attendee} />\n          ))}\n        </List>\n      </Segment>\n      <Segment clearing>\n        <div>{event.description}</div>\n        <Button\n          onClick={() => deleteEventInFirestore(event.id)}\n          color=\"gray\"\n          floated=\"right\"\n          content=\"Delete\"\n        />\n        <Button\n          as={Link} to={`/events/${event.id}`}\n          color=\"facebook\"\n          floated=\"right\"\n          content=\"View\"\n        />\n      </Segment>\n    </Segment.Group>\n  );\n}\n","import React from \"react\";\nimport EventListItem from \"./EventListItem\";\nimport InfiniteScroll from \"react-infinite-scroller\";\n\nexport default function EventList({\n  events,\n  getNextEvents,\n  loading,\n  moreEvents,\n}) {\n  return (\n    <>\n      {events.length !== 0 && (\n        <InfiniteScroll\n          pageStart={0}\n          loadMore={getNextEvents}\n          hasMore={!loading && moreEvents}\n          initialLoad={false}\n        >\n          {events.map((event) => (\n            <EventListItem event={event} key={event.id} />\n          ))}\n        </InfiniteScroll>\n      )}\n    </>\n  );\n}\n","import React from 'react';\nimport {Segment, Button, Placeholder} from 'semantic-ui-react';\nexport default function EventListItemPlaceholder() {\n    return (\n        <Placeholder fluid >\n            <Segment.Group>\n                <Segment style={{minHeight: 110}}>\n                    <Placeholder>\n                        <Placeholder.Header image>\n                            <Placeholder.Line/>\n                            <Placeholder.Line/>\n                        </Placeholder.Header>\n                        <Placeholder.Paragraph>\n                            <Placeholder.Line/>\n                        </Placeholder.Paragraph>\n                    </Placeholder>\n                </Segment>\n                <Segment>\n                    <Placeholder>\n                        <Placeholder.Line/>\n                        <Placeholder.Line/>\n                    </Placeholder>\n                </Segment>\n                <Segment secondary style={{minHeight: 70}}/>\n                <Segment clearing>\n                    <Button disabled color='blue' floated='right' content='View'/>\n                </Segment>\n            </Segment.Group>\n        </Placeholder>\n    );\n};","export const CREATE_EVENT = 'CREATE_EVENT';\nexport const UPDATE_EVENT = 'UPDATE_EVENT';\nexport const DELETE_EVENT = 'DELETE_EVENT';\nexport const FETCH_EVENTS = 'FETCH_EVENTS';\nexport const LISTEN_TO_EVENT_CHAT = 'LISTEN_TO_EVENT_CHAT';\nexport const CLEAR_COMMENTS = 'CLEAR_COMMENTS';\nexport const LISTEN_TO_SELECTED_EVENT = 'LISTEN_TO_SELECTED_EVENT';\nexport const CLEAR_EVENTS = 'CLEAR_EVENTS';\nexport const SET_FILTER = 'SET_FILTER';\nexport const SET_START_DATE = 'SET_START_DATE';\nexport const RETAIN_STATE = 'RETAIN_STATE';\n\n\n","const ASYNC_ACTION_START = \"ASYNC_ACTION_START\";\nconst ASYNC_ACTION_FINISH = \"ASYNC_ACTION_FINISH\";\nconst ASYNC_ACTION_ERROR = \"ASYNC_ACTION_ERROR\";\nexport const APP_LOADED = 'APP_LOADED';\n\nexport function asyncActionStart() {\n  return {\n    type: ASYNC_ACTION_START,\n  };\n}\n\nexport function asyncActionFinish() {\n  return {\n    type: ASYNC_ACTION_FINISH,\n  };\n}\n\nexport function asyncActionError(error) {\n  console.log(error);\n  return {\n    type: ASYNC_ACTION_ERROR,\n    payload: error,\n  };\n}\n\nconst initialState = {\n  loading: false,\n  error: null,\n  initialized: false\n};\n\nexport default function asyncReducer(state = initialState, { type, payload }) {\n  switch (type) {\n    case ASYNC_ACTION_START:\n      return {\n        ...state,\n        loading: true,\n        error: null,\n      };\n    case ASYNC_ACTION_FINISH:\n      return {\n        ...state,\n        loading: false,\n      };\n    case ASYNC_ACTION_ERROR:\n      return {\n        ...state,\n        loading: false,\n        error: payload,\n      };\n      case APP_LOADED:\n      return {\n        ...state,\n        initialized: true,\n      };\n    default:\n      return state;\n  }\n}\n","import {\n    CLEAR_EVENTS,\n  CREATE_EVENT,\n  DELETE_EVENT,\n  FETCH_EVENTS,\n  LISTEN_TO_EVENT_CHAT,\n  LISTEN_TO_SELECTED_EVENT,\n  SET_FILTER,\n  SET_START_DATE,\n  UPDATE_EVENT,\n} from \"./eventConstants\";\nimport {\n  asyncActionError,\n  asyncActionFinish,\n  asyncActionStart,\n} from \"../../app/async/asyncReducer\";\nimport {\n  dataFromSnapshot,\n  fetchEventsFromFirestore,\n} from \"../../app/firestore/firestoreService\";\n\nexport function fetchEvents(filter, startDate, limit, lastDocSnapshot) {\n  return async function (dispatch) {\n    dispatch(asyncActionStart());\n    try {\n      const snapshot = await fetchEventsFromFirestore(\n        filter,\n        startDate,\n        limit,\n        lastDocSnapshot\n      ).get();\n      const lastVisible = snapshot.docs[snapshot.docs.length - 1];\n      const moreEvents = snapshot.docs.length >= limit;\n      const events = snapshot.docs.map((doc) => dataFromSnapshot(doc));\n      dispatch({ type: FETCH_EVENTS, payload: { events, moreEvents, lastVisible } });\n      dispatch(asyncActionFinish());\n    } catch (error) {\n      dispatch(asyncActionError(error));\n    }\n  };\n}\n\nexport function setFilter(value) {\n  return function(dispatch) {\n    dispatch(clearEvents());\n    dispatch({type: SET_FILTER, payload: value})\n  }\n}\n\nexport function setStartDate(date) {\n  return function(dispatch) {\n    dispatch(clearEvents());\n    dispatch({type: SET_START_DATE, payload: date})\n  }\n}\n\nexport function listenToSelectedEvent(event) {\n  return {\n    type: LISTEN_TO_SELECTED_EVENT,\n    payload: event,\n  };\n}\n\nexport function createEvent(event) {\n  return {\n    type: CREATE_EVENT,\n    payload: event,\n  };\n}\n\nexport function updateEvent(event) {\n  return {\n    type: UPDATE_EVENT,\n    payload: event,\n  };\n}\n\nexport function deleteEvent(eventId) {\n  return {\n    type: DELETE_EVENT,\n    payload: eventId,\n  };\n}\n\nexport function listenToEventsChat(comments) {\n  return {\n    type: LISTEN_TO_EVENT_CHAT,\n    payload: comments,\n  };\n}\n\nexport function clearEvents() {\n    return {\n        type: CLEAR_EVENTS\n    }\n}","import React from \"react\";\nimport { Header, Menu } from \"semantic-ui-react\";\nimport Calendar from \"react-calendar\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { setFilter, setStartDate } from \"../eventActions\";\n\nexport default function EventFilters({ loading }) {\n  const dispatch = useDispatch();\n  const { authenticated } = useSelector((state) => state.auth);\n  const { filter, startDate } = useSelector((state) => state.event);\n  return (\n    <>\n      {authenticated && (\n        <Menu vertical size=\"large\" style={{ width: \"100%\" }}>\n          <Header icon=\"filter\" attached color=\"blue\" content=\"Filters\" />\n          <Menu.Item\n            content=\"All Events\"\n            active={filter === \"all\"}\n            onClick={() => dispatch(setFilter('all'))}\n            disabled={loading}\n          />\n          <Menu.Item\n            content=\"I'm Going\"\n            active={filter === \"isGoing\"}\n            onClick={() => dispatch(setFilter('isGoing'))}\n            disabled={loading}\n          />\n          <Menu.Item\n            content=\"I'm Hosting\"\n            active={filter === \"isHost\"}\n            onClick={() => dispatch(setFilter('isHost'))}\n            disabled={loading}\n          />\n        </Menu>\n      )}\n      <Header icon=\"calendar\" attached color=\"blue\" content=\"Select Date\" />\n      <Calendar\n        onChange={(date) => dispatch(setStartDate(date))}\n        value={startDate || new Date()}\n        tileDisabled={() => loading}\n      />\n    </>\n  );\n}\n","import firebase from \"../config/firebase\";\nimport { setUserProfileData } from \"./firestoreService\";\nimport { toast } from \"react-toastify\";\n\nexport function firebaseObjectToArray(snapshot) {\n  if (snapshot) {\n    return Object.entries(snapshot).map((e) =>\n      Object.assign({}, e[1], { id: e[0] })\n    );\n  }\n}\n\nexport function signInWithEmail(creds) {\n  return firebase\n    .auth()\n    .signInWithEmailAndPassword(creds.email, creds.password);\n}\n\nexport function signOutFirebase() {\n  return firebase.auth().signOut();\n}\n\nexport async function registerInFirebase(creds) {\n  try {\n    const result = await firebase\n      .auth()\n      .createUserWithEmailAndPassword(creds.email, creds.password);\n    await result.user.updateProfile({\n      displayName: creds.displayName,\n    });\n    return await setUserProfileData(result.user);\n  } catch (error) {\n    throw error;\n  }\n}\n\nexport async function socialLogin(selectedProvider) {\n  let provider;\n  if (selectedProvider === \"facebook\") {\n    provider = new firebase.auth.FacebookAuthProvider();\n  }\n  if (selectedProvider === \"google\") {\n    provider = new firebase.auth.GoogleAuthProvider();\n  }\n  try {\n    const result = await firebase.auth().signInWithPopup(provider);\n    console.log(result);\n    if (result.additionalUserInfo.isNewUser) {\n      await setUserProfileData(result.user);\n    }\n  } catch (error) {\n    toast.error(error.message);\n  }\n}\n\nexport function updateUserPassword(creds) {\n  const user = firebase.auth().currentUser;\n  return user.updatePassword(creds.newPassword1);\n}\n\nexport function uploadToFirebaseStorage(file, filename) {\n  const user = firebase.auth().currentUser;\n  const storageRef = firebase.storage().ref();\n  return storageRef.child(`${user.uid}/user_images/${filename}`).put(file);\n}\n\nexport function deleteFromFirebaseStorage(filename) {\n  const userUid = firebase.auth().currentUser.uid;\n  const storageRef = firebase.storage().ref();\n  const photoRef = storageRef.child(`${userUid}/user_images/${filename}`);\n  return photoRef.delete();\n}\n\nexport function addEventChatComment(eventId, values) {\n  const user = firebase.auth().currentUser;\n  const newComment = {\n    displayName: user.displayName,\n    photoURL: user.photoURL,\n    uid: user.uid,\n    text: values.comment,\n    date: Date.now(),\n    parentId: values.parentId,\n  };\n  return firebase.database().ref(`chat/${eventId}`).push(newComment);\n}\n\nexport function getEventChatRef(eventId) {\n  return firebase.database().ref(`chat/${eventId}`).orderByKey();\n}\n\nexport function getUserFeedRef() {\n  const user = firebase.auth().currentUser;\n  return firebase\n    .database()\n    .ref(`posts/${user.uid}`)\n    .orderByKey()\n    .limitToLast(5);\n}\n","export const LISTEN_TO_CURRENT_USER_PROFILE = 'LISTEN_TO_CURRENT_USER_PROFILE';\nexport const LISTEN_TO_SELECTED_USER_PROFILE = 'LISTEN_TO_SELECTED_USER_PROFILE';\nexport const LISTEN_TO_USER_PHOTOS = 'LISTEN_TO_USER_PHOTOS';\nexport const LISTEN_TO_USER_EVENTS = 'LISTEN_TO_USER_EVENTS';\nexport const LISTEN_TO_FOLLOWERS = 'LISTEN_TO_FOLLOWERS';\nexport const LISTEN_TO_FOLLOWINGS = 'LISTEN_TO_FOLLOWINGS';\nexport const SET_FOLLOW_USER = 'SET_FOLLOW_USER';\nexport const SET_UNFOLLOW_USER = 'SET_UNFOLLOW_USER';\nexport const CLEAR_FOLLOWINGS = 'CLEAR_FOLLOWINGS';\nexport const LISTEN_TO_FEED = 'LISTEN_TO_FEED';\n","import { LISTEN_TO_CURRENT_USER_PROFILE, LISTEN_TO_FEED, LISTEN_TO_FOLLOWERS, LISTEN_TO_FOLLOWINGS, LISTEN_TO_SELECTED_USER_PROFILE, LISTEN_TO_USER_EVENTS, LISTEN_TO_USER_PHOTOS, SET_FOLLOW_USER, SET_UNFOLLOW_USER,} from \"./profileConstants\";\n\nexport function listenToCurrentUserProfile(profile) {\n    return {\n        type: LISTEN_TO_CURRENT_USER_PROFILE,\n        payload: profile\n    }\n}\n\nexport function listenToSelectedUserProfile(profile) {\n    return {\n        type: LISTEN_TO_SELECTED_USER_PROFILE,\n        payload: profile\n    }\n}\n\nexport function listenToUserPhotos(photos) {\n    return {\n        type: LISTEN_TO_USER_PHOTOS,\n        payload: photos\n    }\n}\n\nexport function listenToUserEvents(events) {\n    return {\n        type: LISTEN_TO_USER_EVENTS,\n        payload: events\n    }\n}\n\nexport function listenToFollowers(followers) {\n    return {\n        type: LISTEN_TO_FOLLOWERS,\n        payload: followers\n    }\n}\n\nexport function listenToFollowings(followings) {\n    return {\n        type: LISTEN_TO_FOLLOWINGS,\n        payload: followings\n    }\n}\n\nexport function setFollowUser() {\n    return {\n        type: SET_FOLLOW_USER\n    }\n}\n\nexport function setUnfollowUser() {\n    return {\n        type: SET_UNFOLLOW_USER\n    }\n}\n\nexport function listenToFeed(feed) {\n    return {\n        type: LISTEN_TO_FEED,\n        payload: feed\n    }\n}","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Feed } from \"semantic-ui-react\";\nimport { formatDistance } from 'date-fns';\n\nexport default function EventFeedItem({ post }) {\n  let summary;\n  switch (post.code) {\n    case \"joined-event\":\n      summary = (\n        <>\n          <Link to={`/profile/${post.userUid}`}>{post.displayName}</Link> has\n          signed up to <Link to={`/events/${post.eventId}`}>{post.title}</Link>\n        </>\n      );\n      break;\n    case \"left-event\":\n      summary = (\n        <>\n          <Link to={`/profile/${post.userUid}`}>{post.displayName}</Link> has\n          canceled their place on\n          <Link to={`/events/${post.eventId}`}>{post.title}</Link>\n        </>\n      );\n      break;\n    default:\n      summary = \"Something happened\";\n      break;\n  }\n  return (\n      <Feed.Event>\n          <Feed.Label image={post.photoURL} />\n          <Feed.Content>\n              <Feed.Date>{formatDistance(new Date(post.date), new Date())} ago</Feed.Date>\n              <Feed.Summary>{summary}</Feed.Summary>\n          </Feed.Content>\n      </Feed.Event>\n  )\n}\n","import React, { useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Feed, Header, Segment } from \"semantic-ui-react\";\nimport { getUserFeedRef, firebaseObjectToArray } from '../../../app/firestore/firebaseService'\nimport { listenToFeed } from \"../../profiles/profileActions\";\nimport EventFeedItem from \"./EventFeedItem\";\n\nexport default function EventsFeed() {\n  const dispatch = useDispatch();\n \n  const { feed } = useSelector((state) => state.profile);\n\n  useEffect(() => {\n      getUserFeedRef().on('value', snapshot => {\n        if (!snapshot.exists()) {\n            return;\n        }\n        const feed = firebaseObjectToArray(snapshot.val()).reverse();\n        dispatch(listenToFeed(feed))\n      })\n      return () => {\n          getUserFeedRef().off();\n      }\n  }, [dispatch])\n\n\n  return (\n    <>\n      <Header attached color=\"blue\" icon=\"newspaper\" content=\"News feed\" />\n      <Segment attached=\"bottom\">\n        <Feed>\n          {feed.map(post => (\n            <EventFeedItem post={post} key={post.id} />\n          ))}\n        </Feed>\n      </Segment>\n    </>\n  );\n}\n","import React, { useEffect, useState } from \"react\";\nimport { Grid, Loader } from \"semantic-ui-react\";\nimport EventList from \"./EventList\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport EventListItemPlaceholder from \"./EventListItemPlaceholder\";\nimport EventFilters from \"./EventFilters\";\n\nimport EventsFeed from \"./EventsFeed\";\n\nimport { fetchEvents } from \"../eventActions\";\nimport { RETAIN_STATE } from \"../eventConstants\";\n\n\n\nexport default function EventDashboard() {\n  const limit = 2;\n  const dispatch = useDispatch();\n  const { events, moreEvents, filter, startDate, lastVisible, retainState } = useSelector((state) => state.event);\n  const { loading } = useSelector((state) => state.async);\n  const { authenticated } = useSelector((state) => state.auth);\n  const [loadingInitial, setLoadingInitial] = useState(false);\n \n \n\n  useEffect(() => {\n    if (retainState) return;\n    setLoadingInitial(true);\n    dispatch(fetchEvents(filter, startDate, limit)).then(() => {\n      setLoadingInitial(false);\n    });\n    return () => {\n      dispatch({type: RETAIN_STATE})\n    }\n  }, [dispatch, filter, startDate, retainState]);\n\n  function handleFetchNextEvents() {\n    dispatch(fetchEvents(filter, startDate, limit, lastVisible));\n  }\n\n  return (\n    <Grid>\n      <Grid.Column width={10}>\n\n        {loadingInitial && (\n          <>\n            <EventListItemPlaceholder />\n            <EventListItemPlaceholder />\n          </>\n        )}\n        <EventList\n          events={events}\n          getNextEvents={handleFetchNextEvents}\n          loading={loading}\n          moreEvents={moreEvents}\n        />\n      </Grid.Column>\n      <Grid.Column width={6}>\n        {authenticated && <EventsFeed />}\n        <EventFilters\n          \n          loading={loading}\n        />\n      </Grid.Column>\n      <Grid.Column width={10}>\n          <Loader active={loading} />\n      </Grid.Column>\n    </Grid>\n  );\n}\n","import { useEffect } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { asyncActionError, asyncActionFinish, asyncActionStart} from '../async/asyncReducer';\nimport { dataFromSnapshot } from \"../firestore/firestoreService\";\n\nexport default function useFirestoreDoc({query, data, deps, shouldExecute = true}) {\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        if (!shouldExecute) return; \n        dispatch(asyncActionStart());\n        const unsubscribe = query().onSnapshot(\n            snapshot => {\n                if (!snapshot.exists) {\n                    dispatch(asyncActionError({code: 'not-found', message: 'Could not find document'}));\n                    return;\n                }\n                data(dataFromSnapshot(snapshot));\n                dispatch(asyncActionFinish());\n            },\n            error => dispatch(asyncActionError())\n        );\n        return () => {\n            unsubscribe()\n        }\n    }, deps) // eslint-disable-line react-hooks/exhaustive-deps\n}","import { Field, Form, Formik } from \"formik\";\nimport React from \"react\";\nimport { toast } from \"react-toastify\";\nimport { addEventChatComment } from \"../../../app/firestore/firebaseService\";\nimport { Loader } from \"semantic-ui-react\";\nimport * as Yup from 'yup';\n\nexport default function EventDetailedChatForm({ eventId, parentId, closeForm }) {\n  return (\n    <Formik\n      initialValues={{ comment: \"\" }}\n      validationSchema={Yup.object({\n          comment: Yup.string().required()\n      })}\n      onSubmit={async (values, { setSubmitting, resetForm }) => {\n        try {\n          await addEventChatComment(eventId, {...values, parentId});\n          resetForm();\n        } catch (error) {\n          toast.error(error.message);\n        } finally {\n          setSubmitting(false);\n          closeForm({open: false, commentId: null})\n        }\n      }}\n    >\n      {({ isSubmitting, handleSubmit, isValid }) => (\n        <Form className=\"ui form\">\n          <Field name=\"comment\">\n            {({ field }) => (\n              <div style={{ position: \"relative\" }}>\n                <Loader active={isSubmitting} />\n                <textarea\n                  rows={2}\n                  {...field}\n                  placeholder=\"Enter your comment (Press ENTER to submit, SHIFT + ENTER for new line)\"\n                  onKeyPress={(e) => {\n                      if (e.key === 'Enter' && e.shiftKey) {\n                          return;\n                      }\n                      if (e.key === 'Enter' && !e.shiftKey) {\n                          e.preventDefault();\n                          isValid && handleSubmit();\n                      }\n                  }}\n                >\n\n                </textarea>\n              </div>\n            )}\n          </Field>\n        </Form>\n      )}\n    </Formik>\n  );\n}\n","\n\nexport function delay(ms) {\n  return new Promise((resolve) => setTimeout(resolve, ms));\n}\n\n\nexport function getFileExtension(filename) {\n  return filename.slice((filename.lastIndexOf('.') -1 >>> 0) + 2);\n}\n\nexport function createDataTree(dataset) {\n  let hashtable = Object.create(null);\n  dataset.forEach(a => hashtable[a.id] = {...a, childNodes: []});\n  let dataTree = [];\n  dataset.forEach(a => {\n    if (a.parentId) hashtable[a.parentId].childNodes.push(hashtable[a.id]);\n    else dataTree.push(hashtable[a.id]);\n  });\n  return dataTree;\n}\n","import React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport { Segment, Header, Comment } from \"semantic-ui-react\";\nimport {\n  firebaseObjectToArray,\n  getEventChatRef,\n} from \"../../../app/firestore/firebaseService\";\nimport { listenToEventsChat } from \"../eventActions\";\nimport EventDetailedChatForm from \"./EventDetailedChatForm\";\nimport { formatDistance } from \"date-fns\";\nimport { CLEAR_COMMENTS } from \"../eventConstants\";\nimport { createDataTree } from \"../../../app/common/util/util\";\n\nexport default function EventDetailedChat({ eventId }) {\n  const dispatch = useDispatch();\n  const { comments } = useSelector((state) => state.event);\n  const { authenticated } = useSelector((state) => state.auth);\n  const [showReplyForm, setShowReplyForm] = useState({\n    open: false,\n    commentId: null,\n  });\n\n  function handleCloseReplyForm() {\n    setShowReplyForm({ open: false, commentId: null });\n  }\n\n  useEffect(() => {\n    getEventChatRef(eventId).on(\"value\", (snapshot) => {\n      if (!snapshot.exists()) return;\n      dispatch(\n        listenToEventsChat(firebaseObjectToArray(snapshot.val()).reverse())\n      );\n    });\n    return () => {\n      dispatch({ type: CLEAR_COMMENTS });\n      getEventChatRef().off();\n    };\n  }, [eventId, dispatch]);\n\n  return (\n    <>\n      <Segment\n        textAlign=\"center\"\n        attached=\"top\"\n        inverted\n        color='facebook'\n        style={{ border: \"none\" }}\n      >\n        <Header>{authenticated ? 'Chat about this event' : 'Sign in to view and comment'}</Header>\n      </Segment>\n\n      {authenticated && \n      <Segment attached>\n        <EventDetailedChatForm\n          eventId={eventId}\n          parentId={0}\n          closeForm={setShowReplyForm}\n        />\n        <Comment.Group>\n          {createDataTree(comments).map((comment) => (\n            <Comment key={comment.id}>\n              <Comment.Avatar src={comment.photoURL || process.env.PUBLIC_URL + '/assets/user.png'} />\n              <Comment.Content>\n                <Comment.Author as={Link} to={`/profile/${comment.uid}`}>\n                  {comment.displayName}\n                </Comment.Author>\n                <Comment.Metadata>\n                  <div>{formatDistance(comment.date, new Date())}</div>\n                </Comment.Metadata>\n                <Comment.Text>\n                  {comment.text.split(\"\\n\").map((text, i) => (\n                    <span key={i}>\n                      {text}\n                      <br />\n                    </span>\n                  ))}\n                </Comment.Text>\n                <Comment.Actions>\n                  <Comment.Action\n                    onClick={() =>\n                      setShowReplyForm({ open: true, commentId: comment.id })\n                    }\n                  >\n                    Reply\n                  </Comment.Action>\n                  {showReplyForm.open &&\n                    showReplyForm.commentId === comment.id && (\n                      <EventDetailedChatForm\n                        eventId={eventId}\n                        parentId={comment.id}\n                        closeForm={handleCloseReplyForm}\n                      />\n                    )}\n                </Comment.Actions>\n              </Comment.Content>\n              {comment.childNodes.length > 0 && (\n                <Comment.Group>\n                  {comment.childNodes.reverse().map((child) => (\n                    <Comment key={child.id}>\n                      <Comment.Avatar\n                        src={child.photoURL || process.env.PUBLIC_URL + '/assets/user.png'}\n                      />\n                      <Comment.Content>\n                        <Comment.Author as={Link} to={`/profile/${child.uid}`}>\n                          {child.displayName}\n                        </Comment.Author>\n                        <Comment.Metadata>\n                          <div>{formatDistance(child.date, new Date())}</div>\n                        </Comment.Metadata>\n                        <Comment.Text>\n                          {child.text.split(\"\\n\").map((text, i) => (\n                            <span key={i}>\n                              {text}\n                              <br />\n                            </span>\n                          ))}\n                        </Comment.Text>\n                        <Comment.Actions>\n                          <Comment.Action\n                            onClick={() =>\n                              setShowReplyForm({\n                                open: true,\n                                commentId: child.id,\n                              })\n                            }\n                          >\n                            Reply\n                          </Comment.Action>\n                          {showReplyForm.open &&\n                            showReplyForm.commentId === child.id && (\n                              <EventDetailedChatForm\n                                eventId={eventId}\n                                parentId={child.parentId}\n                                closeForm={handleCloseReplyForm}\n                              />\n                            )}\n                        </Comment.Actions>\n                      </Comment.Content>\n                    </Comment>\n                  ))}\n                </Comment.Group>\n              )}\n            </Comment>\n          ))}\n        </Comment.Group>\n      </Segment>}\n    </>\n  );\n}\n","const OPEN_MODAL = 'OPEN_MODAL';\nconst CLOSE_MODAL = 'CLOSE_MODAL';\n\nexport function openModal(payload) {\n    return {\n        type: OPEN_MODAL,\n        payload\n    }\n}\n\nexport function closeModal() {\n    return {\n        type: CLOSE_MODAL,\n        \n    }\n}\n\nconst initialState = null;\n\nexport default function modalReducer(state = initialState, {type, payload}) {\n    switch (type) {\n        case OPEN_MODAL:\n            const {modalType, modalProps} = payload;\n            return {modalType, modalProps};\n            case CLOSE_MODAL:\n                return null;\n                default:\n                    return state;\n    }\n}","import React, { useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Button, Divider, Modal } from \"semantic-ui-react\";\nimport { openModal } from \"../../app/common/modals/modalReducer\";\n\nexport default function UnauthModal({ history, setModalOpen }) {\n  const [open, setOpen] = useState(true);\n  const { prevLocation } = useSelector((state) => state.auth);\n  const dispatch = useDispatch();\n\n  function handleClose() {\n    if (!history) {\n      setOpen(false);\n      setModalOpen(false);\n      return;\n    }\n    if (history && prevLocation) {\n      history.push(prevLocation.pathname);\n    } else {\n      history.push(\"/events\");\n    }\n    setOpen(false);\n  }\n\nfunction handleOpenLoginModal(modalType) {\n  dispatch(openModal({modalType}))\n  setOpen(false)\n  if (setModalOpen !== undefined) {\n    setModalOpen(false)\n  }\n}\n\n  return (\n    <Modal open={open} size=\"mini\" onClose={handleClose}>\n      <Modal.Header content=\"You need to be signed in to do that\" />\n      <Modal.Content>\n        <p>Please login or register to see this content</p>\n        <Button.Group widths={4}>\n          <Button\n            fluid\n            color=\"blue\"\n            content=\"Login\"\n            onClick={() => handleOpenLoginModal('LoginForm')}\n          />\n          <Button.Or />\n          <Button\n            fluid\n            color=\"gray\"\n            content=\"Register\"\n            onClick={() => handleOpenLoginModal('RegisterForm')}\n          />\n        </Button.Group>\n        <Divider />\n        <div style={{ textAlign: \"center\" }}>\n          <p>Or click cancel to continue as a guest</p>\n          <Button onClick={handleClose} content=\"Cancel\" />\n        </div>\n      </Modal.Content>\n    </Modal>\n  );\n}\n","import React, { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Segment, Image, Item, Header, Button } from \"semantic-ui-react\";\nimport { format } from \"date-fns\";\nimport { toast } from \"react-toastify\";\nimport { addUserAttendance, cancelUserAttendance } from \"../../../app/firestore/firestoreService\";\nimport { useSelector } from \"react-redux\";\nimport UnauthModal from '../../auth/UnauthModal';\n\n\nconst eventImageStyle = {\n  filter: \"brightness(30%)\",\n};\n\nconst eventImageTextStyle = {\n  position: \"absolute\",\n  bottom: \"5%\",\n  left: \"5%\",\n  width: \"100%\",\n  height: \"auto\",\n  color: \"white\",\n};\n\nexport default function EventDetailedHeader({ event, isHost, isGoing }) {\n  const [loading, setLoading] = useState(false);\n  const {authenticated} = useSelector(state => state.auth);\n  const {modalOpen, setModalOpen} = useState(false);\n\n  async function handleUserJoinEvent() {\n    setLoading(true);\n    try {\n      await addUserAttendance(event);\n    } catch (error) {\n      toast.error(error.message);\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  async function handleUserLeaveEvent() {\n    setLoading(true);\n    try {\n      await cancelUserAttendance(event);\n    } catch (error) {\n      toast.error(error.message);\n    } finally {\n      setLoading(false);\n    }\n  }\n\n\n  return (\n\n    <>\n    {modalOpen &&\n    <UnauthModal setModalOpen={setModalOpen} />\n    }\n    <Segment.Group>\n      <Segment basic attached=\"top\" style={{ padding: \"0\" }}>\n        <Image\n          src={process.env.PUBLIC_URL + `/assets/categoryImages/${event.category}.jpg`}\n          fluid\n          style={eventImageStyle}\n        />\n\n        <Segment basic stye={eventImageTextStyle}>\n          <Item.Group>\n            <Item>\n              <Item.Content>\n                <Header\n                  size=\"huge\"\n                  content={event.title}\n                  style={{ color: \"black\" }}\n                />\n                <p>{format(event.date, \"MMMM d, yyyy h:mm a\")}</p>\n                <p>\n                  Hosted by <strong><Link to={`/profile/${event.hostUid}`}>{event.hostedBy}</Link></strong>\n                </p>\n              </Item.Content>\n            </Item>\n          </Item.Group>\n        </Segment>\n      </Segment>\n\n      <Segment attached=\"bottom\" clearing>\n        {!isHost && (\n          <>\n            {isGoing ? (\n              <Button onClick={handleUserLeaveEvent} loading={loading}>Cancel My Place</Button>\n            ) : (\n              <Button\n                onClick={authenticated ? handleUserJoinEvent : () => setModalOpen(true)}\n                loading={loading}\n                color=\"facebook\"\n              >\n                JOIN THIS EVENT\n              </Button>\n            )}\n          </>\n        )}\n\n        {isHost && (\n          <Button\n            as={Link}\n            to={`/manage/${event.id}`}\n            color=\"facebook\"\n            floated=\"right\"\n            \n          >\n            Manage Event\n          </Button>\n        )}\n      </Segment>\n    </Segment.Group>\n    </>\n    \n  );\n}\n","import React from \"react\";\nimport { Icon, Segment } from \"semantic-ui-react\";\nimport GoogleMapReact from \"google-map-react\";\n\nfunction Marker() {\n  return (<Icon name=\"marker\" size=\"big\" color=\"red\" />)\n}\n\nexport default function EventDetailedMap({latLng}) {\n  const zoom = 14;\n  return (\n    <Segment attached=\"bottom\" style={{ padding: 0 }}>\n      <div style={{ height: 300, width: \"100%\" }}>\n        <GoogleMapReact\n          bootstrapURLKeys={{ key: \"AIzaSyDgO0x7YfN3CkJv_vBMfxnYADSdk2ZUTy0\" }}\n          center={latLng}\n          zoom={zoom}\n        >\n            \n          <Marker lat={latLng.lat} lng={latLng.lng}  />\n        </GoogleMapReact>\n      </div>\n    </Segment>\n  )\n}\n","import React, { useState } from 'react';\nimport { Segment, Grid, Icon, Button } from 'semantic-ui-react'\nimport { format } from 'date-fns';\nimport EventDetailedMap from './EventDetailedMap';\n\nexport default function EventDetailedInfo({event}) {\n    const [mapOpen, setMapOpenToggle] = useState(false)\n    return(\n        <Segment.Group>\n    <Segment attached=\"top\">\n        <Grid>\n            <Grid.Column width={1}>\n                <Icon size=\"large\" color=\"grey\" name=\"info\"/>\n            </Grid.Column>\n            <Grid.Column width={15}>\n                <p>{event.description}</p>\n            </Grid.Column>\n        </Grid>\n    </Segment>\n    <Segment attached>\n        <Grid verticalAlign=\"middle\">\n            <Grid.Column width={1}>\n                <Icon name=\"calendar\" size=\"large\" color=\"grey\"/>\n            </Grid.Column>\n            <Grid.Column width={15}>\n                <span>{format(event.date, 'MMMM d, yyyy h:mm a')}</span>\n            </Grid.Column>\n        </Grid>\n    </Segment>\n    <Segment attached>\n        <Grid verticalAlign=\"middle\">\n            <Grid.Column width={1}>\n                <Icon name=\"marker\" size=\"large\" color=\"blue\"/>\n            </Grid.Column>\n            <Grid.Column width={11}>\n                <span>{event.venue.address}</span>\n            </Grid.Column>\n            <Grid.Column width={4}>\n                <Button \n                onClick={() => setMapOpenToggle(!mapOpen)}   \n                color=\"facebook\" \n                size=\"tiny\" \n                content={mapOpen ? 'Hide Map' : 'Show Map'}/>\n            </Grid.Column>\n        </Grid>\n    </Segment>\n    {mapOpen && \n    <EventDetailedMap latLng={event.venue.latLng} />}\n</Segment.Group>\n    )\n}","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Segment, Item, Label } from \"semantic-ui-react\";\n\nexport default function EventDetailedSidebar({ attendees, hostUid }) {\n  return (\n    <>\n      <Segment\n        textAlign=\"center\"\n        style={{ border: \"none\" }}\n        attached=\"top\"\n        primary\n        inverted\n        \n      >\n        {attendees.length} {attendees.length > 1 ? \"People\" : \"Person\"} Going\n      </Segment>\n      <Segment attached>\n        <Item.Group relaxed divided>\n          {attendees.map((attendee) => (\n            <Item as={Link} to={`/profile/${attendee.id}`} key={attendee.id} style={{ position: \"relative\" }}>\n              {hostUid === attendee.id && (\n                <Label style={{position: 'absolute'}} color='orange' ribbon='right' content='Host' />\n              )}\n              <Item.Image\n                size=\"tiny\"\n                src={attendee.photoURL ||  `/assets/user.png`}\n              />\n              <Item.Content verticalAlign=\"middle\">\n                <Item.Header as=\"h3\">\n                  <span>{attendee.displayName}</span>\n                </Item.Header>\n              </Item.Content>\n            </Item>\n          ))}\n        </Item.Group>\n      </Segment>\n    </>\n  );\n}\n","import React from 'react';\nimport { Dimmer, Loader } from 'semantic-ui-react';\n\nexport default function LoadingComponent({inverted = true, content = 'Loading...'}) {\n return (\n     <Dimmer inverted={inverted} active={true}>\n         <Loader content={content} />\n     </Dimmer>\n )\n}","import React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Grid } from \"semantic-ui-react\";\nimport { listenToEventFromFirestore } from \"../../../app/firestore/firestoreService\";\nimport useFirestoreDoc from \"../../../app/hooks/useFirestoreDoc\";\nimport EventDetailedChat from \"./EventDetailedChat\";\nimport EventDetailedHeader from \"./EventDetailedHeader\";\nimport EventDetailedInfo from \"./EventDetailedInfo\";\nimport EventDetailedSidebar from \"./EventDetailedSidebar\";\n\nimport LoadingComponent from \"../../../app/layout/LoadingComponent\";\nimport { Redirect } from \"react-router\";\nimport { listenToSelectedEvent } from \"../eventActions\";\n\nexport default function EventDetailedPage({ match }) {\n  const dispatch = useDispatch();\n  const { currentUser } = useSelector((state) => state.auth);\n  const event = useSelector((state) => state.event.selectedEvent);\n  const { loading, error } = useSelector((state) => state.async);\n  const isHost = event?.hostUid === currentUser?.uid;\n  const isGoing = event?.attendees?.some((a) => a.id === currentUser?.uid);\n\n  useFirestoreDoc({\n    query: () => listenToEventFromFirestore(match.params.id),\n    data: (event) => dispatch(listenToSelectedEvent(event)),\n    deps: [match.params.id, dispatch],\n  });\n\n  if (loading || (!event && !error))\n    return <LoadingComponent content=\"Loading event...\" />;\n\n  if (error) return <Redirect to=\"/error\" />;\n\n  return (\n    <Grid>\n      <Grid.Column width={10}>\n        <EventDetailedHeader event={event} isGoing={isGoing} isHost={isHost} />\n        <EventDetailedInfo event={event} />\n        <EventDetailedChat eventId={event.id} />\n      </Grid.Column>\n      <Grid.Column width={6}>\n        <EventDetailedSidebar\n          attendees={event?.attendees}\n          hostUid={event.hostUid}\n        />\n      </Grid.Column>\n    </Grid>\n  );\n}\n","import React from 'react';\nimport { FormField, Label } from 'semantic-ui-react';\nimport { useField } from 'formik';\n\nexport default function MyTextInput({label, ...props}) {\n    const [field, meta] = useField(props);\n    return (\n        <FormField error={meta.touched && !!meta.error}>\n            <label>{label}</label>\n            <input {...field} {...props} />\n            {meta.touched && meta.error ? (\n                <Label basic color='red'>{meta.error}</Label>\n            ) : null}\n        </FormField>\n    )\n}","import React from 'react';\nimport { FormField, Label } from 'semantic-ui-react';\nimport { useField } from 'formik';\n\nexport default function MyTextArea({label, ...props}) {\n    const [field, meta] = useField(props);\n    return (\n        <FormField error={meta.touched && !!meta.error}>\n            <label>{label}</label>\n            <textarea {...field} {...props} />\n            {meta.touched && meta.error ? (\n                <Label basic color='red'>{meta.error}</Label>\n            ) : null}\n        </FormField>\n    )\n}","import React from 'react';\nimport { FormField, Label, Select } from 'semantic-ui-react';\nimport { useField } from 'formik';\n\nexport default function MySelectInput({label, ...props}) {\n    const [field, meta, helpers] = useField(props);\n    return (\n        <FormField error={meta.touched && !!meta.error}>\n            <label>{label}</label>\n            <Select\n                clearable\n                value={field.value || null}\n                onChange={(e, d) => helpers.setValue(d.value)}\n                onBlur={() => helpers.setTouched(true)}\n                {...props}\n            />\n            {meta.touched && meta.error ? (\n                <Label basic color='red'>{meta.error}</Label>\n            ) : null}\n        </FormField>\n    )\n}","\n\nexport const categoryData = [\n    {key: 'drinks', text: 'Drinks', value: 'drinks'},\n    {key: 'culture', text: 'Culture', value: 'culture'},\n    {key: 'film', text: 'Film', value: 'film'},\n    {key: 'food', text: 'Food', value: 'food'},\n    {key: 'music', text: 'Music', value: 'music'},\n    {key: 'travel', text: 'Travel', value: 'travel'},\n];","import React from 'react';\nimport { FormField, Label } from 'semantic-ui-react';\nimport { useField, useFormikContext } from 'formik';\nimport DatePicker from 'react-datepicker';\nimport 'react-datepicker/dist/react-datepicker.css'\n\nexport default function MyDateInput({label, ...props}) {\n    const {setFieldValue} = useFormikContext()\n    const [field, meta] = useField(props);\n    return (\n        <FormField error={meta.touched && !!meta.error}>\n            <label>{label}</label>\n            <DatePicker\n                {...field}\n                {...props}\n                selected={(field.value && new Date(field.value)) || null}\n                onChange={value => setFieldValue(field.name, value)}\n            />\n            {meta.touched && meta.error ? (\n                <Label basic color='red'>{meta.error}</Label>\n            ) : null}\n        </FormField>\n    )\n}","import React from \"react\";\nimport { FormField, Label, List, Segment } from \"semantic-ui-react\";\nimport { useField } from \"formik\";\nimport PlacesAutocomplete, {\n  geocodeByAddress,\n  getLatLng,\n} from \"react-places-autocomplete\";\n\nexport default function MyPlaceInput({ label, options, ...props }) {\n  const [field, meta, helpers] = useField(props);\n\n  function handleSelect(address) {\n    geocodeByAddress(address)\n      .then((results) => getLatLng(results[0]))\n      .then((latLng) => helpers.setValue({ address, latLng }))\n      .catch((error) => helpers.setError(error));\n  }\n\n  function handleBlur(e) {\n      field.onBlur(e);\n      if (!field.value.latLng) {\n          helpers.setValue({address: '', latLng: null})\n      }\n  }\n\n  return (\n    <PlacesAutocomplete\n      value={field.value[\"address\"]}\n      onChange={(value) => helpers.setValue({ address: value })}\n      onSelect={(value) => handleSelect(value)}\n      searchOptions={options}\n    >\n      {({ getInputProps, suggestions, getSuggestionItemProps, loading }) => (\n        <FormField error={meta.touched && !!meta.error}>\n          <input {...getInputProps({name: field.name, onBlur: (e) => handleBlur(e),...props})} />\n          {meta.touched && meta.error ? (\n            <Label basic color=\"red\">\n              {meta.error['address']}\n            </Label>\n          ) : null}\n          {suggestions?.length > 0 && (\n              <Segment loading={loading} style={{marginTop: 0, position: 'absolute', zIndex: 1000, width: '100%'}}>\n                  <List selection>\n                    {suggestions.map(suggestion => (\n                        <List.Item {...getSuggestionItemProps(suggestion)}>\n                            <List.Header>\n                                {suggestion.formattedSuggestion.mainText}\n                            </List.Header>\n                            <List.Description>\n                                {suggestion.formattedSuggestion.secondaryText}\n                            </List.Description>\n                        </List.Item>\n                    ))}\n                  </List>\n\n              </Segment>\n          )}\n        </FormField>\n      )}\n    </PlacesAutocomplete>\n  );\n}\n","/* global google */\n\nimport React, { useState } from \"react\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport { Header, Segment, Button, Confirm } from \"semantic-ui-react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { listenToSelectedEvent } from \"../eventActions\";\nimport { Formik, Form } from \"formik\";\nimport { toast } from \"react-toastify\";\nimport * as Yup from \"yup\";\nimport MyTextInput from \"../../../app/common/form/MyTextInput\";\nimport MyTextArea from \"../../../app/common/form/MyTextArea\";\nimport MySelectInput from \"../../../app/common/form/MySelectInput\";\nimport { categoryData } from \"../../../app/api/categoryOptions\";\nimport MyDateInput from \"../../../app/common/form/MyDateInput\";\nimport MyPlaceInput from \"../../../app/common/form/MyPlaceInput\";\nimport useFirestoreDoc from \"../../../app/hooks/useFirestoreDoc\";\nimport {\n  addEventToFirestore,\n  cancelEventToggle,\n  listenToEventFromFirestore,\n  updateEventInFirestore,\n} from \"../../../app/firestore/firestoreService\";\nimport LoadingComponent from \"../../../app/layout/LoadingComponent\";\n\nexport default function EventForm({ match, history }) {\n  const dispatch = useDispatch();\n  const [loadingCancel, setLoadingCancel] = useState(false);\n  const [confirmOpen, setConfirmOpen] = useState(false);\n  const { selectedEvent } = useSelector((state) => state.event);\n\n  const { loading, error } = useSelector((state) => state.async);\n\n  const initialValues = selectedEvent ?? {\n    title: \"\",\n    category: \"\",\n    description: \"\",\n    city: {\n      address: \"\",\n      latLng: null,\n    },\n    venue: {\n      address: \"\",\n      latLng: null,\n    },\n    date: \"\",\n  };\n\n  const validationSchema = Yup.object({\n    title: Yup.string().required(\"You must provide a title\"),\n    category: Yup.string().required(\"You must provide a category\"),\n    description: Yup.string().required(),\n    city: Yup.object().shape({\n      address: Yup.string().required(\"City is required\"),\n    }),\n    venue: Yup.object().shape({\n      address: Yup.string().required(\"Venue is required\"),\n    }),\n    date: Yup.string().required(),\n  });\n\n  async function handleCancelToggle(event) {\n    setConfirmOpen(false);\n    setLoadingCancel(true);\n    try {\n      await cancelEventToggle(event);\n      setLoadingCancel(false);\n    } catch (error) {\n      setLoadingCancel(true);\n      toast.error(error.message);\n    }\n  }\n\n  useFirestoreDoc({\n    shouldExecute: !!match.params.id,\n    query: () => listenToEventFromFirestore(match.params.id),\n    data: (event) => dispatch(listenToSelectedEvent(event)),\n    deps: [match.params.id, dispatch],\n  });\n\n  if (loading) return <LoadingComponent content=\"Loading event...\" />;\n\n  if (error) return <Redirect to=\"/error\" />;\n\n  return (\n    <Segment clearing>\n      <Formik\n        initialValues={initialValues}\n        validationSchema={validationSchema}\n        onSubmit={async (values, { setSubmitting }) => {\n          try {\n            selectedEvent\n              ? await updateEventInFirestore(values)\n              : await addEventToFirestore(values);\n            setSubmitting(false);\n            history.push(\"/events\");\n          } catch (error) {\n            toast.error(error.message);\n            setSubmitting(false);\n          }\n        }}\n      >\n        {({ isSubmitting, dirty, isValid, values }) => (\n          <Form className=\"ui form\">\n            <Header content=\"EVENT DETAILS\" />\n            <MyTextInput name=\"title\" placeholder=\"Event Title\" />\n            <MySelectInput\n              name=\"category\"\n              placeholder=\"Category\"\n              options={categoryData}\n            />\n            <MyTextArea name=\"description\" placeholder=\"Description\" rows={3} />\n            <Header content=\"EVENT LOCATION DETAILS\" />\n            <MyPlaceInput name=\"city\" placeholder=\"City\" />\n            <MyPlaceInput\n              name=\"venue\"\n              disabled={!values.city.latLng}\n              placeholder=\"Venue\"\n              options={{\n                location: new google.maps.LatLng(values.city.latLng),\n                radius: 1000,\n                types: [\"establishment\"],\n              }}\n            />\n            <MyDateInput\n              name=\"date\"\n              placeholderText=\"Event Date\"\n              timeFormat=\"HH:mm\"\n              showTimeSelect\n              timeCaption=\"time\"\n              dateFormat=\"MMMM d, yyyy h:mm a\"\n            />\n            {selectedEvent && (\n              <Button\n                loading={loadingCancel}\n                type=\"button\"\n                floated=\"left\"\n                color={selectedEvent.isCancelled ? \"green\" : \"red\"}\n                content={\n                  selectedEvent.isCancelled\n                    ? \"Reactivate Event\"\n                    : \"Cancel Event\"\n                }\n                onClick={() => setConfirmOpen(true)}\n              />\n            )}\n\n            <Button\n              loading={isSubmitting}\n              disabled={!isValid || !dirty || isSubmitting}\n              type=\"submit\"\n              floated=\"right\"\n              positive\n              content=\"Submit\"\n            />\n\n            <Button\n              disabled={isSubmitting}\n              as={Link}\n              to=\"/events\"\n              type=\"submit\"\n              floated=\"right\"\n              content=\"Cancel\"\n            />\n          </Form>\n        )}\n      </Formik>\n      <Confirm\n        content={\n          selectedEvent?.isCancelled\n            ? \"This will reactivate the event - are you sure?\"\n            : \"This will cancel the event - are you sure?\"\n        }\n        open={confirmOpen}\n        onCancel={() => setConfirmOpen(false)}\n        onConfirm={() => handleCancelToggle(selectedEvent)}\n      />\n    </Segment>\n  );\n}\n","import React from 'react';\nimport { Segment, Container, Header, Button, Icon } from 'semantic-ui-react';\n\nexport default function HomePage({history}) {\n    return(\n        <Segment inverted textAlign='center' vertical className='masthead' >\n            <Container>\n                <Header as='h1' inverted>\n                    \n                    EventSpace\n                </Header>\n                <Button onClick={() => history.push('/events')} size='huge' inverted >\n                    Get Started\n                    <Icon name='right arrow' inverted />\n                </Button>\n            </Container> \n        </Segment>\n    )\n}","import React from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { Menu, Image, Dropdown } from \"semantic-ui-react\";\n\nimport { toast } from 'react-toastify';\nimport { signOutFirebase } from \"../../app/firestore/firebaseService\";\n\nexport default function SignedInMenu() {\n\n  const {currentUserProfile} = useSelector(state => state.profile);\n  const history = useHistory();\n\n  async function handleSignOut() {\n    try {\n      history.push('/');\n      await signOutFirebase();\n      \n    } catch (error) {\n      toast.error(error.message);\n    }\n  }\n\n  return (\n    <Menu.Item position=\"right\">\n      <Image avatar spaced='right' src={currentUserProfile?.photoURL || process.env.PUBLIC_URL + '/assets/user.png'} />\n      <Dropdown pointing='top left' text={currentUserProfile?.displayName} >\n      <Dropdown.Menu>\n          <Dropdown.Item as={Link} to='/createEvent' text='Create Event' icon='plus' />\n          <Dropdown.Item as={Link} to={`/profile/${currentUserProfile?.id}`} text='My Profile' icon='user' />\n          <Dropdown.Item as={Link} to='/account' text='My Account' icon='settings' />\n          <Dropdown.Item \n          onClick={handleSignOut}\n          text='Sign Out' \n          icon='power' \n          />\n      </Dropdown.Menu>\n      </Dropdown>\n    </Menu.Item>\n  );\n}\n","import React from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { Button, Menu } from \"semantic-ui-react\";\nimport { openModal } from \"../../app/common/modals/modalReducer\";\n\nexport default function SignedOutMenu({setAuthenticated}) {\n  const dispatch = useDispatch();\n  return (\n    <Menu.Item position=\"right\">\n      <Button onClick={() => dispatch(openModal({modalType: 'LoginForm'}))} basic inverted content=\"Login\" />\n      <Button\n      onClick={() => dispatch(openModal({modalType: 'RegisterForm'}))}\n        basic\n        inverted\n        content=\"Register\"\n        style={{ marginLeft: \"0.5em\" }}\n      />\n    </Menu.Item>\n  );\n}\n","import React from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { NavLink } from \"react-router-dom\";\nimport { Button, Container, Menu } from \"semantic-ui-react\";\nimport SignedInMenu from \"./SignedInMenu\";\nimport SignedOutMenu from \"./SignedOutMenu\";\n\nexport default function NavBar({ setFormOpen }) {\n  \n  const {authenticated} = useSelector(state => state.auth);\n\n \n\n  return (\n    <Menu inverted fixed=\"top\">\n      <Container>\n        <Menu.Item as={NavLink} exact to=\"/\" header>\n          <img src={process.env.PUBLIC_URL + `/assets/logo.png`} alt=\"logo\" style={{ marginRight: 15 }} />\n          EventSpace\n        </Menu.Item>\n        <Menu.Item as={NavLink} to=\"/events\" name=\"Events\" />\n        <Menu.Item as={NavLink} to=\"/sandbox\" name=\"Sandbox\" />\n        {authenticated && (\n          <Menu.Item as={NavLink} to=\"/createEvent\">\n            <Button inverted  color='' content=\"Create Event\" />\n          </Menu.Item>\n        )}\n        {authenticated ? (\n          <SignedInMenu  />\n        ) : (\n          <SignedOutMenu />\n        )}\n      </Container>\n    </Menu>\n  );\n}\n","import React from \"react\";\nimport GoogleMapReact from \"google-map-react\";\n\nconst AnyReactComponent = ({ text }) => <div>{text}</div>;\n\nexport default function TestMap({location}) {\n  \n\n  return (\n    // Important! Always set the container height explicitly\n    <div style={{ height: \"100vh\", width: \"100%\" }}>\n      <GoogleMapReact\n        bootstrapURLKeys={{ key: \"AIzaSyDgO0x7YfN3CkJv_vBMfxnYADSdk2ZUTy0\" }}\n        center={location.center}\n        zoom={location.zoom}\n      >\n        <AnyReactComponent lat={location.center.lat} lng={location.center.lng} text=\"My Marker\" />\n      </GoogleMapReact>\n    </div>\n  );\n}\n","import React, { useState } from \"react\";\nimport PlacesAutocomplete, {\n  geocodeByAddress,\n  getLatLng,\n} from \"react-places-autocomplete\";\n\nexport default function TestPlaceInput({setLocation}) {\n  const [address, setAddress] = useState(\"\");\n\n  function handleChange(address) {\n    setAddress(address);\n  }\n\n  function handleSelect(address) {\n    geocodeByAddress(address)\n      .then((results) => getLatLng(results[0]))\n      .then((latLng) => {\n        console.log(\"Success\", latLng);\n        setLocation(latLng);\n      })\n      .catch((error) => console.error(\"Error\", error));\n    setAddress(address);\n  }\n\n  return (\n    <PlacesAutocomplete\n      value={address}\n      onChange={handleChange}\n      onSelect={handleSelect}\n    >\n      {({ getInputProps, suggestions, getSuggestionItemProps, loading }) => (\n        <div>\n          <input\n            {...getInputProps({\n              placeholder: \"Search Places ...\",\n              className: \"location-search-input\",\n            })}\n          />\n          <div className=\"autocomplete-dropdown-container\">\n            {loading && <div>Loading...</div>}\n            {suggestions.map((suggestion) => {\n              const className = suggestion.active\n                ? \"suggestion-item--active\"\n                : \"suggestion-item\";\n              // inline style for demonstration purpose\n              const style = suggestion.active\n                ? { backgroundColor: \"#fafafa\", cursor: \"pointer\" }\n                : { backgroundColor: \"#ffffff\", cursor: \"pointer\" };\n              return (\n                <div\n                  {...getSuggestionItemProps(suggestion, {\n                    className,\n                    style,\n                  })}\n                >\n                  <span>{suggestion.description}</span>\n                </div>\n              );\n            })}\n          </div>\n        </div>\n      )}\n    </PlacesAutocomplete>\n  );\n}\n","import {asyncActionError, asyncActionFinish, asyncActionStart} from '../../app/async/asyncReducer'\nimport { delay } from '../../app/common/util/util';\nimport {toast} from 'react-toastify'\n\nexport const INCREMENT_COUNTER = \"INCREMENT_COUNTER\";\nexport const DECREMENT_COUNTER = \"DECREMENT_COUNTER\";\n\n\n\nexport function increment(amount) {\n    return async function(dispatch) {\n      dispatch(asyncActionStart());\n      try {\n        await delay(1000);\n      dispatch({type: INCREMENT_COUNTER, payload: amount});\n      dispatch(asyncActionFinish());\n\n      } catch (error) {\n        dispatch(asyncActionError(error))\n      }\n      \n    }\n}\n\nexport function decrement(amount) {\n  return async function(dispatch) {\n    dispatch(asyncActionStart());\n    try {\n      await delay(1000);\n    dispatch({type: DECREMENT_COUNTER, payload: amount});\n    dispatch(asyncActionFinish());\n\n    } catch (error) {\n      dispatch(asyncActionError(error));\n      toast.error(error);\n    }\n    \n  }\n}\n\n\nconst initialState = {\n  data: 42,\n};\n\nexport default function testReducer(state = initialState, {type, payload}) {\n  switch (type) {\n    case INCREMENT_COUNTER:\n      return {\n        ...state,\n        data: state.data + payload,\n      };\n    case DECREMENT_COUNTER:\n      return {\n        ...state,\n        data: state.data - payload,\n      };\n    default:\n      return state;\n  }\n}\n","import React, { useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Button } from \"semantic-ui-react\";\nimport { openModal } from \"../../app/common/modals/modalReducer\";\nimport TestMap from \"./TestMap\";\nimport TestPlaceInput from \"./TestPlaceInput\";\nimport { decrement, increment } from \"./testReducer\";\n\nexport default function Sandbox() {\n  const dispatch = useDispatch();\n  const [target, setTarget] = useState(null);\n  const data = useSelector((state) => state.test.data);\n  const { loading } = useSelector((state) => state.async);\n  const defaultProps = {\n    center: {\n      lat: 10.99835602,\n      lng: 77.01502627,\n    },\n    zoom: 11,\n  };\n  const [location, setLocation] = useState(defaultProps);\n\n  function handleSetLocation(latLng) {\n    setLocation({ ...location, center: { lat: latLng.lat, lng: latLng.lng } });\n  }\n\n  return (\n    <>\n      <h1>Testing 123</h1>\n      <h2>The data is: {data} </h2>\n      <Button\n        name=\"increment\"\n        loading={loading && target === 'increment'}\n        onClick={(e) => {\n          dispatch(increment(20));\n          setTarget(e.target.name);\n        }}\n        content=\"increment\"\n        color=\"green\"\n      />\n      <Button\n        name=\"decrement\"\n        loading={loading && target === 'decrement'}\n        onClick={(e) => {\n          dispatch(decrement(10));\n          setTarget(e.target.name);\n        }}\n        content=\"decrement\"\n        color=\"red\"\n      />\n      <Button\n        onClick={() =>\n          dispatch(openModal({ modalType: \"TestModal\", modalProps: { data } }))\n        }\n        content=\"Open Modal\"\n        color=\"teal\"\n      />\n      <div style={{ marginTop: 15 }}>\n        <TestPlaceInput setLocation={handleSetLocation} />\n        <TestMap location={location} />\n      </div>\n    </>\n  );\n}\n","import React from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { Modal } from \"semantic-ui-react\";\nimport { closeModal } from \"./modalReducer\";\n\nexport default function ModalWrapper({ children, size, header }) {\n  const dispatch = useDispatch();\n  return (\n    <Modal open={true} onClose={() => dispatch(closeModal())} size={size}>\n      {header && <Modal.Header>{header}</Modal.Header>}\n      <Modal.Content>{children}</Modal.Content>\n    </Modal>\n  );\n}\n","import React from 'react';\nimport ModalWrapper from '../../app/common/modals/ModalWrapper';\n\nexport default function TestModal({data}) {\n    return (\n        <ModalWrapper size='mini' header='Test Modal'>\n            <div>The data is: {data}</div>\n\n        </ModalWrapper>\n    )\n}","import React from 'react';\nimport { useDispatch } from 'react-redux';\nimport { Button } from 'semantic-ui-react';\nimport { closeModal } from '../../app/common/modals/modalReducer';\nimport { socialLogin } from '../../app/firestore/firebaseService';\n\nexport default function SocialLogin() {\n    const dispatch = useDispatch();\n\n    function handleSocialLogin(provider) {\n        dispatch(closeModal());\n        socialLogin(provider);\n    }\n    return (\n        <>\n            <Button onClick={() => handleSocialLogin('facebook')} icon='facebook' fluid color='facebook' style={{marginBottom: 10}} content='Login with Facebook' />\n            <Button onClick={() => handleSocialLogin('google')} icon='google' fluid color='google plus' content='Login with Google' />\n        </>\n    )\n}","import React from 'react';\nimport ModalWrapper from '../../app/common/modals/ModalWrapper';\nimport { Formik, Form } from 'formik';\nimport * as Yup from 'yup';\nimport MyTextInput from '../../app/common/form/MyTextInput';\nimport { Button, Divider, Label } from 'semantic-ui-react';\nimport { useDispatch } from 'react-redux';\nimport { closeModal } from '../../app/common/modals/modalReducer';\nimport { signInWithEmail } from '../../app/firestore/firebaseService';\nimport SocialLogin from './SocialLogin';\n\nexport default function LoginForm() {\n    const dispatch = useDispatch();\n    return (\n        <ModalWrapper size='mini' header='Sign into EventSpace'>\n            <Formik\n                initialValues={{email: '', password: ''}}\n                validationSchema={Yup.object ({\n                    email: Yup.string().required().email(),\n                    password: Yup.string().required()\n                })}\n                onSubmit={async (values, {setSubmitting, setErrors}) => {\n                    try {\n                        await signInWithEmail(values);\n                        setSubmitting(false);\n                        dispatch(closeModal());\n\n                    } catch (error) {\n                        setErrors({auth: 'Invalid email or password'})\n                        setSubmitting(false);\n                        \n                    }\n                   \n                }}\n            >\n                    {({isSubmitting, isValid, dirty, errors}) => (\n                        <Form className='ui form'>\n                            <MyTextInput name=\"email\" placeholder=\"Email Address\" />\n                            <MyTextInput name=\"password\" placeholder=\"Password\" type='password' />\n                            {errors.auth && <Label basic color='red' style={{marginBottom: 10}} content={errors.auth} />}\n                            <Button\n                                loading={isSubmitting}\n                                disabled={!isValid || !dirty || isSubmitting}\n                                type='submit'\n                                fluid\n                                size='large'\n                                color='facebook'\n                                content='Login'\n                            />\n                            <Divider horizontal>Or</Divider>\n                            <SocialLogin />\n                        </Form>\n                    )}\n\n            </Formik>\n\n        </ModalWrapper>\n    )\n}","import React from 'react';\nimport ModalWrapper from '../../app/common/modals/ModalWrapper';\nimport { Formik, Form } from 'formik';\nimport * as Yup from 'yup';\nimport MyTextInput from '../../app/common/form/MyTextInput';\nimport { Button, Divider, Label } from 'semantic-ui-react';\nimport { useDispatch } from 'react-redux';\nimport { closeModal } from '../../app/common/modals/modalReducer';\nimport { registerInFirebase } from '../../app/firestore/firebaseService';\nimport SocialLogin from './SocialLogin';\n\nexport default function RegisterForm() {\n    const dispatch = useDispatch();\n    return (\n        <ModalWrapper size='mini' header='Register to EventSpace'>\n            <Formik\n                initialValues={{displayName: '', email: '', password: ''}}\n                validationSchema={Yup.object ({\n                    displayName: Yup.string().required(),\n                    email: Yup.string().required().email(),\n                    password: Yup.string().required()\n                })}\n                onSubmit={async (values, {setSubmitting, setErrors}) => {\n                    try {\n                        await registerInFirebase(values);\n                        setSubmitting(false);\n                        dispatch(closeModal());\n\n                    } catch (error) {\n                        setErrors({auth: error.message})\n                        setSubmitting(false);\n                        \n                    }\n                   \n                }}\n            >\n                    {({isSubmitting, isValid, dirty, errors}) => (\n                        <Form className='ui form'>\n                            <MyTextInput name=\"displayName\" placeholder=\"Display Name\" />\n                            <MyTextInput name=\"email\" placeholder=\"Email Address\" />\n                            <MyTextInput name=\"password\" placeholder=\"Password\" type='password' />\n                            {errors.auth && <Label basic color='red' style={{marginBottom: 10}} content={errors.auth} />}\n                            <Button\n                                loading={isSubmitting}\n                                disabled={!isValid || !dirty || isSubmitting}\n                                type='submit'\n                                fluid\n                                size='large'\n                                color='facebook'\n                                content='Register'\n                            />\n                            <Divider horizontal>Or</Divider>\n                            <SocialLogin />\n                        </Form>\n                    )}\n\n            </Formik>\n\n        </ModalWrapper>\n    )\n}","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport TestModal from '../../../features/sandbox/TestModal';\nimport LoginForm from '../../../features/auth/LoginForm';\nimport RegisterForm from '../../../features/auth/RegisterForm';\n\nexport default function ModalManager() {\n    const modalLookup = {\n        TestModal,\n        LoginForm,\n        RegisterForm\n    };\n    const currentModal = useSelector(state => state.modals);\n    let renderedModal;\n    if (currentModal) {\n        const {modalType, modalProps} = currentModal;\n        const ModalComponent = modalLookup[modalType];\n        renderedModal = <ModalComponent {...modalProps} />;\n    }\n\n    return <span>{renderedModal}</span>;\n}","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { Header, Segment, Button } from 'semantic-ui-react';\n\nexport default function ErrorComponent() {\n    const {error} = useSelector((state) => state.async);\n\n    return (\n        <Segment placeholder>\n            <Header textAlign= 'center' content={error?.message || 'Oops - we have an error.'} />\n            <Button as={Link} to='/events' primary style={{marginTop: 20}} content='Return to events page' />\n        </Segment>\n    )\n}","import React from \"react\";\nimport { Button, Header, Label, Segment } from \"semantic-ui-react\";\nimport { Formik, Form } from \"formik\";\nimport * as Yup from \"yup\";\nimport MyTextInput from \"../../app/common/form/MyTextInput\";\nimport { Link } from \"react-router-dom\";\nimport { useSelector } from \"react-redux\";\nimport { updateUserPassword } from \"../../app/firestore/firebaseService\";\n\nexport default function AccountPage() {\n  const { currentUser } = useSelector((state) => state.auth);\n\n  return (\n    <Segment>\n      <Header dividing size=\"large\" content=\"Account\" />\n      {currentUser.providerId === \"password\" && (\n        <>\n          <Header color=\"teal\" sub content=\"Change Password\" />\n          <p>Use this form to change your password</p>\n          <Formik\n            initialValues={{ newPassword1: \"\", newPassword2: \"\" }}\n            validationSchema={Yup.object({\n              newPassword1: Yup.string().required(\"Password is required\"),\n              newPassword2: Yup.string().oneOf(\n                [Yup.ref(\"newPassword1\"), null],\n                \"Passwords do not match\"\n              ),\n            })}\n            onSubmit={async (values, { setSubmitting, setErrors }) => {\n              try {\n                await updateUserPassword(values);\n              } catch (error) {\n                setErrors({ auth: error.message });\n              } finally {\n                setSubmitting(false);\n              }\n            }}\n          >\n            {({ errors, isSubmitting, isValid, dirty }) => (\n              <Form className=\"ui form\">\n                <MyTextInput\n                  name=\"newPassword1\"\n                  type=\"password\"\n                  placeholder=\"New Password\"\n                />\n                <MyTextInput\n                  name=\"newPassword2\"\n                  type=\"password\"\n                  placeholder=\"Confirm Password\"\n                />\n                {errors.auth && (\n                  <Label\n                    basic\n                    color=\"red\"\n                    style={{ marginBottom: 10 }}\n                    content={errors.auth}\n                  />\n                )}\n                <Button\n                  type=\"submit\"\n                  style= {{ display: 'block' }}\n                  disabled={!isValid || isSubmitting || !dirty}\n                  loading={isSubmitting}\n                  size=\"large\"\n                  positive\n                  content=\"Update Password\"\n                />\n              </Form>\n            )}\n          </Formik>\n        </>\n      )}\n      {currentUser.providerId === \"facebook.com\" && (\n        <>\n          <Header color=\"teal\" sub content=\"Facebook account\" />\n          <p>Please visit Facebook to update your account.</p>\n          <Button\n            icon=\"facebook\"\n            color=\"facebook\"\n            as={Link}\n            to=\"https://facebook.com\"\n            content=\"Go to Facebook\"\n          />\n        </>\n      )}\n      {currentUser.providerId === \"google.com\" && (\n        <>\n          <Header color=\"teal\" sub content=\"Google account\" />\n          <p>Please visit Google to update your account.</p>\n          <Button\n            icon=\"google\"\n            color=\"google plus\"\n            as={Link}\n            to=\"https://google.com\"\n            content=\"Go to Google\"\n          />\n        </>\n      )}\n    </Segment>\n  );\n}\n","import React from \"react\";\nimport { Formik, Form } from \"formik\";\nimport MyTextInput from \"../../../app/common/form/MyTextInput\";\nimport MyTextArea from \"../../../app/common/form/MyTextArea\";\nimport { Button } from \"semantic-ui-react\";\nimport * as Yup from \"yup\";\nimport { updateUserProfile } from \"../../../app/firestore/firestoreService\";\nimport {toast} from 'react-toastify';\n\nexport default function ProfileForm({ profile }) {\n  return (\n    <Formik\n      initialValues={{\n        displayName: profile.displayName,\n        description: profile.description || \"\",\n      }}\n      validationSchema={Yup.object({\n        displayName: Yup.string().required(),\n      })}\n      onSubmit={async (values, {setSubmitting}) => {\n          try {\n            await updateUserProfile(values);\n          } catch (error) {\n              toast.error(error.message);\n          } finally {\n              setSubmitting(false);\n          }\n      }}\n    >\n      {({ isSubmitting, isValid, dirty }) => (\n        <Form className=\"ui form\">\n          <MyTextInput name=\"displayName\" placeholder=\"Display Name\" />\n          <MyTextArea name=\"description\" placeholder=\"Description\" />\n          <Button\n            loading={isSubmitting}\n            disabled={isSubmitting || !isValid || !dirty}\n            floated=\"right\"\n            type=\"submit\"\n            size=\"large\"\n            positive\n            content=\"Update Profile\"\n          />\n        </Form>\n      )}\n    </Formik>\n  );\n}\n","import React, { useState } from \"react\";\nimport { Button, Grid, Header, Tab } from \"semantic-ui-react\";\nimport { format } from \"date-fns\";\nimport ProfileForm from \"./ProfileForm\";\n\nexport default function AboutTab({ profile, isCurrentUser }) {\n  const [editMode, setEditMode] = useState(false);\n  return (\n    <Tab.Pane>\n      <Grid>\n        <Grid.Column width={16}>\n          <Header\n            floated=\"left\"\n            icon=\"user\"\n            content={`About ${profile.displayName}`}\n          />\n          {isCurrentUser &&\n          <Button\n            onClick={() => setEditMode(!editMode)}\n            floated=\"right\"\n            basic\n            content={editMode ? \"Cancel\" : \"Edit\"}\n          />}\n        </Grid.Column>\n        <Grid.Column width={16}>\n          {editMode ? (\n            <ProfileForm profile={profile} />\n          ) : (\n            <>\n              <div style={{ marginBottom: 10 }}>\n                <strong>\n                  Member Since:{format(profile.createdAt, \"dd MMM yyyy\")}{\" \"}\n                </strong>\n                <div>{profile.description || null}</div>\n              </div>\n            </>\n          )}\n        </Grid.Column>\n      </Grid>\n    </Tab.Pane>\n  );\n}\n","import { useEffect } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { asyncActionError, asyncActionFinish, asyncActionStart} from '../async/asyncReducer';\nimport { dataFromSnapshot } from \"../firestore/firestoreService\";\n\nexport default function useFirestoreCollection({query, data, deps}) {\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        dispatch(asyncActionStart());\n        const unsubscribe = query().onSnapshot(\n            snapshot => {\n                const docs = snapshot.docs.map(doc => dataFromSnapshot(doc));\n                data(docs);\n                dispatch(asyncActionFinish());\n            },\n            error => dispatch(asyncActionError(error))\n        );\n        return () => {\n            unsubscribe()\n        }\n    }, deps) // eslint-disable-line react-hooks/exhaustive-deps\n}","import React, { useState } from \"react\";\nimport { Card, Grid, Header, Image, Tab } from \"semantic-ui-react\";\nimport { format } from \"date-fns\";\nimport { Link } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport useFirestoreCollection from \"../../../app/hooks/useFirestoreCollection\";\nimport { getUserEventsQuery } from \"../../../app/firestore/firestoreService\";\nimport { listenToUserEvents } from \"../profileActions\";\n\nexport default function EventsTab({ profile }) {\n  const dispatch = useDispatch();\n  const [activeTab, setActiveTab] = useState(0);\n  const { profileEvents } = useSelector((state) => state.profile);\n  const { loading } = useSelector((state) => state.async);\n\n  useFirestoreCollection({\n    query: () => getUserEventsQuery(activeTab, profile.id),\n    data: (events) => dispatch(listenToUserEvents(events)),\n    deps: [dispatch, activeTab, profile.id],\n  });\n\n  const panes = [\n    { menuItem: \"Future Events\", pane: { key: \"future\" } },\n    { menuItem: \"Past Events\", pane: { key: \"past\" } },\n    { menuItem: \"Hosting Events\", pane: { key: \"hosting\" } },\n  ];\n  return (\n    <Tab.Pane loading={loading}>\n      <Grid>\n        <Grid.Column width={16}>\n          <Header floated=\"left\" icon=\"calendar\" content=\"Events\" />\n        </Grid.Column>\n        <Grid.Column width={16}>\n          <Tab\n            onTabChange={(e, data) => setActiveTab(data.activeIndex)}\n            panes={panes}\n            menu={{ secondary: true, pointing: true }}\n            \n          />\n          <Card.Group itemsPerRow={5} style={{ marginTop: 10 }}>\n            {profileEvents.map((event) => (\n              <Card as={Link} to={`/events/${event.id}`} key={event.id}>\n                <Image\n                  src={`/assets/categoryImages/${event.category}.jpg`}\n                  style={{ minHeight: 100, objectFit: \"cover\" }}\n                />\n                <Card.Content>\n                  <Card.Header content={event.title} textAlign=\"center\" />\n                  <Card.Meta textAlign=\"center\">\n                    <div>{format(event.date, 'dd MMM yyyy')}</div>\n                    <div>{format(event.date, 'hh:mm a')}</div>\n                  </Card.Meta>\n                </Card.Content>\n              </Card>\n            ))}\n          </Card.Group>\n        </Grid.Column>\n      </Grid>\n    </Tab.Pane>\n  );\n}\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { Card, Image } from 'semantic-ui-react';\n\nexport default function ProfileCard({profile}) {\n    return (\n        <Card as ={Link} to={`/profile/${profile.id}`}>\n            <Image src={profile.photoURL || process.env.PUBLIC_URL + '/assets/user.png'} />\n            <Card.Content>\n                <Card.Header content={profile.displayName} />\n            </Card.Content>\n        </Card>\n    )\n}","import React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Card, Grid, Header, Tab } from \"semantic-ui-react\";\nimport {\n  getFollowersCollection,\n  getFollowingCollection,\n} from \"../../../app/firestore/firestoreService\";\nimport useFirestoreCollection from \"../../../app/hooks/useFirestoreCollection\";\nimport ProfileCard from \"../../profiles/profilePage/ProfileCard\";\nimport { listenToFollowers, listenToFollowings } from \"../profileActions\";\n\nexport default function FollowingTab({ profile, activeTab }) {\n  const dispatch = useDispatch();\n  const { followings, followers } = useSelector((state) => state.profile);\n\n  useFirestoreCollection({\n    query:\n      activeTab === 3\n        ? () => getFollowersCollection(profile.id)\n        : () => getFollowingCollection(profile.id),\n    data: (data) =>\n      activeTab === 3\n        ? dispatch(listenToFollowers(data))\n        : dispatch(listenToFollowings(data)),\n    deps: [activeTab, dispatch],\n  });\n\n  return (\n    <Tab.Pane>\n      <Grid>\n        <Grid.Column width={16}>\n          <Header floated=\"left\" icon=\"user\" content={activeTab === 3 ? 'Followers' : 'Following'} />\n        </Grid.Column>\n        <Grid.Column width={16}>\n          <Card.Group itemsPerRow={5}>\n            {activeTab === 3 && followers.map(profile => (\n              <ProfileCard profile={profile} key={profile.id} />\n            ))}\n            {activeTab === 4 && followings.map(profile => (\n              <ProfileCard profile={profile} key={profile.id} />\n            ))}\n          </Card.Group>\n        </Grid.Column>\n      </Grid>\n    </Tab.Pane>\n  );\n}\n","import React, { useRef } from \"react\";\nimport Cropper from \"react-cropper\";\nimport \"cropperjs/dist/cropper.css\";\n\nexport default function PhotoWidgetCropper({ setImage, imagePreview }) {\n  const cropper = useRef(null);\n  function cropImage() {\n    if (typeof cropper.current.getCroppedCanvas() === \"undefined\") {\n      return;\n    }\n    cropper.current.getCroppedCanvas().toBlob((blob) => {\n      setImage(blob);\n    }, \"image/jpeg\");\n  }\n\n  return (\n    <Cropper\n      ref={cropper}\n      src={imagePreview}\n      style={{ height: 200, width: \"100%\" }}\n      aspectRatio={1}\n      preview=\".img-preview\"\n      guides={false}\n      viewMode={1}\n      dragMode=\"move\"\n      scalable={true}\n      cropBoxMovable={true}\n      cropBoxResizable={true}\n      crop={cropImage}\n    />\n  );\n}\n","import React, {useCallback} from 'react'\nimport {useDropzone} from 'react-dropzone'\nimport { Header, Icon } from 'semantic-ui-react'\n\nexport default function PhotoWidgetDropzone({setFiles}) {\n    const dropzoneStyles = {\n        border: 'dashed 3px #eee',\n        borderRadius: '5%',\n        paddingTop: '30px',\n        textAlign: 'center'\n    }\n\n    const dropzoneActive = {\n        border: 'dashed 3px green'\n    }\n\n  const onDrop = useCallback(acceptedFiles => {\n    setFiles(acceptedFiles.map(file => Object.assign(file, {\n        preview: URL.createObjectURL(file)\n    })))\n  }, [setFiles])\n  const {getRootProps, getInputProps, isDragActive} = useDropzone({onDrop})\n\n  return (\n    <div {...getRootProps()} style={isDragActive ? {...dropzoneStyles, ...dropzoneActive} : dropzoneStyles }>\n      <input {...getInputProps()} />\n      <Icon name='upload' size='huge' />\n      <Header content='Drop image here.' />\n    </div>\n  )\n}","import React, { useState } from \"react\";\nimport { Button, Grid, Header } from \"semantic-ui-react\";\nimport PhotoWidgetCropper from \"./PhotoWidgetCropper\";\nimport PhotoWidgetDropzone from \"./PhotoWidgetDropzone\";\nimport cuid from 'cuid';\nimport { getFileExtension } from \"../util/util\";\nimport { uploadToFirebaseStorage } from \"../../firestore/firebaseService\";\nimport { updateUserProfilePhoto } from \"../../firestore/firestoreService\";\nimport { toast } from 'react-toastify';\n\nexport default function PhotoUploadWidget({setEditMode}) {\n  const [files, setFiles] = useState([]);\n  const [image, setImage] = useState(null);\n  const [loading, setLoading] = useState(false);\n\n  function handleUploadImage() {\n    setLoading(true);\n    const filename = cuid() + '.' + getFileExtension(files[0].name);\n    const uploadTask = uploadToFirebaseStorage(image, filename);\n    uploadTask.on('state_changed', snapshot => {\n      const progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n      console.log('upload is ' + progress + '% done');\n    }, error => {\n      toast.error(error.message);\n    }, () => {\n      uploadTask.snapshot.ref.getDownloadURL().then(downloadURL => {\n        updateUserProfilePhoto(downloadURL, filename).then(() => {\n          setLoading(false);\n          handleCancelCrop();\n          setEditMode(false);\n        }).catch(error => {\n          toast.error(error.message);\n          setLoading(false);\n        }); \n      })\n    })\n  }\n\n\n  function handleCancelCrop() {\n    setFiles([]);\n    setImage(null);\n  }\n\n  return (\n    <Grid>\n      <Grid.Column width={4}>\n        <Header color=\"blue\" sub content=\"Step 1 - Add Photo\" />\n        <PhotoWidgetDropzone setFiles={setFiles} />\n      </Grid.Column>\n      <Grid.Column width={1} />\n      <Grid.Column width={4}>\n        <Header color=\"blue\" sub content=\"Step 2 - Resize\" />\n        {files.length > 0 && (\n          <PhotoWidgetCropper\n            setImage={setImage}\n            imagePreview={files[0].preview}\n          />\n        )}\n      </Grid.Column>\n      <Grid.Column width={1} />\n      <Grid.Column width={4}>\n        <Header color=\"blue\" sub content=\"Step 3 - Preview & Upload\" />\n        {files.length > 0 && (\n          <>\n            <div\n              className=\"img-preview\"\n              style={{ minHeight: 200, minWidth: 200, overflow: \"hidden\" }}\n            />\n            <Button.Group>\n              <Button loading={loading} onClick={handleUploadImage} style={{ width: 100 }} positive icon=\"check\" />\n              <Button disabled={loading} onClick={handleCancelCrop} style={{ width: 100 }} icon=\"close\" />\n            </Button.Group>\n          </>\n        )}\n      </Grid.Column>\n    </Grid>\n  );\n}\n","import React, { useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Button, Card, Grid, Header, Tab, Image } from \"semantic-ui-react\";\nimport PhotoUploadWidget from \"../../../app/common/photos/PhotoUploadWidget\";\nimport {\n  deletePhotoFromCollection,\n  getUserPhotos,\n  setMainPhoto,\n} from \"../../../app/firestore/firestoreService\";\nimport useFirestoreCollection from \"../../../app/hooks/useFirestoreCollection\";\nimport { listenToUserPhotos } from \"../profileActions\";\nimport { toast } from \"react-toastify\";\nimport { deleteFromFirebaseStorage } from \"../../../app/firestore/firebaseService\";\n\nexport default function PhotosTab({ profile, isCurrentUser }) {\n  const dispatch = useDispatch();\n  const [editMode, setEditMode] = useState(false);\n  const { loading } = useSelector((state) => state.async);\n  const { photos } = useSelector((state) => state.profile);\n  const [ updating, setUpdating ] = useState({isUpdating: false, target: null});\n  const [ deleting, setDeleting ] = useState({isDeleting: false, target: null});\n\n\n  useFirestoreCollection({\n    query: () => getUserPhotos(profile.id),\n    data: (photos) => dispatch(listenToUserPhotos(photos)),\n    deps: [profile.id, dispatch],\n  });\n\n  async function handleSetMainPhoto(photo, target) {\n    setUpdating({isUpdating: true, target});\n    try {\n      await setMainPhoto(photo);\n    } catch (error) {\n      toast.error(error.message);\n    } finally {\n      setUpdating({isUpdating: false, target: null});\n    }\n  }\n\n  async function handleDeletePhoto(photo, target) {\n    setDeleting({isDeleting: true, target});\n    try {\n      await deleteFromFirebaseStorage(photo.name);\n      await deletePhotoFromCollection(photo.id)\n    } catch (error) {\n      toast.error(error.message);\n    } finally {\n      setDeleting({isDeleting: false, target: null});\n    }\n  }\n\n  return (\n    <Tab.Pane loading={loading}>\n      <Grid>\n        <Grid.Column width={16}>\n          <Header floated=\"left\" icon=\"user\" content={`Photos`} />\n          {isCurrentUser && (\n            <Button\n              onClick={() => setEditMode(!editMode)}\n              floated=\"right\"\n              basic\n              content={editMode ? \"Cancel\" : \"Add Photo\"}\n            />\n          )}\n        </Grid.Column>\n        <Grid.Column width={16}>\n          {editMode ? (\n            <PhotoUploadWidget setEditMode={setEditMode} />\n          ) : (\n            <Card.Group itemsPerRow={5}>\n              {photos.map((photo) => (\n                <Card key={photo.id}>\n                  <Image src={photo.url} />\n                  <Button.Group fluid widths={2}>\n                    <Button\n                      name={photo.id}\n                      loading={updating.isUpdating && updating.target === photo.id}\n                      onClick={(e) => handleSetMainPhoto(photo, e.target.name)}\n                      disabled={photo.url === profile.photoURL}\n                      basic\n                      color=\"green\"\n                      content=\"Main\"\n                    />\n                    <Button \n                    name={photo.id}\n                    loading={deleting.isDeleting && deleting.target === photo.id}\n                    disabled={photo.url === profile.photoURL}\n                    onClick={(e) => handleDeletePhoto(photo, e.target.name)}\n                    basic \n                    color=\"red\" \n                    icon=\"trash\" />\n                  </Button.Group>\n                </Card>\n              ))}\n            </Card.Group>\n          )}\n        </Grid.Column>\n      </Grid>\n    </Tab.Pane>\n  );\n}\n","import React, { useState } from 'react';\nimport { Tab } from 'semantic-ui-react';\nimport AboutTab from './AboutTab';\nimport EventsTab from './EventsTab';\nimport FollowingTab from './FollowingTab';\nimport PhotosTab from './PhotosTab';\n\nexport default function ProfileContent({profile, isCurrentUser}) {\n\n    const [activeTab, setActiveTab] = useState(0)\n\n    const panes = [\n        {menuItem: 'About', render: () => <AboutTab profile={profile} isCurrentUser={isCurrentUser} />},\n        {menuItem: 'Photos', render: () => <PhotosTab profile={profile} isCurrentUser={isCurrentUser} />},\n        {menuItem: 'Events', render: () => <EventsTab profile={profile} />},\n        {menuItem: 'Followers', render: () => <FollowingTab key={profile.id} profile={profile} activeTab={activeTab} />},\n        {menuItem: 'Following', render: () => <FollowingTab key={profile.id} profile={profile} activeTab={activeTab} />},\n    ]\n    return (\n        <Tab \n        menu={{fluid: true, vertical: true}}\n        menuPosition='right'\n        panes={panes}\n        onTabChange={(e, data) => setActiveTab(data.activeIndex)}\n       \n        />\n    )\n}","import React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { toast } from \"react-toastify\";\nimport {\n  Button,\n  Divider,\n  Grid,\n  Header,\n  Item,\n  Reveal,\n  Segment,\n  Statistic,\n} from \"semantic-ui-react\";\nimport { followUser, getFollowingDoc, unfollowUser } from \"../../../app/firestore/firestoreService\";\nimport { setFollowUser, setUnfollowUser } from \"../profileActions\";\nimport { CLEAR_FOLLOWINGS } from \"../profileConstants\";\n\nexport default function ProfileHeader({ profile, isCurrentUser }) {\n  const dispatch = useDispatch();\n  const [loading, setLoading] = useState(false);\n  const {followingUser} = useSelector(state => state.profile);\n\n  useEffect(() => {\n    if (isCurrentUser) return;\n    setLoading(true);\n    async function fetchFollowingDoc() {\n      try {\n        const followingDoc = await getFollowingDoc(profile.id);\n        if (followingDoc && followingDoc.exists) {\n          dispatch(setFollowUser())\n        }\n      } catch (error) {\n        toast.error(error.message);\n      }\n    }\n    fetchFollowingDoc().then(() => setLoading(false));\n    return () => {\n      dispatch({type: CLEAR_FOLLOWINGS})\n    }\n  }, [dispatch, profile.id, isCurrentUser])\n\n  async function handleFollowUser() {\n    setLoading(true);\n    try {\n      await followUser(profile);\n      dispatch(setFollowUser());\n    } catch (error) {\n      toast.error(error.message);\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  \n  async function handleUnfollowUser() {\n    setLoading(true);\n    try {\n      await unfollowUser(profile);\n      dispatch(setUnfollowUser());\n    } catch (error) {\n      toast.error(error.message);\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  return (\n    <Segment>\n      <Grid>\n        <Grid.Column width={12}>\n          <Item.Group>\n            <Item>\n              <Item.Image\n                avatar\n                size=\"small\"\n                src={profile.photoURL || process.env.PUBLIC_URL + '/assets/user.png'}\n              />\n              <Item.Content verticalAlign=\"middle\">\n                <Header\n                  as=\"h1\"\n                  style={{ display: \"block\", marginBottom: 10 }}\n                  content={profile.displayName}\n                />\n              </Item.Content>\n            </Item>\n          </Item.Group>\n        </Grid.Column>\n        <Grid.Column width={4}>\n          <Statistic.Group>\n            <Statistic label=\"Followers\" value={profile.followerCount || 0} />\n            <Statistic label=\"Following\" value={profile.followingCount || 0} />\n          </Statistic.Group>\n          {!isCurrentUser && (\n            <>\n              <Divider />\n              <Reveal animated=\"move\">\n                <Reveal.Content visible style={{ width: \"100%\" }}>\n                  <Button fluid color=\"facebook\" content={followingUser ? 'Following' : 'Not Following'}/>\n                </Reveal.Content>\n                <Reveal.Content hidden style={{ width: \"100%\" }}>\n                  <Button\n                    onClick={followingUser ? () => handleUnfollowUser() : () => handleFollowUser()}\n                    loading={loading}\n                    basic\n                    fluid\n                    color={followingUser ? 'gray' : 'facebook'}\n                    content={followingUser ? 'Unfollow' : 'Follow'}\n                  />\n                </Reveal.Content>\n              </Reveal>\n            \n            </>\n          )}\n        </Grid.Column>\n      </Grid>\n    </Segment>\n  );\n}\n","import React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Grid } from \"semantic-ui-react\";\nimport ProfileContent from \"./ProfileContent\";\nimport ProfileHeader from \"./ProfileHeader\";\nimport useFirestoreDoc from \"../../../app/hooks/useFirestoreDoc\";\nimport { getUserProfile } from \"../../../app/firestore/firestoreService\";\nimport { listenToSelectedUserProfile } from \"../profileActions\";\nimport LoadingComponent from \"../../../app/layout/LoadingComponent\";\n\nexport default function ProfilePage({ match }) {\n  const dispatch = useDispatch();\n  const { selectedUserProfile, currentUserProfile } = useSelector(\n    (state) => state.profile\n  );\n  const { currentUser } = useSelector((state) => state.auth);\n  const { loading, error } = useSelector((state) => state.async);\n  let profile;\n\n  useFirestoreDoc({\n    query: () => getUserProfile(match.params.id),\n    data: (profile) => dispatch(listenToSelectedUserProfile(profile)),\n    deps: [dispatch, match.params.id],\n    shouldExecute: match.params.id !== currentUser.uid,\n  });\n\n  if (match.params.id === currentUser.uid) {\n    profile = currentUserProfile;\n  } else {\n    profile = selectedUserProfile;\n  }\n\n  if ((loading && !profile) || (!profile && !error))\n    return <LoadingComponent content=\"Loading profile....\" />;\n\n  return (\n    <Grid>\n      <Grid.Column width={16}>\n        <ProfileHeader\n          profile={profile}\n          isCurrentUser={currentUser.uid === profile.id}\n        />\n        <ProfileContent\n          profile={profile}\n          isCurrentUser={currentUser.uid === profile.id}\n        />\n      </Grid.Column>\n    </Grid>\n  );\n}\n","import React from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { Route } from \"react-router\";\nimport UnauthModal from \"../../features/auth/UnauthModal\";\n\nexport default function PrivateRoute({\n  component: Component,\n  prevLocation,\n  ...rest\n}) {\n  const { authenticated } = useSelector((state) => state.auth);\n  return (\n    <Route\n      {...rest}\n      render={(props) =>\n        authenticated ? <Component {...props} /> : <UnauthModal {...props} />\n      }\n    />\n  );\n}\n","import React from \"react\";\nimport { Route, useLocation } from \"react-router\";\nimport { Container } from \"semantic-ui-react\";\nimport EventDashboard from \"../../features/events/eventDashboard/EventDashboard\";\nimport EventDetailedPage from \"../../features/events/eventDetailed/EventDetailedPage\";\nimport EventForm from \"../../features/events/eventForm/EventForm\";\nimport HomePage from \"../../features/home/HomePage\";\nimport NavBar from \"../../features/nav/NavBar\";\nimport Sandbox from \"../../features/sandbox/Sandbox\";\nimport ModalManager from \"../common/modals/ModalManager\";\nimport { ToastContainer } from \"react-toastify\";\nimport ErrorComponent from \"../common/errors/ErrorComponent\";\nimport AccountPage from \"../../features/auth/AccountPage\";\nimport { useSelector } from \"react-redux\";\nimport LoadingComponent from \"./LoadingComponent\";\nimport ProfilePage from \"../../features/profiles/profilePage/ProfilePage\";\nimport PrivateRoute from \"./PrivateRoute\";\n\nexport default function App() {\n  const { key } = useLocation();\n  const { initialized } = useSelector((state) => state.async);\n\n  if (!initialized) return <LoadingComponent content=\"Loading App...\" />;\n\n  return (\n    <>\n      <ModalManager />\n      <ToastContainer position=\"bottom-right\" hideProgressBar />\n      <Route exact path=\"/\" component={HomePage} />\n      <Route\n        path={\"/(.+)\"}\n        render={() => (\n          <>\n            <NavBar />\n            <Container className=\"main\">\n              <Route exact path=\"/events\" component={EventDashboard} />\n              <Route exact path=\"/sandbox\" component={Sandbox} />\n              <Route path=\"/events/:id\" component={EventDetailedPage} />\n              <PrivateRoute\n                path={[\"/createEvent\", \"/manage/:id\"]}\n                component={EventForm}\n                key={key}\n              />\n              <PrivateRoute path=\"/account\" component={AccountPage} />\n              <PrivateRoute path=\"/profile/:id\" component={ProfilePage} />\n              <Route path=\"/error\" component={ErrorComponent} />\n            </Container>\n          </>\n        )}\n      />\n    </>\n  );\n}\n","export const SIGN_IN_USER = 'SIGN_IN_USER';\nexport const SIGN_OUT_USER = 'SIGN_OUT_USER';\n\n\n","import { SIGN_IN_USER, SIGN_OUT_USER } from \"./authConstants\";\nimport {LOCATION_CHANGE} from 'connected-react-router';\n\nconst initialState = {\n  authenticated: false,\n  currentUser: null,\n  prevLocation: null,\n  currentLocation: null\n};\n\nexport default function authReducer(state = initialState, { type, payload }) {\n  switch (type) {\n    case SIGN_IN_USER:\n      return {\n        ...state,\n        authenticated: true,\n        currentUser: {\n          email: payload.email,\n          photoURL: payload.photoURL,\n          uid: payload.uid,\n          displayName: payload.displayName,\n          providerId: payload.providerData[0].providerId\n        },\n      };\n    case SIGN_OUT_USER:\n      return {\n        ...state,\n        authenticated: false,\n        currentUser: null,\n      };\n      case LOCATION_CHANGE:\n        return {\n          ...state,\n          prevLocation: state.currentLocation,\n          currentLocation: payload.location\n        }\n    default:\n      return state;\n  }\n}\n","import {\n  CLEAR_COMMENTS,\n  CLEAR_EVENTS,\n  CREATE_EVENT,\n  DELETE_EVENT,\n  FETCH_EVENTS,\n  LISTEN_TO_EVENT_CHAT,\n  LISTEN_TO_SELECTED_EVENT,\n  RETAIN_STATE,\n  SET_FILTER,\n  SET_START_DATE,\n  UPDATE_EVENT,\n} from \"./eventConstants\";\n\nconst initialState = {\n  events: [],\n  comments: [],\n  moreEvents: true,\n  selectedEvent: null,\n  lastVisible: null,\n  filter: 'all',\n  startDate: new Date(),\n  retainState: false\n};\n\nexport default function eventReducer(state = initialState, { type, payload }) {\n  switch (type) {\n    case CREATE_EVENT:\n      return {\n        ...state,\n        events: [...state.events, payload],\n      };\n    case UPDATE_EVENT:\n      return {\n        ...state,\n        events: [\n          ...state.events.filter((evt) => evt.id !== payload.id),\n          payload,\n        ],\n      };\n    case DELETE_EVENT:\n      return {\n        ...state,\n        events: [...state.events.filter((evt) => evt.id !== payload)],\n      };\n    case FETCH_EVENTS:\n      return {\n        ...state,\n        events: [...state.events, ...payload.events],\n        moreEvents: payload.moreEvents,\n        lastVisible: payload.lastVisible\n      };\n\n    case LISTEN_TO_EVENT_CHAT:\n      return {\n        ...state,\n        comments: payload,\n      };\n      case CLEAR_COMMENTS:\n        return {\n          ...state,\n          comments: [],\n        };\n        case LISTEN_TO_SELECTED_EVENT:\n          return {\n            ...state,\n            selectedEvent: payload,\n          };\n          case CLEAR_EVENTS:\n            return {\n              ...state,\n              events: [],\n              moreEvents: true,\n              lastVisible: null,\n            };\n            case SET_FILTER:\n              return {\n                ...state,\n                retainState: false,\n                moreEvents: true,\n                filter: payload,\n              };\n              case SET_START_DATE:\n                return {\n                  ...state,\n                  retainState: false,\n                  moreEvents: true,\n                  startDate: payload,\n                };\n                case RETAIN_STATE:\n                  return {\n                    ...state,\n                    retainState: true,\n                  }\n\n    default:\n      return state;\n  }\n}\n","import {\n  CLEAR_FOLLOWINGS,\n  LISTEN_TO_CURRENT_USER_PROFILE,\n  LISTEN_TO_FEED,\n  LISTEN_TO_FOLLOWERS,\n  LISTEN_TO_FOLLOWINGS,\n  LISTEN_TO_SELECTED_USER_PROFILE,\n  LISTEN_TO_USER_EVENTS,\n  LISTEN_TO_USER_PHOTOS,\n  SET_FOLLOW_USER,\n  SET_UNFOLLOW_USER,\n} from \"./profileConstants\";\n\nconst initialState = {\n  currentUserProfile: null,\n  selectedUserProfile: null,\n  photos: [],\n  profileEvents: [],\n  followers: [],\n  followings: [],\n  followingUser: false,\n  feed: [],\n};\n\nexport default function profileReducer(\n  state = initialState,\n  { type, payload }\n) {\n  switch (type) {\n    case LISTEN_TO_CURRENT_USER_PROFILE:\n      return {\n        ...state,\n        currentUserProfile: payload,\n      };\n    case LISTEN_TO_SELECTED_USER_PROFILE:\n      return {\n        ...state,\n        selectedUserProfile: payload,\n      };\n    case LISTEN_TO_USER_PHOTOS:\n      return {\n        ...state,\n        photos: payload,\n      };\n    case LISTEN_TO_USER_EVENTS:\n      return {\n        ...state,\n        profileEvents: payload,\n      };\n    case LISTEN_TO_FOLLOWERS:\n      return {\n        ...state,\n        followers: payload,\n      };\n    case LISTEN_TO_FOLLOWINGS:\n      return {\n        ...state,\n        followings: payload,\n      };\n    case SET_FOLLOW_USER:\n      return {\n        ...state,\n        followingUser: true,\n      };\n    case SET_UNFOLLOW_USER:\n      return {\n        ...state,\n        followingUser: false,\n      };\n    case CLEAR_FOLLOWINGS:\n      return {\n        ...state,\n        followers: [],\n        followings: [],\n      };\n    case LISTEN_TO_FEED:\n      return {\n        ...state,\n        feed: payload,\n      };\n\n    default: {\n      return state;\n    }\n  }\n}\n","import {combineReducers} from 'redux';\nimport authReducer from '../../features/auth/authReducer';\nimport eventReducer from '../../features/events/eventReducer';\nimport profileReducer from '../../features/profiles/profileReducer';\nimport testReducer from '../../features/sandbox/testReducer';\nimport asyncReducer from '../async/asyncReducer';\nimport modalReducer from '../common/modals/modalReducer';\nimport {connectRouter} from 'connected-react-router';\n\nconst rootReducer = (history) => combineReducers({\n    router: connectRouter(history),\n    test: testReducer,\n    event: eventReducer,\n    modals: modalReducer,\n    auth: authReducer,\n    async: asyncReducer,\n    profile: profileReducer\n\n})\n\nexport default rootReducer","import { SIGN_IN_USER, SIGN_OUT_USER } from \"./authConstants\";\nimport { APP_LOADED } from '../../app/async/asyncReducer';\nimport firebase from '../../app/config/firebase';\nimport { dataFromSnapshot, getUserProfile } from \"../../app/firestore/firestoreService\";\nimport { listenToCurrentUserProfile } from \"../profiles/profileActions\";\n\nexport function signInUser(user) {\n    return {\n        type: SIGN_IN_USER,\n        payload: user\n    \n    }\n}\n\n\nexport function verifyAuth() {\n    return function (dispatch) {\n        return firebase.auth().onAuthStateChanged(user => {\n            if (user) {\n                dispatch(signInUser(user))\n                const profileRef = getUserProfile(user.uid)\n                profileRef.onSnapshot(snapshot => {\n                    dispatch(listenToCurrentUserProfile(dataFromSnapshot(snapshot)));\n                    dispatch({type: APP_LOADED})\n                })\n            } else {\n                dispatch(signOutUser())\n                dispatch({type: APP_LOADED})\n            }\n        })\n    }\n}\n\nexport function signOutUser() {\n    return {\n        type: SIGN_OUT_USER\n    }\n}","import {applyMiddleware, createStore} from 'redux';\nimport {composeWithDevTools} from 'redux-devtools-extension';\nimport rootReducer from './rootReducer';\nimport thunk from 'redux-thunk';\nimport { verifyAuth } from '../../features/auth/authActions';\nimport {createBrowserHistory} from 'history';\n\nexport const history = createBrowserHistory();\n\nexport function configureStore () {\n\n    const store = createStore(rootReducer(history), composeWithDevTools(applyMiddleware(thunk)))\n\n    store.dispatch(verifyAuth());\n\n    return store;\n}\n","import { useEffect } from \"react\";\nimport { useLocation } from \"react-router-dom\";\n\nexport default function ScrollToTop() {\n  const { pathname } = useLocation();\n\n  useEffect(() => {\n    window.scrollTo(0, 0);\n  }, [pathname]);\n\n  return null;\n}","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"semantic-ui-css/semantic.min.css\";\nimport 'react-toastify/dist/ReactToastify.min.css';\nimport 'react-calendar/dist/Calendar.css';\nimport \"./app/layout/styles.css\";\nimport App from \"./app/layout/App\";\nimport { Provider } from \"react-redux\";\nimport { configureStore, history } from \"./app/store/configureStore\";\nimport ScrollToTop from \"./app/layout/ScrollToTop\";\nimport { ConnectedRouter } from 'connected-react-router';\n\n\nconst store = configureStore();\n\n\n\nconst rootEl = document.getElementById(\"root\");\n\nfunction render() {\n  ReactDOM.render(\n    <Provider store={store}>\n      <ConnectedRouter history={history}>\n        <ScrollToTop />\n        <App />\n      </ConnectedRouter>\n    </Provider>,\n\n    rootEl\n  );\n}\n\nif (module.hot) {\n  module.hot.accept(\"./app/layout/App\", function () {\n    setTimeout(render);\n  });\n}\n\nrender();\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n"],"sourceRoot":""}