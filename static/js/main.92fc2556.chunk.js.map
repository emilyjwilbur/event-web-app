{"version":3,"sources":["features/events/eventDashboard/EventListAttendee.jsx","features/events/eventDashboard/EventListItem.jsx","features/events/eventDashboard/EventList.jsx","features/events/eventDashboard/EventListItemPlaceholder.jsx","features/events/eventConstants.js","app/async/asyncReducer.js","app/config/firebase.js","app/firestore/firestoreService.js","features/events/eventActions.js","features/events/eventDashboard/EventFilters.jsx","app/firestore/firebaseService.js","features/profiles/profileConstants.js","features/profiles/profileActions.js","features/events/eventDashboard/EventFeedItem.jsx","features/events/eventDashboard/EventsFeed.jsx","features/events/eventDashboard/EventDashboard.jsx","app/hooks/useFirestoreDoc.js","features/events/eventDetailed/EventDetailedChatForm.jsx","app/common/util/util.js","features/events/eventDetailed/EventDetailedChat.jsx","app/common/modals/modalReducer.js","features/auth/UnauthModal.jsx","features/events/eventDetailed/EventDetailedHeader.jsx","features/events/eventDetailed/EventDetailedMap.jsx","features/events/eventDetailed/EventDetailedInfo.jsx","features/events/eventDetailed/EventDetailedSidebar.jsx","app/layout/LoadingComponent.jsx","features/events/eventDetailed/EventDetailedPage.jsx","app/common/form/MyTextInput.jsx","app/common/form/MyTextArea.jsx","app/common/form/MySelectInput.jsx","app/api/categoryOptions.js","app/common/form/MyDateInput.jsx","app/common/form/MyPlaceInput.jsx","features/events/eventForm/EventForm.jsx","features/home/HomePage.jsx","features/nav/SignedInMenu.jsx","features/nav/SignedOutMenu.jsx","features/nav/NavBar.jsx","features/sandbox/TestMap.jsx","features/sandbox/TestPlaceInput.jsx","features/sandbox/testReducer.js","features/sandbox/Sandbox.jsx","app/common/modals/ModalWrapper.jsx","features/sandbox/TestModal.jsx","features/auth/SocialLogin.jsx","features/auth/LoginForm.jsx","features/auth/RegisterForm.jsx","app/common/modals/ModalManager.jsx","app/common/errors/ErrorComponent.jsx","features/auth/AccountPage.jsx","features/profiles/profilePage/ProfileForm.jsx","features/profiles/profilePage/AboutTab.jsx","app/hooks/useFirestoreCollection.js","features/profiles/profilePage/EventsTab.jsx","features/profiles/profilePage/ProfileCard.jsx","features/profiles/profilePage/FollowingTab.jsx","app/common/photos/PhotoWidgetCropper.jsx","app/common/photos/PhotoWidgetDropzone.jsx","app/common/photos/PhotoUploadWidget.jsx","features/profiles/profilePage/PhotosTab.jsx","features/profiles/profilePage/ProfileContent.jsx","features/profiles/profilePage/ProfileHeader.jsx","features/profiles/profilePage/ProfilePage.jsx","app/layout/PrivateRoute.jsx","app/layout/App.jsx","features/auth/authConstants.js","features/auth/authReducer.js","features/events/eventReducer.js","features/profiles/profileReducer.js","app/store/rootReducer.js","features/auth/authActions.js","app/store/configureStore.js","app/layout/ScrollToTop.jsx","index.js"],"names":["EventListAttendee","attendee","List","Item","as","Link","to","id","Image","size","circular","src","photoURL","EventListItem","event","Segment","Group","hostPhotoURL","Content","Header","content","title","Description","hostUid","hostedBy","isCancelled","Label","style","top","ribbon","color","Icon","name","format","date","venue","address","secondary","horizontal","attendees","map","clearing","description","Button","floated","EventList","events","getNextEvents","loading","moreEvents","length","pageStart","loadMore","hasMore","initialLoad","EventListItemPlaceholder","Placeholder","fluid","minHeight","image","Line","Paragraph","disabled","CREATE_EVENT","UPDATE_EVENT","DELETE_EVENT","FETCH_EVENTS","LISTEN_TO_EVENT_CHAT","CLEAR_COMMENTS","LISTEN_TO_SELECTED_EVENT","CLEAR_SELECTED_EVENT","CLEAR_EVENTS","SET_FILTER","SET_START_DATE","RETAIN_STATE","ASYNC_ACTION_START","ASYNC_ACTION_FINISH","ASYNC_ACTION_ERROR","APP_LOADED","asyncActionStart","type","asyncActionFinish","asyncActionError","error","console","log","payload","initialState","initialized","asyncReducer","state","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","firestore","db","dataFromSnapshot","snapshot","exists","data","prop","hasOwnProperty","Timestamp","toDate","fetchEventsFromFirestore","filter","startDate","limit","lastDocSnapshot","user","auth","currentUser","eventsRef","collection","orderBy","startAfter","where","uid","listenToEventFromFirestore","eventId","doc","addEventToFirestore","add","displayName","FieldValue","arrayUnion","attendeeIds","cancelEventToggle","update","setUserProfileData","set","email","createdAt","serverTimestamp","getUserProfile","userId","updateUserProfile","profile","a","updateProfile","downloadURL","filename","userDocRef","get","url","setMainPhoto","photo","today","Date","eventDocQuery","userFollowingRef","batch","eventsQuerySnap","i","docs","eventDoc","ref","forEach","docRef","followingDocRef","commit","deletePhotoFromCollection","photoId","userUid","delete","addUserAttendance","cancelUserAttendance","arrayRemove","followUser","followingCount","increment","unfollowUser","getFollowingDoc","profileId","fetchEvents","dispatch","lastVisible","setFilter","value","clearEvents","listenToSelectedEvent","EventFilters","useDispatch","authenticated","useSelector","Menu","vertical","width","icon","attached","active","onClick","onChange","setStartDate","tileDisabled","firebaseObjectToArray","Object","entries","e","assign","signOutFirebase","signOut","registerInFirebase","creds","createUserWithEmailAndPassword","password","result","selectedProvider","provider","FacebookAuthProvider","GoogleAuthProvider","signInWithPopup","additionalUserInfo","isNewUser","toast","message","deleteFromFirebaseStorage","storage","child","addEventChatComment","values","newComment","text","comment","now","parentId","database","push","getEventChatRef","orderByKey","getUserFeedRef","limitToLast","LISTEN_TO_CURRENT_USER_PROFILE","LISTEN_TO_SELECTED_USER_PROFILE","LISTEN_TO_USER_PHOTOS","LISTEN_TO_USER_EVENTS","LISTEN_TO_FOLLOWERS","LISTEN_TO_FOLLOWINGS","SET_FOLLOW_USER","SET_UNFOLLOW_USER","CLEAR_FOLLOWINGS","LISTEN_TO_FEED","setFollowUser","setUnfollowUser","EventFeedItem","summary","post","code","Feed","Event","formatDistance","Summary","EventsFeed","feed","useEffect","on","val","reverse","listenToFeed","off","EventDashboard","retainState","async","useState","loadingInitial","setLoadingInitial","then","Grid","Column","Loader","useFirestoreDoc","query","deps","shouldExecute","unsubscribe","onSnapshot","EventDetailedChatForm","closeForm","initialValues","validationSchema","Yup","required","onSubmit","setSubmitting","resetForm","open","commentId","isSubmitting","handleSubmit","isValid","className","field","position","rows","placeholder","onKeyPress","key","shiftKey","preventDefault","delay","ms","Promise","resolve","setTimeout","createDataTree","dataset","hashtable","create","childNodes","dataTree","EventDetailedChat","comments","showReplyForm","setShowReplyForm","handleCloseReplyForm","listenToEventsChat","textAlign","inverted","border","Comment","Avatar","process","Author","Metadata","Text","split","Actions","Action","OPEN_MODAL","CLOSE_MODAL","openModal","closeModal","modalReducer","modalType","modalProps","UnauthModal","history","setModalOpen","setOpen","prevLocation","handleClose","pathname","handleOpenLoginModal","undefined","Modal","onClose","widths","Or","Divider","eventImageStyle","eventImageTextStyle","bottom","left","height","EventDetailedHeader","isHost","isGoing","setLoading","modalOpen","basic","padding","category","stye","Marker","EventDetailedMap","latLng","bootstrapURLKeys","center","zoom","lat","lng","EventDetailedInfo","mapOpen","setMapOpenToggle","verticalAlign","EventDetailedSidebar","primary","relaxed","divided","LoadingComponent","Dimmer","EventDetailedPage","match","selectedEvent","some","params","MyTextInput","label","props","useField","meta","FormField","touched","MyTextArea","MySelectInput","helpers","Select","clearable","d","setValue","onBlur","setTouched","categoryData","MyDateInput","setFieldValue","useFormikContext","selected","MyPlaceInput","options","onSelect","geocodeByAddress","results","getLatLng","catch","setError","searchOptions","getInputProps","suggestions","getSuggestionItemProps","handleBlur","marginTop","zIndex","selection","suggestion","formattedSuggestion","mainText","secondaryText","EventForm","location","loadingCancel","setLoadingCancel","confirmOpen","setConfirmOpen","city","shape","enableReinitialize","dirty","google","maps","LatLng","radius","types","placeholderText","timeFormat","showTimeSelect","timeCaption","dateFormat","autoComplete","positive","Confirm","onCancel","onConfirm","handleCancelToggle","HomePage","Container","SignedInMenu","currentUserProfile","useHistory","avatar","spaced","Dropdown","pointing","SignedOutMenu","setAuthenticated","marginLeft","NavBar","setFormOpen","fixed","NavLink","exact","header","alt","marginRight","AnyReactComponent","TestMap","TestPlaceInput","setLocation","setAddress","backgroundColor","cursor","INCREMENT_COUNTER","DECREMENT_COUNTER","testReducer","Sandbox","target","setTarget","test","amount","ModalWrapper","children","TestModal","SocialLogin","handleSocialLogin","socialLogin","marginBottom","LoginForm","setErrors","signInWithEmailAndPassword","errors","RegisterForm","ModalManager","renderedModal","modalLookup","currentModal","modals","ModalComponent","ErrorComponent","AccountPage","dividing","providerId","sub","newPassword1","newPassword2","oneOf","updatePassword","display","ProfileForm","AboutTab","isCurrentUser","editMode","setEditMode","Tab","Pane","useFirestoreCollection","EventsTab","activeTab","setActiveTab","profileEvents","getUserEventsQuery","listenToUserEvents","onTabChange","activeIndex","panes","menuItem","pane","menu","Card","itemsPerRow","objectFit","Meta","ProfileCard","FollowingTab","followings","followers","listenToFollowers","listenToFollowings","PhotoWidgetCropper","setImage","imagePreview","cropper","useRef","aspectRatio","preview","guides","viewMode","dragMode","scalable","cropBoxMovable","cropBoxResizable","crop","current","getCroppedCanvas","toBlob","blob","PhotoWidgetDropzone","setFiles","dropzoneStyles","borderRadius","paddingTop","onDrop","useCallback","acceptedFiles","file","URL","createObjectURL","useDropzone","getRootProps","isDragActive","PhotoUploadWidget","files","handleCancelCrop","minWidth","overflow","cuid","slice","lastIndexOf","getFileExtension","uploadTask","put","uploadToFirebaseStorage","progress","bytesTransferred","totalBytes","getDownloadURL","updateUserProfilePhoto","PhotosTab","photos","isUpdating","updating","setUpdating","isDeleting","deleting","setDeleting","listenToUserPhotos","handleSetMainPhoto","handleDeletePhoto","ProfileContent","render","menuPosition","ProfileHeader","followingUser","fetchFollowingDoc","followingDoc","Statistic","followerCount","Reveal","animated","visible","hidden","handleUnfollowUser","handleFollowUser","ProfilePage","selectedUserProfile","listenToSelectedUserProfile","PrivateRoute","Component","component","rest","App","useLocation","hideProgressBar","path","SIGN_IN_USER","SIGN_OUT_USER","currentLocation","authReducer","providerData","LOCATION_CHANGE","eventReducer","evt","profileReducer","rootReducer","combineReducers","router","connectRouter","verifyAuth","onAuthStateChanged","signInUser","createBrowserHistory","ScrollToTop","window","scrollTo","store","createStore","composeWithDevTools","applyMiddleware","thunk","configureStore","rootEl","document","getElementById","ReactDOM"],"mappings":"qUAIe,SAASA,EAAT,GAAwC,IAAZC,EAAW,EAAXA,SACvC,OACC,cAACC,EAAA,EAAKC,KAAN,CAAWC,GAAIC,IAAMC,GAAE,mBAAcL,EAASM,IAA9C,SACI,cAACC,EAAA,EAAD,CAAOC,KAAK,OAAOC,UAAQ,EAACC,IAAKV,EAASW,a,aCApC,SAASC,EAAT,GAAmC,IAAVC,EAAS,EAATA,MAGtC,OACE,eAACC,EAAA,EAAQC,MAAT,WACE,cAACD,EAAA,EAAD,UACE,cAACZ,EAAA,EAAKa,MAAN,UACE,eAACb,EAAA,EAAD,WACE,cAACA,EAAA,EAAKK,MAAN,CAAYC,KAAK,OAAOC,UAAQ,EAACC,IAAKG,EAAMG,eAC5C,eAACd,EAAA,EAAKe,QAAN,WACE,cAACf,EAAA,EAAKgB,OAAN,CAAaC,QAASN,EAAMO,QAC5B,eAAClB,EAAA,EAAKmB,YAAN,wBAA4B,cAAC,IAAD,CAAMhB,GAAE,mBAAcQ,EAAMS,SAA5B,SAAwCT,EAAMU,cACzEV,EAAMW,aACL,cAACC,EAAA,EAAD,CACEC,MAAO,CAACC,IAAK,SACbC,OAAO,QACPC,MAAM,MACNV,QAAQ,4CAQpB,cAACL,EAAA,EAAD,UACE,iCACE,cAACgB,EAAA,EAAD,CAAMC,KAAK,UADb,IACyBC,kBAAOnB,EAAMoB,KAAM,uBAC1C,cAACH,EAAA,EAAD,CAAMC,KAAK,WAFb,IAE0BlB,EAAMqB,MAAMC,aAGxC,cAACrB,EAAA,EAAD,CAASsB,WAAS,EAAlB,SACE,cAACnC,EAAA,EAAD,CAAMoC,YAAU,EAAhB,SACGxB,EAAMyB,UAAUC,KAAI,SAACvC,GAAD,OACnB,cAACD,EAAD,CAAqCC,SAAUA,GAAvBA,EAASM,WAIvC,eAACQ,EAAA,EAAD,CAAS0B,UAAQ,EAAjB,UACE,8BAAM3B,EAAM4B,cAEZ,cAACC,EAAA,EAAD,CACEvC,GAAIC,IAAMC,GAAE,kBAAaQ,EAAMP,IAC/BuB,MAAM,WACNc,QAAQ,QACRxB,QAAQ,e,sBChDH,SAASyB,EAAT,GAKX,IAJFC,EAIC,EAJDA,OACAC,EAGC,EAHDA,cACAC,EAEC,EAFDA,QACAC,EACC,EADDA,WAEA,OACE,mCACqB,IAAlBH,EAAOI,QACN,cAAC,IAAD,CACEC,UAAW,EACXC,SAAUL,EACVM,SAAUL,GAAWC,EACrBK,aAAa,EAJf,SAMGR,EAAON,KAAI,SAAC1B,GAAD,OACV,cAACD,EAAD,CAAeC,MAAOA,GAAYA,EAAMP,W,qBClBrC,SAASgD,IACpB,OACI,cAACC,EAAA,EAAD,CAAaC,OAAK,EAAlB,SACI,eAAC1C,EAAA,EAAQC,MAAT,WACI,cAACD,EAAA,EAAD,CAASY,MAAO,CAAC+B,UAAW,KAA5B,SACI,eAACF,EAAA,EAAD,WACI,eAACA,EAAA,EAAYrC,OAAb,CAAoBwC,OAAK,EAAzB,UACI,cAACH,EAAA,EAAYI,KAAb,IACA,cAACJ,EAAA,EAAYI,KAAb,OAEJ,cAACJ,EAAA,EAAYK,UAAb,UACI,cAACL,EAAA,EAAYI,KAAb,WAIZ,cAAC7C,EAAA,EAAD,UACI,eAACyC,EAAA,EAAD,WACI,cAACA,EAAA,EAAYI,KAAb,IACA,cAACJ,EAAA,EAAYI,KAAb,SAGR,cAAC7C,EAAA,EAAD,CAASsB,WAAS,EAACV,MAAO,CAAC+B,UAAW,MACtC,cAAC3C,EAAA,EAAD,CAAS0B,UAAQ,EAAjB,SACI,cAACE,EAAA,EAAD,CAAQmB,UAAQ,EAAChC,MAAM,OAAOc,QAAQ,QAAQxB,QAAQ,gB,wDCzB7D2C,EAAe,eACfC,EAAe,eACfC,EAAe,eACfC,EAAe,eACfC,EAAuB,uBACvBC,EAAiB,iBACjBC,EAA2B,2BAC3BC,EAAuB,uBACvBC,EAAe,eACfC,EAAa,aACbC,EAAiB,iBACjBC,EAAe,e,QCXtBC,EAAqB,qBACrBC,EAAsB,sBACtBC,EAAqB,qBACdC,EAAa,aAEnB,SAASC,IACd,MAAO,CACLC,KAAML,GAIH,SAASM,IACd,MAAO,CACLD,KAAMJ,GAIH,SAASM,GAAiBC,GAE/B,OADAC,QAAQC,IAAIF,GACL,CACLH,KAAMH,EACNS,QAASH,GAIb,IAAMI,GAAe,CACnBvC,SAAS,EACTmC,MAAO,KACPK,aAAa,GAGA,SAASC,KAAuD,IAA1CC,EAAyC,uDAAjCH,GAAiC,yCAAjBP,EAAiB,EAAjBA,KAAMM,EAAW,EAAXA,QACjE,OAAQN,GACN,KAAKL,EACH,OAAO,2BACFe,GADL,IAEE1C,SAAS,EACTmC,MAAO,OAEX,KAAKP,EACH,OAAO,2BACFc,GADL,IAEE1C,SAAS,IAEb,KAAK6B,EACH,OAAO,2BACFa,GADL,IAEE1C,SAAS,EACTmC,MAAOG,IAET,KAAKR,EACL,OAAO,2BACFY,GADL,IAEEF,aAAa,IAEjB,QACE,OAAOE,G,0CCzCbC,KAASC,cATc,CACnBC,OAAQ,0CACRC,WAAY,mCACZC,UAAW,mBACXC,cAAe,+BACfC,kBAAmB,gBACnBC,MAAO,+CAIXP,KAASQ,YAEMR,UAAf,EChBMS,GAAKT,GAASQ,YAEb,SAASE,GAAiBC,GAC/B,GAAKA,EAASC,OAAd,CACA,IAAMC,EAAOF,EAASE,OAEtB,IAAK,IAAMC,KAAQD,EACbA,EAAKE,eAAeD,IAClBD,EAAKC,aAAiBd,GAASQ,UAAUQ,YAC3CH,EAAKC,GAAQD,EAAKC,GAAMG,UAK9B,OAAO,2BACFJ,GADL,IAEEjG,GAAI+F,EAAS/F,MAIV,SAASsG,GACdC,EACAC,EACAC,GAEC,IADDC,EACA,uDADkB,KAEZC,EAAOvB,GAASwB,OAAOC,YACzBC,EAAYjB,GACbkB,WAAW,UACXC,QAAQ,QACRC,WAAWP,GACXD,MAAMA,GACT,OAAQF,GACN,IAAK,UACH,OAAOO,EACJI,MAAM,cAAe,iBAAkBP,EAAKQ,KAC5CD,MAAM,OAAQ,KAAMV,GACzB,IAAK,SACH,OAAOM,EACJI,MAAM,UAAW,KAAMP,EAAKQ,KAC5BD,MAAM,OAAQ,KAAMV,GACzB,QACE,OAAOM,EAAUI,MAAM,OAAQ,KAAMV,IAIpC,SAASY,GAA2BC,GACzC,OAAOxB,GAAGkB,WAAW,UAAUO,IAAID,GAG9B,SAASE,GAAoBhH,GAClC,IAAMoG,EAAOvB,GAASwB,OAAOC,YAC7B,OAAOhB,GAAGkB,WAAW,UAAUS,IAAxB,2BACFjH,GADE,IAELS,QAAS2F,EAAKQ,IACdlG,SAAU0F,EAAKc,YACf/G,aAAciG,EAAKtG,UAAY,KAC/B2B,UAAWoD,GAASQ,UAAU8B,WAAWC,WAAW,CAClD3H,GAAI2G,EAAKQ,IACTM,YAAad,EAAKc,YAClBpH,SAAUsG,EAAKtG,UAAY,OAE7BuH,YAAaxC,GAASQ,UAAU8B,WAAWC,WAAWhB,EAAKQ,QAYxD,SAASU,GAAkBtH,GAChC,OAAOsF,GAAGkB,WAAW,UAAUO,IAAI/G,EAAMP,IAAI8H,OAAO,CAClD5G,aAAcX,EAAMW,cAIjB,SAAS6G,GAAmBpB,GACjC,OAAOd,GACJkB,WAAW,SACXO,IAAIX,EAAKQ,KACTa,IAAI,CACHP,YAAad,EAAKc,YAClBQ,MAAOtB,EAAKsB,MACZ5H,SAAUsG,EAAKtG,UAAY,KAC3B6H,UAAW9C,GAASQ,UAAU8B,WAAWS,oBAIxC,SAASC,GAAeC,GAC7B,OAAOxC,GAAGkB,WAAW,SAASO,IAAIe,GAG7B,SAAeC,GAAtB,mC,8CAAO,WAAiCC,GAAjC,eAAAC,EAAA,yDACC7B,EAAOvB,GAASwB,OAAOC,YADxB,SAGCF,EAAKc,cAAgBc,EAAQd,YAH9B,gCAIKd,EAAK8B,cAAc,CACvBhB,YAAac,EAAQd,cALtB,uBAQU5B,GAAGkB,WAAW,SAASO,IAAIX,EAAKQ,KAAKW,OAAOS,GARtD,gJ,oEAcA,WAAsCG,EAAaC,GAAnD,iBAAAH,EAAA,6DACC7B,EAAOvB,GAASwB,OAAOC,YACvB+B,EAAa/C,GAAGkB,WAAW,SAASO,IAAIX,EAAKQ,KAF9C,kBAImByB,EAAWC,MAJ9B,iBAKU5C,OAAO5F,SALjB,iCAMKwF,GAAGkB,WAAW,SAASO,IAAIX,EAAKQ,KAAKW,OAAO,CAChDzH,SAAUqI,IAPX,wBASK/B,EAAK8B,cAAc,CACvBpI,SAAUqI,IAVX,yBAaU7C,GAAGkB,WAAW,SAASO,IAAIX,EAAKQ,KAAKJ,WAAW,UAAUS,IAAI,CACzE/F,KAAMkH,EACNG,IAAKJ,IAfJ,iJ,sBA0BA,SAAeK,GAAtB,mC,8CAAO,WAA4BC,GAA5B,6BAAAR,EAAA,6DACC7B,EAAOvB,GAASwB,OAAOC,YACvBoC,EAAQ,IAAIC,KACZC,EAAgBtD,GACnBkB,WAAW,UACXG,MAAM,cAAe,iBAAkBP,EAAKQ,KAC5CD,MAAM,OAAQ,KAAM+B,GACjBG,EAAmBvD,GACtBkB,WAAW,aACXO,IAAIX,EAAKQ,KACTJ,WAAW,kBAERsC,EAAQxD,GAAGwD,SAEXvB,OAAOjC,GAAGkB,WAAW,SAASO,IAAIX,EAAKQ,KAAM,CACjD9G,SAAU2I,EAAMF,MAfb,kBAmB2BK,EAAcN,MAnBzC,OAoBH,IADMS,EAnBH,OAoBMC,EAAI,EAAGA,EAAID,EAAgBE,KAAK7G,OAAQ4G,KAC3CE,EAAWH,EAAgBE,KAAKD,IACvBtD,OAAOjF,UAAY2F,EAAKQ,KACnCkC,EAAMvB,OAAOwB,EAAgBE,KAAKD,GAAGG,IAAK,CACxChJ,aAAcsI,EAAMF,MAGxBO,EAAMvB,OAAOwB,EAAgBE,KAAKD,GAAGG,IAAK,CACxC1H,UAAWyH,EAASxD,OAAOjE,UAAUuE,QAAO,SAAC7G,GAI3C,OAHIA,EAASM,KAAO2G,EAAKQ,MACvBzH,EAASW,SAAW2I,EAAMF,KAErBpJ,OAhCV,iBAqC6B0J,EAAiBP,MArC9C,sBAsCeW,KAAKG,SAAQ,SAACC,GAC9B,IAAIC,EAAkBhE,GACnBkB,WAAW,aACXO,IAAIsC,EAAO5J,IACX+G,WAAW,iBACXO,IAAIX,EAAKQ,KACZkC,EAAMvB,OAAO+B,EAAiB,CAC5BxJ,SAAU2I,EAAMF,SA7CjB,UAiDGO,EAAMS,SAjDT,yBAmDUnD,EAAK8B,cAAc,CAC9BpI,SAAU2I,EAAMF,MApDf,iJ,sBA2DA,SAASiB,GAA0BC,GACxC,IAAMC,EAAU7E,GAASwB,OAAOC,YAAYM,IAC5C,OAAOtB,GACJkB,WAAW,SACXO,IAAI2C,GACJlD,WAAW,UACXO,IAAI0C,GACJE,SAGE,SAASC,GAAkB5J,GAChC,IAAMoG,EAAOvB,GAASwB,OAAOC,YAC7B,OAAOhB,GACJkB,WAAW,UACXO,IAAI/G,EAAMP,IACV8H,OAAO,CACN9F,UAAWoD,GAASQ,UAAU8B,WAAWC,WAAW,CAClD3H,GAAI2G,EAAKQ,IACTM,YAAad,EAAKc,YAClBpH,SAAUsG,EAAKtG,UAAY,OAE7BuH,YAAaxC,GAASQ,UAAU8B,WAAWC,WAAWhB,EAAKQ,OAI1D,SAAeiD,GAAtB,mC,8CAAO,WAAoC7J,GAApC,iBAAAiI,EAAA,6DACC7B,EAAOvB,GAASwB,OAAOC,YADxB,kBAGoBhB,GAAGkB,WAAW,UAAUO,IAAI/G,EAAMP,IAAI6I,MAH1D,cAGGY,EAHH,yBAII5D,GACJkB,WAAW,UACXO,IAAI/G,EAAMP,IACV8H,OAAO,CACNF,YAAaxC,GAASQ,UAAU8B,WAAW2C,YAAY1D,EAAKQ,KAC5DnF,UAAWyH,EACRxD,OACAjE,UAAUuE,QAAO,SAAC7G,GAAD,OAAcA,EAASM,KAAO2G,EAAKQ,UAXxD,qG,sBAqCA,SAAemD,GAAtB,mC,8CAAO,WAA0B/B,GAA1B,iBAAAC,EAAA,6DACC7B,EAAOvB,GAASwB,OAAOC,YACvBwC,EAAQxD,GAAGwD,QAFZ,SAKHA,EAAMrB,IACJnC,GACGkB,WAAW,aACXO,IAAIX,EAAKQ,KACTJ,WAAW,iBACXO,IAAIiB,EAAQvI,IACf,CACEyH,YAAac,EAAQd,YACrBpH,SAAUkI,EAAQlI,SAClB8G,IAAKoB,EAAQvI,KAIjBqJ,EAAMvB,OAAOjC,GAAGkB,WAAW,SAASO,IAAIX,EAAKQ,KAAM,CACjDoD,eAAgBnF,GAASQ,UAAU8B,WAAW8C,UAAU,KAnBvD,SAsBUnB,EAAMS,SAtBhB,gJ,sBA4BA,SAAeW,GAAtB,mC,8CAAO,WAA4BlC,GAA5B,iBAAAC,EAAA,6DACC7B,EAAOvB,GAASwB,OAAOC,YACvBwC,EAAQxD,GAAGwD,QAFZ,SAKHA,EAAMa,OACJrE,GACGkB,WAAW,aACXO,IAAIX,EAAKQ,KACTJ,WAAW,iBACXO,IAAIiB,EAAQvI,KAEjBqJ,EAAMvB,OAAOjC,GAAGkB,WAAW,SAASO,IAAIX,EAAKQ,KAAM,CACjDoD,eAAgBnF,GAASQ,UAAU8B,WAAW8C,WAAW,KAbxD,SAgBUnB,EAAMS,SAhBhB,gJ,sBA8BA,SAASY,GAAgBC,GAC9B,IAAMV,EAAU7E,GAASwB,OAAOC,YAAYM,IAC5C,OAAOtB,GACJkB,WAAW,aACXO,IAAI2C,GACJlD,WAAW,iBACXO,IAAIqD,GACJ9B,MC9SE,SAAS+B,GAAYrE,EAAQC,EAAWC,EAAOC,GACpD,8CAAO,WAAgBmE,GAAhB,qBAAArC,EAAA,6DACLqC,EAASrG,KADJ,kBAGoB8B,GACrBC,EACAC,EACAC,EACAC,GACAmC,MARC,OAGG9C,EAHH,OASG+E,EAAc/E,EAASyD,KAAKzD,EAASyD,KAAK7G,OAAS,GACnDD,EAAaqD,EAASyD,KAAK7G,QAAU8D,EACrClE,EAASwD,EAASyD,KAAKvH,KAAI,SAACqF,GAAD,OAASxB,GAAiBwB,MAC3DuD,EAAS,CAAEpG,KAAMd,EAAcoB,QAAS,CAAExC,SAAQG,aAAYoI,iBAC9DD,EAASnG,KAbN,kDAeHmG,EAASlG,GAAiB,EAAD,KAftB,0DAAP,sDAoBK,SAASoG,GAAUC,GACxB,OAAO,SAASH,GACdA,EAASI,MACTJ,EAAS,CAACpG,KAAMR,EAAYc,QAASiG,KAWlC,SAASE,GAAsB3K,GACpC,MAAO,CACLkE,KAAMX,EACNiB,QAASxE,GAsCN,SAAS0K,KACZ,MAAO,CACHxG,KAAMT,GC9FC,SAASmH,GAAT,GAAoC,IAAZ1I,EAAW,EAAXA,QAC/BoI,EAAWO,cACTC,EAAkBC,aAAY,SAACnG,GAAD,OAAWA,EAAMyB,QAA/CyE,cACR,EAA8BC,aAAY,SAACnG,GAAD,OAAWA,EAAM5E,SAAnDgG,EAAR,EAAQA,OAAQC,EAAhB,EAAgBA,UAChB,OACE,qCACG6E,GACC,eAACE,EAAA,EAAD,CAAMC,UAAQ,EAACtL,KAAK,QAAQkB,MAAO,CAAEqK,MAAO,QAA5C,UACE,cAAC7K,EAAA,EAAD,CAAQ8K,KAAK,SAASC,UAAQ,EAACpK,MAAM,OAAOV,QAAQ,YACpD,cAAC0K,EAAA,EAAK3L,KAAN,CACEiB,QAAQ,aACR+K,OAAmB,QAAXrF,EACRsF,QAAS,kBAAMhB,EAASE,GAAU,SAClCxH,SAAUd,IAEZ,cAAC8I,EAAA,EAAK3L,KAAN,CACEiB,QAAQ,YACR+K,OAAmB,YAAXrF,EACRsF,QAAS,kBAAMhB,EAASE,GAAU,aAClCxH,SAAUd,IAEZ,cAAC8I,EAAA,EAAK3L,KAAN,CACEiB,QAAQ,cACR+K,OAAmB,WAAXrF,EACRsF,QAAS,kBAAMhB,EAASE,GAAU,YAClCxH,SAAUd,OAIhB,cAAC7B,EAAA,EAAD,CAAQ8K,KAAK,WAAWC,UAAQ,EAACpK,MAAM,OAAOV,QAAQ,gBACtD,cAAC,IAAD,CACEiL,SAAU,SAACnK,GAAD,OAAUkJ,EDarB,SAAsBlJ,GAC3B,OAAO,SAASkJ,GACdA,EAASI,MACTJ,EAAS,CAACpG,KAAMP,EAAgBa,QAASpD,KChBRoK,CAAapK,KAC1CqJ,MAAOxE,GAAa,IAAI0C,KACxB8C,aAAc,kBAAMvJ,Q,uBCnCrB,SAASwJ,GAAsBlG,GACpC,GAAIA,EACF,OAAOmG,OAAOC,QAAQpG,GAAU9D,KAAI,SAACmK,GAAD,OAClCF,OAAOG,OAAO,GAAID,EAAE,GAAI,CAAEpM,GAAIoM,EAAE,QAW/B,SAASE,KACd,OAAOlH,GAASwB,OAAO2F,UAGlB,SAAeC,GAAtB,mC,8CAAO,WAAkCC,GAAlC,eAAAjE,EAAA,+EAEkBpD,GAClBwB,OACA8F,+BAA+BD,EAAMxE,MAAOwE,EAAME,UAJlD,cAEGC,EAFH,gBAKGA,EAAOjG,KAAK8B,cAAc,CAC9BhB,YAAagF,EAAMhF,cANlB,uBAQUM,GAAmB6E,EAAOjG,MARpC,gJ,oEAcA,WAA2BkG,GAA3B,iBAAArE,EAAA,4DAEoB,aAArBqE,IACFC,EAAW,IAAI1H,GAASwB,KAAKmG,sBAEN,WAArBF,IACFC,EAAW,IAAI1H,GAASwB,KAAKoG,oBAN1B,kBASkB5H,GAASwB,OAAOqG,gBAAgBH,GATlD,UASGF,EATH,OAUH/H,QAAQC,IAAI8H,IACRA,EAAOM,mBAAmBC,UAX3B,kCAYKpF,GAAmB6E,EAAOjG,MAZ/B,0DAeHyG,KAAMxI,MAAM,KAAMyI,SAff,2D,sBA8BA,SAASC,GAA0B3E,GACxC,IAAMsB,EAAU7E,GAASwB,OAAOC,YAAYM,IAG5C,OAFmB/B,GAASmI,UAAU7D,MACV8D,MAAX,UAAoBvD,EAApB,wBAA2CtB,IAC5CuB,SAGX,SAASuD,GAAoBpG,EAASqG,GAC3C,IAAM/G,EAAOvB,GAASwB,OAAOC,YACvB8G,EAAa,CACjBlG,YAAad,EAAKc,YAClBpH,SAAUsG,EAAKtG,SACf8G,IAAKR,EAAKQ,IACVyG,KAAMF,EAAOG,QACblM,KAAMuH,KAAK4E,MACXC,SAAUL,EAAOK,UAEnB,OAAO3I,GAAS4I,WAAWtE,IAApB,eAAgCrC,IAAW4G,KAAKN,GAGlD,SAASO,GAAgB7G,GAC9B,OAAOjC,GAAS4I,WAAWtE,IAApB,eAAgCrC,IAAW8G,aAG7C,SAASC,KACd,IAAMzH,EAAOvB,GAASwB,OAAOC,YAC7B,OAAOzB,GACJ4I,WACAtE,IAFI,gBAES/C,EAAKQ,MAClBgH,aACAE,YAAY,GChGV,IAAMC,GAAiC,iCACjCC,GAAkC,kCAClCC,GAAwB,wBACxBC,GAAwB,wBACxBC,GAAsB,sBACtBC,GAAuB,uBACvBC,GAAkB,kBAClBC,GAAoB,oBACpBC,GAAmB,mBACnBC,GAAiB,iBCmCvB,SAASC,KACZ,MAAO,CACHvK,KAAMmK,IAIP,SAASK,KACZ,MAAO,CACHxK,KAAMoK,I,cC/CC,SAASK,GAAT,GAAkC,IAC3CC,EADkCC,EAAQ,EAARA,KAEtC,OAAQA,EAAKC,MACX,IAAK,eACHF,EACE,qCACE,cAAC,IAAD,CAAMpP,GAAE,mBAAcqP,EAAKnF,SAA3B,SAAuCmF,EAAK3H,cAD9C,qBAEe,cAAC,IAAD,CAAM1H,GAAE,kBAAaqP,EAAK/H,SAA1B,SAAsC+H,EAAKtO,WAG5D,MACF,IAAK,aACHqO,EACE,qCACE,cAAC,IAAD,CAAMpP,GAAE,mBAAcqP,EAAKnF,SAA3B,SAAuCmF,EAAK3H,cAD9C,+BAGE,cAAC,IAAD,CAAM1H,GAAE,kBAAaqP,EAAK/H,SAA1B,SAAsC+H,EAAKtO,WAG/C,MACF,QACEqO,EAAU,qBAGd,OACI,eAACG,GAAA,EAAKC,MAAN,WACI,cAACD,GAAA,EAAKnO,MAAN,CAAYiC,MAAOgM,EAAK/O,WACxB,eAACiP,GAAA,EAAK3O,QAAN,WACI,eAAC2O,GAAA,EAAKpG,KAAN,WAAYsG,aAAe,IAAItG,KAAKkG,EAAKzN,MAAO,IAAIuH,MAApD,UACA,cAACoG,GAAA,EAAKG,QAAN,UAAeN,UC3Bd,SAASO,KACtB,IAAM7E,EAAWO,cAETuE,EAASrE,aAAY,SAACnG,GAAD,OAAWA,EAAMoD,WAAtCoH,KAgBR,OAdAC,qBAAU,WAQN,OAPAxB,KAAiByB,GAAG,SAAS,SAAA9J,GAC3B,GAAKA,EAASC,SAAd,CAGA,IAAM2J,EAAO1D,GAAsBlG,EAAS+J,OAAOC,UACnDlF,EFsCD,SAAsB8E,GACzB,MAAO,CACHlL,KAAMsK,GACNhK,QAAS4K,GEzCAK,CAAaL,QAEjB,WACHvB,KAAiB6B,SAEtB,CAACpF,IAIF,qCACE,cAACjK,EAAA,EAAD,CAAQ+K,UAAQ,EAACpK,MAAM,OAAOmK,KAAK,YAAY7K,QAAQ,cACvD,cAACL,EAAA,EAAD,CAASmL,SAAS,SAAlB,SACE,cAAC2D,GAAA,EAAD,UACGK,EAAK1N,KAAI,SAAAmN,GAAI,OACZ,cAACF,GAAD,CAAeE,KAAMA,GAAWA,EAAKpP,cClBlC,SAASkQ,KACtB,IACMrF,EAAWO,cACjB,EAA4EE,aAAY,SAACnG,GAAD,OAAWA,EAAM5E,SAAjGgC,EAAR,EAAQA,OAAQG,EAAhB,EAAgBA,WAAY6D,EAA5B,EAA4BA,OAAQC,EAApC,EAAoCA,UAAWsE,EAA/C,EAA+CA,YAAaqF,EAA5D,EAA4DA,YACpD1N,EAAY6I,aAAY,SAACnG,GAAD,OAAWA,EAAMiL,SAAzC3N,QACA4I,EAAkBC,aAAY,SAACnG,GAAD,OAAWA,EAAMyB,QAA/CyE,cACR,EAA4CgF,oBAAS,GAArD,mBAAOC,EAAP,KAAuBC,EAAvB,KAmBA,OAfAX,qBAAU,WACR,IAAIO,EAKJ,OAJAI,GAAkB,GAClB1F,EAASD,GAAYrE,EAAQC,EAZjB,IAYoCgK,MAAK,WACnDD,GAAkB,MAEb,WACL1F,EAAS,CAACpG,KAAMN,OAEjB,CAAC0G,EAAUtE,EAAQC,EAAW2J,IAO/B,eAACM,EAAA,EAAD,WACE,eAACA,EAAA,EAAKC,OAAN,CAAajF,MAAO,GAApB,UAEG6E,GACC,qCACE,cAACtN,EAAD,IACA,cAACA,EAAD,OAGJ,cAACV,EAAD,CACEC,OAAQA,EACRC,cAhBR,WACEqI,EAASD,GAAYrE,EAAQC,EArBjB,EAqBmCsE,KAgBzCrI,QAASA,EACTC,WAAYA,OAGhB,eAAC+N,EAAA,EAAKC,OAAN,CAAajF,MAAO,EAApB,UACGJ,GAAiB,cAACqE,GAAD,IAClB,cAACvE,GAAD,CAEE1I,QAASA,OAGb,cAACgO,EAAA,EAAKC,OAAN,CAAajF,MAAO,GAApB,SACI,cAACkF,EAAA,EAAD,CAAQ/E,OAAQnJ,SC3DX,SAASmO,GAAT,GAAqE,IAA3CC,EAA0C,EAA1CA,MAAO5K,EAAmC,EAAnCA,KAAM6K,EAA6B,EAA7BA,KAA6B,IAAvBC,qBAAuB,SACzElG,EAAWO,cAEjBwE,qBAAU,WACN,GAAKmB,EAAL,CACAlG,EAASrG,KACT,IAAMwM,EAAcH,IAAQI,YACxB,SAAAlL,GACSA,EAASC,QAIdC,EAAKH,GAAiBC,IACtB8E,EAASnG,MAJLmG,EAASlG,GAAiB,CAAC0K,KAAM,YAAahC,QAAS,gCAM/D,SAAAzI,GAAK,OAAIiG,EAASlG,SAEtB,OAAO,WACHqM,QAELF,G,gCClBQ,SAASI,GAAT,GAAkE,IAAjC7J,EAAgC,EAAhCA,QAAS0G,EAAuB,EAAvBA,SAAUoD,EAAa,EAAbA,UACjE,OACE,cAAC,KAAD,CACEC,cAAe,CAAEvD,QAAS,IAC1BwD,iBAAkBC,KAAW,CACzBzD,QAASyD,OAAaC,aAE1BC,SAAQ,uCAAE,WAAO9D,EAAP,oBAAAlF,EAAA,6DAAiBiJ,EAAjB,EAAiBA,cAAeC,EAAhC,EAAgCA,UAAhC,kBAEAjE,GAAoBpG,EAAD,YAAC,eAAaqG,GAAd,IAAsBK,cAFzC,OAGN2D,IAHM,gDAKNtE,KAAMxI,MAAM,KAAMyI,SALZ,yBAONoE,GAAc,GACdN,EAAU,CAACQ,MAAM,EAAOC,UAAW,OAR7B,4EAAF,wDALV,SAiBG,gBAAGC,EAAH,EAAGA,aAAcC,EAAjB,EAAiBA,aAAcC,EAA/B,EAA+BA,QAA/B,OACC,cAAC,KAAD,CAAMC,UAAU,UAAhB,SACE,cAAC,KAAD,CAAOvQ,KAAK,UAAZ,SACG,gBAAGwQ,EAAH,EAAGA,MAAH,OACC,sBAAK7Q,MAAO,CAAE8Q,SAAU,YAAxB,UACE,cAACvB,EAAA,EAAD,CAAQ/E,OAAQiG,IAChB,kDACEM,KAAM,GACFF,GAFN,IAGEG,YAAY,yEACZC,WAAY,SAACjG,GACK,UAAVA,EAAEkG,KAAmBlG,EAAEmG,UAGb,UAAVnG,EAAEkG,KAAoBlG,EAAEmG,WACxBnG,EAAEoG,iBACFT,GAAWD,oBCxC9B,SAASW,GAAMC,GACpB,OAAO,IAAIC,SAAQ,SAACC,GAAD,OAAaC,WAAWD,EAASF,MAQ/C,SAASI,GAAeC,GAC7B,IAAIC,EAAY9G,OAAO+G,OAAO,MAC9BF,EAAQpJ,SAAQ,SAAAnB,GAAC,OAAIwK,EAAUxK,EAAExI,IAAZ,2BAAsBwI,GAAtB,IAAyB0K,WAAY,QAC1D,IAAIC,EAAW,GAKf,OAJAJ,EAAQpJ,SAAQ,SAAAnB,GACVA,EAAEuF,SAAUiF,EAAUxK,EAAEuF,UAAUmF,WAAWjF,KAAK+E,EAAUxK,EAAExI,KAC7DmT,EAASlF,KAAK+E,EAAUxK,EAAExI,QAE1BmT,ECLM,SAASC,GAAT,GAAyC,IAAZ/L,EAAW,EAAXA,QACpCwD,EAAWO,cACTiI,EAAa/H,aAAY,SAACnG,GAAD,OAAWA,EAAM5E,SAA1C8S,SACAhI,EAAkBC,aAAY,SAACnG,GAAD,OAAWA,EAAMyB,QAA/CyE,cACR,EAA0CgF,mBAAS,CACjDsB,MAAM,EACNC,UAAW,OAFb,mBAAO0B,EAAP,KAAsBC,EAAtB,KAKA,SAASC,IACPD,EAAiB,CAAE5B,MAAM,EAAOC,UAAW,OAgB7C,OAbAhC,qBAAU,WAOR,OANA1B,GAAgB7G,GAASwI,GAAG,SAAS,SAAC9J,GAC/BA,EAASC,UACd6E,EX6DC,SAA4BwI,GACjC,MAAO,CACL5O,KAAMb,EACNmB,QAASsO,GW/DLI,CAAmBxH,GAAsBlG,EAAS+J,OAAOC,eAGtD,WACLlF,EAAS,CAAEpG,KAAMZ,IACjBqK,KAAkB+B,SAEnB,CAAC5I,EAASwD,IAGX,qCACE,cAACrK,EAAA,EAAD,CACEkT,UAAU,SACV/H,SAAS,MACTgI,UAAQ,EACRpS,MAAM,WACNH,MAAO,CAAEwS,OAAQ,QALnB,SAOE,cAAChT,EAAA,EAAD,UAASyK,EAAgB,wBAA0B,kCAGpDA,GACD,eAAC7K,EAAA,EAAD,CAASmL,UAAQ,EAAjB,UACE,cAACuF,GAAD,CACE7J,QAASA,EACT0G,SAAU,EACVoD,UAAWoC,IAEb,cAACM,GAAA,EAAQpT,MAAT,UACGqS,GAAeO,GAAUpR,KAAI,SAAC4L,GAAD,OAC5B,eAACgG,GAAA,EAAD,WACE,cAACA,GAAA,EAAQC,OAAT,CAAgB1T,IAAKyN,EAAQxN,UAAY0T,mCACzC,eAACF,GAAA,EAAQlT,QAAT,WACE,cAACkT,GAAA,EAAQG,OAAT,CAAgBnU,GAAIC,IAAMC,GAAE,mBAAc8N,EAAQ1G,KAAlD,SACG0G,EAAQpG,cAEX,cAACoM,GAAA,EAAQI,SAAT,UACE,8BAAMzE,aAAe3B,EAAQlM,KAAM,IAAIuH,UAEzC,cAAC2K,GAAA,EAAQK,KAAT,UACGrG,EAAQD,KAAKuG,MAAM,MAAMlS,KAAI,SAAC2L,EAAMrE,GAAP,OAC5B,iCACGqE,EACD,yBAFSrE,QAMf,eAACsK,GAAA,EAAQO,QAAT,WACE,cAACP,GAAA,EAAQQ,OAAT,CACExI,QAAS,kBACP0H,EAAiB,CAAE5B,MAAM,EAAMC,UAAW/D,EAAQ7N,MAFtD,mBAOCsT,EAAc3B,MACb2B,EAAc1B,YAAc/D,EAAQ7N,IAClC,cAACkR,GAAD,CACE7J,QAASA,EACT0G,SAAUF,EAAQ7N,GAClBmR,UAAWqC,UAKpB3F,EAAQqF,WAAWvQ,OAAS,GAC3B,cAACkR,GAAA,EAAQpT,MAAT,UACGoN,EAAQqF,WAAWnD,UAAU9N,KAAI,SAACuL,GAAD,OAChC,eAACqG,GAAA,EAAD,WACE,cAACA,GAAA,EAAQC,OAAT,CACE1T,IAAKoN,EAAMnN,UAAY0T,mCAEzB,eAACF,GAAA,EAAQlT,QAAT,WACE,cAACkT,GAAA,EAAQG,OAAT,CAAgBnU,GAAIC,IAAMC,GAAE,mBAAcyN,EAAMrG,KAAhD,SACGqG,EAAM/F,cAET,cAACoM,GAAA,EAAQI,SAAT,UACE,8BAAMzE,aAAehC,EAAM7L,KAAM,IAAIuH,UAEvC,cAAC2K,GAAA,EAAQK,KAAT,UACG1G,EAAMI,KAAKuG,MAAM,MAAMlS,KAAI,SAAC2L,EAAMrE,GAAP,OAC1B,iCACGqE,EACD,yBAFSrE,QAMf,eAACsK,GAAA,EAAQO,QAAT,WACE,cAACP,GAAA,EAAQQ,OAAT,CACExI,QAAS,kBACP0H,EAAiB,CACf5B,MAAM,EACNC,UAAWpE,EAAMxN,MAJvB,mBAUCsT,EAAc3B,MACb2B,EAAc1B,YAAcpE,EAAMxN,IAChC,cAACkR,GAAD,CACE7J,QAASA,EACT0G,SAAUP,EAAMO,SAChBoD,UAAWqC,YAnCThG,EAAMxN,WAtCd6N,EAAQ7N,e,wBC7D5BsU,GAAa,aACbC,GAAc,cAEb,SAASC,GAAUzP,GACtB,MAAO,CACHN,KAAM6P,GACNvP,WAID,SAAS0P,KACZ,MAAO,CACHhQ,KAAM8P,IAOC,SAASG,KAAqD,IAAxCvP,EAAuC,uDAFvD,KAEuD,yCAAhBV,EAAgB,EAAhBA,KAAMM,EAAU,EAAVA,QAC9D,OAAQN,GACJ,KAAK6P,GACD,IAAOK,EAAyB5P,EAAzB4P,UAAWC,EAAc7P,EAAd6P,WAClB,MAAO,CAACD,YAAWC,cACnB,KAAKL,GACD,OAAO,KACP,QACI,OAAOpP,GCtBZ,SAAS0P,GAAT,GAAiD,IAA1BC,EAAyB,EAAzBA,QAASC,EAAgB,EAAhBA,aAC7C,EAAwB1E,oBAAS,GAAjC,mBAAOsB,EAAP,KAAaqD,EAAb,KACQC,EAAiB3J,aAAY,SAACnG,GAAD,OAAWA,EAAMyB,QAA9CqO,aACFpK,EAAWO,cAEjB,SAAS8J,IACP,IAAKJ,EAGH,OAFAE,GAAQ,QACRD,GAAa,GAGXD,GAAWG,EACbH,EAAQ7G,KAAKgH,EAAaE,UAE1BL,EAAQ7G,KAAK,WAEf+G,GAAQ,GAGZ,SAASI,EAAqBT,GAC5B9J,EAAS2J,GAAU,CAACG,eACpBK,GAAQ,QACaK,IAAjBN,GACFA,GAAa,GAIf,OACE,eAACO,GAAA,EAAD,CAAO3D,KAAMA,EAAMzR,KAAK,OAAOqV,QAASL,EAAxC,UACE,cAACI,GAAA,EAAM1U,OAAP,CAAcC,QAAQ,wCACtB,eAACyU,GAAA,EAAM3U,QAAP,WACE,6EACA,eAACyB,EAAA,EAAO3B,MAAR,CAAc+U,OAAQ,EAAtB,UACE,cAACpT,EAAA,EAAD,CACEc,OAAK,EACL3B,MAAM,OACNV,QAAQ,QACRgL,QAAS,kBAAMuJ,EAAqB,gBAEtC,cAAChT,EAAA,EAAOqT,GAAR,IACA,cAACrT,EAAA,EAAD,CACEc,OAAK,EACL3B,MAAM,OACNV,QAAQ,WACRgL,QAAS,kBAAMuJ,EAAqB,sBAGxC,cAACM,GAAA,EAAD,IACA,sBAAKtU,MAAO,CAAEsS,UAAW,UAAzB,UACE,uEACA,cAACtR,EAAA,EAAD,CAAQyJ,QAASqJ,EAAarU,QAAQ,oBC7ChD,IAAM8U,GAAkB,CACtBpP,OAAQ,mBAGJqP,GAAsB,CAC1B1D,SAAU,WACV2D,OAAQ,KACRC,KAAM,KACNrK,MAAO,OACPsK,OAAQ,OACRxU,MAAO,SAGM,SAASyU,GAAT,GAA0D,IAA3BzV,EAA0B,EAA1BA,MAAO0V,EAAmB,EAAnBA,OAAQC,EAAW,EAAXA,QAC3D,EAA8B7F,oBAAS,GAAvC,mBAAO5N,EAAP,KAAgB0T,EAAhB,KACO9K,EAAiBC,aAAY,SAAAnG,GAAK,OAAIA,EAAMyB,QAA5CyE,cACP,EAAkCgF,oBAAS,GAApC+F,EAAP,EAAOA,UAAWrB,EAAlB,EAAkBA,aAHoD,4CAKtE,sBAAAvM,EAAA,6DACE2N,GAAW,GADb,kBAGUhM,GAAkB5J,GAH5B,sDAKI6M,KAAMxI,MAAM,KAAMyI,SALtB,uBAOI8I,GAAW,GAPf,2EALsE,kEAgBtE,sBAAA3N,EAAA,6DACE2N,GAAW,GADb,kBAGU/L,GAAqB7J,GAH/B,sDAKI6M,KAAMxI,MAAM,KAAMyI,SALtB,uBAOI8I,GAAW,GAPf,2EAhBsE,sBA4BtE,OAEE,qCACCC,GACD,cAACvB,GAAD,CAAaE,aAAcA,IAE3B,eAACvU,EAAA,EAAQC,MAAT,WACE,eAACD,EAAA,EAAD,CAAS6V,OAAK,EAAC1K,SAAS,MAAMvK,MAAO,CAAEkV,QAAS,KAAhD,UACE,cAACrW,EAAA,EAAD,CACEG,IAAK2T,iBAAA,iCAAmDxT,EAAMgW,SAAzD,QACLrT,OAAK,EACL9B,MAAOuU,KAGT,cAACnV,EAAA,EAAD,CAAS6V,OAAK,EAACG,KAAMZ,GAArB,SACE,cAAChW,EAAA,EAAKa,MAAN,UACE,cAACb,EAAA,EAAD,UACE,eAACA,EAAA,EAAKe,QAAN,WACE,cAACC,EAAA,EAAD,CACEV,KAAK,OACLW,QAASN,EAAMO,MACfM,MAAO,CAAEG,MAAO,WAElB,4BAAIG,kBAAOnB,EAAMoB,KAAM,yBACvB,2CACY,iCAAQ,cAAC,IAAD,CAAM5B,GAAE,mBAAcQ,EAAMS,SAA5B,SAAwCT,EAAMU,4BAQ5E,eAACT,EAAA,EAAD,CAASmL,SAAS,SAASzJ,UAAQ,EAAnC,WACI+T,GACA,mCACGC,EACC,cAAC9T,EAAA,EAAD,CAAQyJ,QAjEkD,2CAiEnBpJ,QAASA,EAAhD,6BAEA,cAACL,EAAA,EAAD,CACEyJ,QAASR,EApE+C,2CAoET,kBAAM0J,GAAa,IAClEtS,QAASA,EACTlB,MAAM,WAHR,+BAWL0U,GACC,cAAC7T,EAAA,EAAD,CACEvC,GAAIC,IACJC,GAAE,kBAAaQ,EAAMP,IACrBuB,MAAM,WACNc,QAAQ,QAJV,mC,cClGV,SAASoU,KACP,OAAQ,cAACjV,EAAA,EAAD,CAAMC,KAAK,SAASvB,KAAK,MAAMqB,MAAM,QAGhC,SAASmV,GAAT,GAAqC,IAAVC,EAAS,EAATA,OAExC,OACE,cAACnW,EAAA,EAAD,CAASmL,SAAS,SAASvK,MAAO,CAAEkV,QAAS,GAA7C,SACE,qBAAKlV,MAAO,CAAE2U,OAAQ,IAAKtK,MAAO,QAAlC,SACE,cAAC,KAAD,CACEmL,iBAAkB,CAAEtE,IAAK,2CACzBuE,OAAQF,EACRG,KAPK,GAIP,SAME,cAACL,GAAD,CAAQM,IAAKJ,EAAOI,IAAKC,IAAKL,EAAOK,YCdhC,SAASC,GAAT,GAAqC,IAAT1W,EAAQ,EAARA,MACvC,EAAoC8P,oBAAS,GAA7C,mBAAO6G,EAAP,KAAgBC,EAAhB,KACA,OACI,eAAC3W,EAAA,EAAQC,MAAT,WACJ,cAACD,EAAA,EAAD,CAASmL,SAAS,MAAlB,SACI,eAAC8E,EAAA,EAAD,WACI,cAACA,EAAA,EAAKC,OAAN,CAAajF,MAAO,EAApB,SACI,cAACjK,EAAA,EAAD,CAAMtB,KAAK,QAAQqB,MAAM,OAAOE,KAAK,WAEzC,cAACgP,EAAA,EAAKC,OAAN,CAAajF,MAAO,GAApB,SACI,4BAAIlL,EAAM4B,qBAItB,cAAC3B,EAAA,EAAD,CAASmL,UAAQ,EAAjB,SACI,eAAC8E,EAAA,EAAD,CAAM2G,cAAc,SAApB,UACI,cAAC3G,EAAA,EAAKC,OAAN,CAAajF,MAAO,EAApB,SACI,cAACjK,EAAA,EAAD,CAAMC,KAAK,WAAWvB,KAAK,QAAQqB,MAAM,WAE7C,cAACkP,EAAA,EAAKC,OAAN,CAAajF,MAAO,GAApB,SACI,+BAAO/J,kBAAOnB,EAAMoB,KAAM,gCAItC,cAACnB,EAAA,EAAD,CAASmL,UAAQ,EAAjB,SACI,eAAC8E,EAAA,EAAD,CAAM2G,cAAc,SAApB,UACI,cAAC3G,EAAA,EAAKC,OAAN,CAAajF,MAAO,EAApB,SACI,cAACjK,EAAA,EAAD,CAAMC,KAAK,SAASvB,KAAK,QAAQqB,MAAM,WAE3C,cAACkP,EAAA,EAAKC,OAAN,CAAajF,MAAO,GAApB,SACI,+BAAOlL,EAAMqB,MAAMC,YAEvB,cAAC4O,EAAA,EAAKC,OAAN,CAAajF,MAAO,EAApB,SACI,cAACrJ,EAAA,EAAD,CACAyJ,QAAS,kBAAMsL,GAAkBD,IACjC3V,MAAM,WACNrB,KAAK,OACLW,QAASqW,EAAU,WAAa,oBAI3CA,GACD,cAACR,GAAD,CAAkBC,OAAQpW,EAAMqB,MAAM+U,YC3C3B,SAASU,GAAT,GAAuD,IAAvBrV,EAAsB,EAAtBA,UAAWhB,EAAW,EAAXA,QACxD,OACE,qCACE,eAACR,EAAA,EAAD,CACEkT,UAAU,SACVtS,MAAO,CAAEwS,OAAQ,QACjBjI,SAAS,MACT2L,SAAO,EACP3D,UAAQ,EALV,UAQG3R,EAAUW,OARb,IAQsBX,EAAUW,OAAS,EAAI,SAAW,SARxD,YAUA,cAACnC,EAAA,EAAD,CAASmL,UAAQ,EAAjB,SACE,cAAC/L,EAAA,EAAKa,MAAN,CAAY8W,SAAO,EAACC,SAAO,EAA3B,SACGxV,EAAUC,KAAI,SAACvC,GAAD,OACb,eAACE,EAAA,EAAD,CAAMC,GAAIC,IAAMC,GAAE,mBAAcL,EAASM,IAAwBoB,MAAO,CAAE8Q,SAAU,YAApF,UACGlR,IAAYtB,EAASM,IACpB,cAACmB,EAAA,EAAD,CAAOC,MAAO,CAAC8Q,SAAU,YAAa3Q,MAAM,SAASD,OAAO,QAAQT,QAAQ,SAE9E,cAACjB,EAAA,EAAKK,MAAN,CACEC,KAAK,OACLE,IAAKV,EAASW,UAAT,qBAEP,cAACT,EAAA,EAAKe,QAAN,CAAcyW,cAAc,SAA5B,SACE,cAACxX,EAAA,EAAKgB,OAAN,CAAaf,GAAG,KAAhB,SACE,+BAAOH,EAAS+H,oBAV8B/H,EAASM,c,cCjB1D,SAASyX,GAAT,GAAsE,IAAD,IAA1C9D,gBAA0C,aAAzB9S,eAAyB,MAAf,aAAe,EACnF,OACI,cAAC6W,GAAA,EAAD,CAAQ/D,SAAUA,EAAU/H,QAAQ,EAApC,SACI,cAAC+E,EAAA,EAAD,CAAQ9P,QAASA,MCQX,SAAS8W,GAAT,GAAuC,IAAD,EAATC,EAAS,EAATA,MACpC/M,EAAWO,cACTvE,EAAgByE,aAAY,SAACnG,GAAD,OAAWA,EAAMyB,QAA7CC,YACFtG,EAAQ+K,aAAY,SAACnG,GAAD,OAAWA,EAAM5E,MAAMsX,iBACjD,EAA2BvM,aAAY,SAACnG,GAAD,OAAWA,EAAMiL,SAAhD3N,EAAR,EAAQA,QAASmC,EAAjB,EAAiBA,MACXqR,GAAc,OAAL1V,QAAK,IAALA,OAAA,EAAAA,EAAOS,YAAP,OAAmB6F,QAAnB,IAAmBA,OAAnB,EAAmBA,EAAaM,KACzC+O,EAAO,OAAG3V,QAAH,IAAGA,GAAH,UAAGA,EAAOyB,iBAAV,aAAG,EAAkB8V,MAAK,SAACtP,GAAD,OAAOA,EAAExI,MAAF,OAAS6G,QAAT,IAASA,OAAT,EAASA,EAAaM,QAQpE,OANAyJ,GAAgB,CACdC,MAAO,kBAAMzJ,GAA2BwQ,EAAMG,OAAO/X,KACrDiG,KAAM,SAAC1F,GAAD,OAAWsK,EAASK,GAAsB3K,KAChDuQ,KAAM,CAAC8G,EAAMG,OAAO/X,GAAI6K,KAGtBpI,IAAalC,IAAUqE,EAClB,cAAC6S,GAAD,CAAkB5W,QAAQ,qBAE/B+D,EAAc,cAAC,IAAD,CAAU7E,GAAG,WAG7B,eAAC0Q,EAAA,EAAD,WACE,eAACA,EAAA,EAAKC,OAAN,CAAajF,MAAO,GAApB,UACE,cAACuK,GAAD,CAAqBzV,MAAOA,EAAO2V,QAASA,EAASD,OAAQA,IAC7D,cAACgB,GAAD,CAAmB1W,MAAOA,IAC1B,cAAC6S,GAAD,CAAmB/L,QAAS9G,EAAMP,QAEpC,cAACyQ,EAAA,EAAKC,OAAN,CAAajF,MAAO,EAApB,SACE,cAAC4L,GAAD,CACErV,UAAS,OAAEzB,QAAF,IAAEA,OAAF,EAAEA,EAAOyB,UAClBhB,QAAST,EAAMS,e,8CCvCV,SAASgX,GAAT,GAAyC,IAAnBC,EAAkB,EAAlBA,MAAUC,EAAQ,mBACnD,EAAsBC,aAASD,GAA/B,mBAAOjG,EAAP,KAAcmG,EAAd,KACA,OACI,eAACC,GAAA,EAAD,CAAWzT,MAAOwT,EAAKE,WAAaF,EAAKxT,MAAzC,UACI,gCAAQqT,IACR,iDAAWhG,GAAWiG,IACrBE,EAAKE,SAAWF,EAAKxT,MAClB,cAACzD,EAAA,EAAD,CAAOkV,OAAK,EAAC9U,MAAM,MAAnB,SAA0B6W,EAAKxT,QAC/B,Q,iBCRD,SAAS2T,GAAT,GAAwC,IAAnBN,EAAkB,EAAlBA,MAAUC,EAAQ,mBAClD,EAAsBC,aAASD,GAA/B,mBAAOjG,EAAP,KAAcmG,EAAd,KACA,OACI,eAACC,GAAA,EAAD,CAAWzT,MAAOwT,EAAKE,WAAaF,EAAKxT,MAAzC,UACI,gCAAQqT,IACR,oDAAchG,GAAWiG,IACxBE,EAAKE,SAAWF,EAAKxT,MAClB,cAACzD,EAAA,EAAD,CAAOkV,OAAK,EAAC9U,MAAM,MAAnB,SAA0B6W,EAAKxT,QAC/B,Q,2BCRD,SAAS4T,GAAT,GAA2C,IAAnBP,EAAkB,EAAlBA,MAAUC,EAAQ,mBACrD,EAA+BC,aAASD,GAAxC,mBAAOjG,EAAP,KAAcmG,EAAd,KAAoBK,EAApB,KACA,OACI,eAACJ,GAAA,EAAD,CAAWzT,MAAOwT,EAAKE,WAAaF,EAAKxT,MAAzC,UACI,gCAAQqT,IACR,cAACS,GAAA,EAAD,aACIC,WAAS,EACT3N,MAAOiH,EAAMjH,OAAS,KACtBc,SAAU,SAACM,EAAGwM,GAAJ,OAAUH,EAAQI,SAASD,EAAE5N,QACvC8N,OAAQ,kBAAML,EAAQM,YAAW,KAC7Bb,IAEPE,EAAKE,SAAWF,EAAKxT,MAClB,cAACzD,EAAA,EAAD,CAAOkV,OAAK,EAAC9U,MAAM,MAAnB,SAA0B6W,EAAKxT,QAC/B,QChBT,IAAMoU,GAAe,CACxB,CAAC1G,IAAK,SAAU1E,KAAM,SAAU5C,MAAO,UACvC,CAACsH,IAAK,UAAW1E,KAAM,UAAW5C,MAAO,WACzC,CAACsH,IAAK,OAAQ1E,KAAM,OAAQ5C,MAAO,QACnC,CAACsH,IAAK,OAAQ1E,KAAM,OAAQ5C,MAAO,QACnC,CAACsH,IAAK,QAAS1E,KAAM,QAAS5C,MAAO,SACrC,CAACsH,IAAK,SAAU1E,KAAM,SAAU5C,MAAO,W,2CCF5B,SAASiO,GAAT,GAAyC,IAAnBhB,EAAkB,EAAlBA,MAAUC,EAAQ,mBAC5CgB,EAAiBC,eAAjBD,cACP,EAAsBf,aAASD,GAA/B,mBAAOjG,EAAP,KAAcmG,EAAd,KACA,OACI,eAACC,GAAA,EAAD,CAAWzT,MAAOwT,EAAKE,WAAaF,EAAKxT,MAAzC,UACI,gCAAQqT,IACR,cAAC,KAAD,uCACQhG,GACAiG,GAFR,IAGIkB,SAAWnH,EAAMjH,OAAS,IAAI9B,KAAK+I,EAAMjH,QAAW,KACpDc,SAAU,SAAAd,GAAK,OAAIkO,EAAcjH,EAAMxQ,KAAMuJ,OAEhDoN,EAAKE,SAAWF,EAAKxT,MAClB,cAACzD,EAAA,EAAD,CAAOkV,OAAK,EAAC9U,MAAM,MAAnB,SAA0B6W,EAAKxT,QAC/B,Q,+CCZD,SAASyU,GAAT,GAAoD,EAA5BpB,MAA6B,IAAtBqB,EAAqB,EAArBA,QAAYpB,EAAS,mBACjE,EAA+BC,aAASD,GAAxC,mBAAOjG,EAAP,KAAcmG,EAAd,KAAoBK,EAApB,KAgBA,OACE,cAAC,KAAD,CACEzN,MAAOiH,EAAMjH,MAAN,QACPc,SAAU,SAACd,GAAD,OAAWyN,EAAQI,SAAS,CAAEhX,QAASmJ,KACjDuO,SAAU,SAACvO,GAAD,OAlBQnJ,EAkBgBmJ,OAjBpCwO,4BAAiB3X,GACd2O,MAAK,SAACiJ,GAAD,OAAaC,qBAAUD,EAAQ,OACpCjJ,MAAK,SAACmG,GAAD,OAAY8B,EAAQI,SAAS,CAAEhX,UAAS8U,cAC7CgD,OAAM,SAAC/U,GAAD,OAAW6T,EAAQmB,SAAShV,MAJvC,IAAsB/C,GAmBlBgY,cAAeP,EAJjB,SAMG,gBAAGQ,EAAH,EAAGA,cAAeC,EAAlB,EAAkBA,YAAaC,EAA/B,EAA+BA,uBAAwBvX,EAAvD,EAAuDA,QAAvD,OACC,eAAC4V,GAAA,EAAD,CAAWzT,MAAOwT,EAAKE,WAAaF,EAAKxT,MAAzC,UACE,qCAAWkV,EAAc,aAACrY,KAAMwQ,EAAMxQ,KAAMqX,OAAQ,SAAC1M,GAAD,OAhB5D,SAAoBA,GAChB6F,EAAM6G,OAAO1M,GACR6F,EAAMjH,MAAM2L,QACb8B,EAAQI,SAAS,CAAChX,QAAS,GAAI8U,OAAQ,OAaoBsD,CAAW7N,KAAM8L,MAC3EE,EAAKE,SAAWF,EAAKxT,MACpB,cAACzD,EAAA,EAAD,CAAOkV,OAAK,EAAC9U,MAAM,MAAnB,SACG6W,EAAKxT,MAAL,UAED,MACQ,OAAXmV,QAAW,IAAXA,OAAA,EAAAA,EAAapX,QAAS,GACnB,cAACnC,EAAA,EAAD,CAASiC,QAASA,EAASrB,MAAO,CAAC8Y,UAAW,EAAGhI,SAAU,WAAYiI,OAAQ,IAAM1O,MAAO,QAA5F,SACI,cAAC9L,EAAA,EAAD,CAAMya,WAAS,EAAf,SACGL,EAAY9X,KAAI,SAAAoY,GAAU,OACvB,eAAC1a,EAAA,EAAKC,KAAN,2BAAeoa,EAAuBK,IAAtC,cACI,cAAC1a,EAAA,EAAKiB,OAAN,UACKyZ,EAAWC,oBAAoBC,WAEpC,cAAC5a,EAAA,EAAKoB,YAAN,UACKsZ,EAAWC,oBAAoBE,iCCxBjD,SAASC,GAAT,GAAkD,IAA7B7C,EAA4B,EAA5BA,MAAO9C,EAAqB,EAArBA,QAAS4F,EAAY,EAAZA,SAC5C7P,EAAWO,cACjB,EAA0CiF,oBAAS,GAAnD,mBAAOsK,EAAP,KAAsBC,EAAtB,KACA,EAAsCvK,oBAAS,GAA/C,mBAAOwK,EAAP,KAAoBC,EAApB,KACQjD,EAAkBvM,aAAY,SAACnG,GAAD,OAAWA,EAAM5E,SAA/CsX,cAER,EAA2BvM,aAAY,SAACnG,GAAD,OAAWA,EAAMiL,SAAhD3N,EAAR,EAAQA,QAASmC,EAAjB,EAAiBA,MAEjBgL,qBAAU,WACkB,iBAAtB8K,EAASvF,UACbtK,E1B8BK,CACLpG,KAAMV,M0B7BL,CAAC8G,EAAU6P,EAASvF,WAEvB,IAAM/D,EAAa,OAAGyG,QAAH,IAAGA,IAAiB,CACrC/W,MAAO,GACPyV,SAAU,GACVpU,YAAa,GACb4Y,KAAM,CACJlZ,QAAS,GACT8U,OAAQ,MAEV/U,MAAO,CACLC,QAAS,GACT8U,OAAQ,MAEVhV,KAAM,IAGF0P,EAAmBC,KAAW,CAClCxQ,MAAOwQ,OAAaC,SAAS,4BAC7BgF,SAAUjF,OAAaC,SAAS,+BAChCpP,YAAamP,OAAaC,WAC1BwJ,KAAMzJ,OAAa0J,MAAM,CACvBnZ,QAASyP,OAAaC,SAAS,sBAEjC3P,MAAO0P,OAAa0J,MAAM,CACxBnZ,QAASyP,OAAaC,SAAS,uBAEjC5P,KAAM2P,OAAaC,aAvCyC,4CA0C9D,WAAkChR,GAAlC,SAAAiI,EAAA,6DACEsS,GAAe,GACfF,GAAiB,GAFnB,kBAIU/S,GAAkBtH,GAJ5B,OAKIqa,GAAiB,GALrB,gDAOIA,GAAiB,GACjBxN,KAAMxI,MAAM,KAAMyI,SARtB,0DA1C8D,sBA6D9D,OAPAuD,GAAgB,CACdG,cAAe6G,EAAMG,OAAO/X,MAAb,OAAoB6X,QAApB,IAAoBA,OAApB,EAAoBA,EAAe7X,KAA4B,iBAAtB0a,EAASvF,SACjEtE,MAAO,kBAAMzJ,GAA2BwQ,EAAMG,OAAO/X,KACrDiG,KAAM,SAAC1F,GAAD,OAAWsK,EAASK,GAAsB3K,KAChDuQ,KAAM,CAAC8G,EAAMG,OAAO/X,GAAI6K,KAGtBpI,EAAgB,cAACgV,GAAD,CAAkB5W,QAAQ,qBAE1C+D,EAAc,cAAC,IAAD,CAAU7E,GAAG,WAG7B,eAACS,EAAA,EAAD,CAAS0B,UAAQ,EAAjB,UACE,cAAC,KAAD,CACA+Y,oBAAkB,EAChB7J,cAAeA,EACfC,iBAAkBA,EAClBG,SAAQ,uCAAE,WAAO9D,EAAP,kBAAAlF,EAAA,yDAAiBiJ,EAAjB,EAAiBA,cAAjB,UAENoG,EAFM,gC3B5BqBtX,E2B+BMmN,E3B9BpC7H,GAAGkB,WAAW,UAAUO,IAAI/G,EAAMP,IAAI8H,OAAOvH,G2B2BpC,6CAIIgH,GAAoBmG,GAJxB,OAKN+D,GAAc,GACdqD,EAAQ7G,KAAK,WANP,kDAQNb,KAAMxI,MAAM,KAAMyI,SAClBoE,GAAc,GATR,kC3B5BX,IAAgClR,I2B4BrB,qBAAF,wDAJV,SAiBG,gBAAGsR,EAAH,EAAGA,aAAcqJ,EAAjB,EAAiBA,MAAOnJ,EAAxB,EAAwBA,QAASrE,EAAjC,EAAiCA,OAAjC,OACC,eAAC,KAAD,CAAMsE,UAAU,UAAhB,UACE,cAACpR,EAAA,EAAD,CAAQC,QAAQ,kBAChB,cAACmX,GAAD,CAAavW,KAAK,QAAQ2Q,YAAY,gBACtC,cAACoG,GAAD,CACE/W,KAAK,WACL2Q,YAAY,WACZkH,QAASN,KAEX,cAACT,GAAD,CAAY9W,KAAK,cAAc2Q,YAAY,cAAcD,KAAM,IAC/D,cAACvR,EAAA,EAAD,CAAQC,QAAQ,2BAChB,cAACwY,GAAD,CAAc5X,KAAK,OAAO2Q,YAAY,SACtC,cAACiH,GAAD,CACE5X,KAAK,QACL8B,UAAWmK,EAAOqN,KAAKpE,OACvBvE,YAAY,QACZkH,QAAS,CACPoB,SAAU,IAAIS,OAAOC,KAAKC,OAAO3N,EAAOqN,KAAKpE,QAC7C2E,OAAQ,IACRC,MAAO,CAAC,oBAGZ,cAACtC,GAAD,CACExX,KAAK,OACL+Z,gBAAgB,aAChBC,WAAW,QACXC,gBAAc,EACdC,YAAY,OACZC,WAAW,sBACXC,aAAa,QAEdhE,GACC,cAACzV,EAAA,EAAD,CACEK,QAASkY,EACTlW,KAAK,SACLpC,QAAQ,OACRd,MAAOsW,EAAc3W,YAAc,QAAU,MAC7CL,QACEgX,EAAc3W,YACV,mBACA,eAEN2K,QAAS,kBAAMiP,GAAe,MAIlC,cAAC1Y,EAAA,EAAD,CACEK,QAASoP,EACTtO,UAAWwO,IAAYmJ,GAASrJ,EAChCpN,KAAK,SACLpC,QAAQ,QACRyZ,UAAQ,EACRjb,QAAQ,WAGV,cAACuB,EAAA,EAAD,CACEmB,SAAUsO,EACVhS,GAAIC,IACJC,GAAG,UACH0E,KAAK,SACLpC,QAAQ,QACRxB,QAAQ,iBAKhB,cAACkb,GAAA,EAAD,CACElb,SACe,OAAbgX,QAAa,IAAbA,OAAA,EAAAA,EAAe3W,aACX,iDACA,6CAENyQ,KAAMkJ,EACNmB,SAAU,kBAAMlB,GAAe,IAC/BmB,UAAW,kBA9J6C,2CA8JvCC,CAAmBrE,SCpL7B,SAASsE,GAAT,GAA8B,IAAXrH,EAAU,EAAVA,QAC9B,OACI,cAACtU,EAAA,EAAD,CAASmT,UAAQ,EAACD,UAAU,SAASlI,UAAQ,EAACwG,UAAU,WAAxD,SACI,eAACoK,EAAA,EAAD,WACI,cAACxb,EAAA,EAAD,CAAQf,GAAG,KAAK8T,UAAQ,EAAxB,wBAIA,eAACvR,EAAA,EAAD,CAAQyJ,QAAS,kBAAMiJ,EAAQ7G,KAAK,YAAY/N,KAAK,OAAOyT,UAAQ,EAApE,wBAEI,cAACnS,EAAA,EAAD,CAAMC,KAAK,cAAckS,UAAQ,Y,cCLtC,SAAS0I,KAEtB,IAAOC,EAAsBhR,aAAY,SAAAnG,GAAK,OAAIA,EAAMoD,WAAjD+T,mBACDxH,EAAUyH,cAHqB,4CAKrC,sBAAA/T,EAAA,sEAEIsM,EAAQ7G,KAAK,KAFjB,SAGU3B,KAHV,sDAMIc,KAAMxI,MAAM,KAAMyI,SANtB,yDALqC,sBAerC,OACE,eAAC9B,EAAA,EAAK3L,KAAN,CAAWsS,SAAS,QAApB,UACE,cAACjS,EAAA,EAAD,CAAOuc,QAAM,EAACC,OAAO,QAAQrc,KAAuB,OAAlBkc,QAAkB,IAAlBA,OAAA,EAAAA,EAAoBjc,WAAY0T,mCAClE,cAAC2I,GAAA,EAAD,CAAUC,SAAS,WAAW/O,KAAI,OAAE0O,QAAF,IAAEA,OAAF,EAAEA,EAAoB7U,YAAxD,SACA,eAACiV,GAAA,EAASnR,KAAV,WACI,cAACmR,GAAA,EAAS9c,KAAV,CAAeC,GAAIC,IAAMC,GAAG,eAAe6N,KAAK,eAAelC,KAAK,SACpE,cAACgR,GAAA,EAAS9c,KAAV,CAAeC,GAAIC,IAAMC,GAAE,0BAAcuc,QAAd,IAAcA,OAAd,EAAcA,EAAoBtc,IAAM4N,KAAK,aAAalC,KAAK,SAC1F,cAACgR,GAAA,EAAS9c,KAAV,CAAeC,GAAIC,IAAMC,GAAG,WAAW6N,KAAK,aAAalC,KAAK,aAC9D,cAACgR,GAAA,EAAS9c,KAAV,CACAiM,QAxB6B,2CAyB7B+B,KAAK,WACLlC,KAAK,kBC7BA,SAASkR,GAAT,GAA2C,EAAnBC,iBAAoB,IACnDhS,EAAWO,cACjB,OACE,eAACG,EAAA,EAAK3L,KAAN,CAAWsS,SAAS,QAApB,UACE,cAAC9P,EAAA,EAAD,CAAQyJ,QAAS,kBAAMhB,EAAS2J,GAAU,CAACG,UAAW,gBAAgB0B,OAAK,EAAC1C,UAAQ,EAAC9S,QAAQ,UAC7F,cAACuB,EAAA,EAAD,CACAyJ,QAAS,kBAAMhB,EAAS2J,GAAU,CAACG,UAAW,mBAC5C0B,OAAK,EACL1C,UAAQ,EACR9S,QAAQ,WACRO,MAAO,CAAE0b,WAAY,cCRd,SAASC,GAAT,GAAiC,EAAfC,YAAgB,IAExC3R,EAAiBC,aAAY,SAAAnG,GAAK,OAAIA,EAAMyB,QAA5CyE,cAIP,OACE,cAACE,EAAA,EAAD,CAAMoI,UAAQ,EAACsJ,MAAM,MAArB,SACE,eAACb,EAAA,EAAD,WACE,eAAC7Q,EAAA,EAAK3L,KAAN,CAAWC,GAAIqd,IAASC,OAAK,EAACpd,GAAG,IAAIqd,QAAM,EAA3C,UACE,qBAAKhd,IAAK2T,iCAA6CsJ,IAAI,OAAOjc,MAAO,CAAEkc,YAAa,MAD1F,gBAIA,cAAC/R,EAAA,EAAK3L,KAAN,CAAWC,GAAIqd,IAASnd,GAAG,UAAU0B,KAAK,WAEzC4J,GACC,cAACE,EAAA,EAAK3L,KAAN,CAAWC,GAAIqd,IAASnd,GAAG,eAA3B,SACE,cAACqC,EAAA,EAAD,CAAQuR,UAAQ,EAAEpS,MAAM,GAAGV,QAAQ,mBAGtCwK,EACC,cAACgR,GAAD,IAEA,cAACO,GAAD,SC3BV,IAAMW,GAAoB,SAAC,GAAD,IAAG3P,EAAH,EAAGA,KAAH,OAAc,8BAAMA,KAE/B,SAAS4P,GAAT,GAA8B,IAAZ9C,EAAW,EAAXA,SAG/B,OAEE,aADA,CACA,OAAKtZ,MAAO,CAAE2U,OAAQ,QAAStK,MAAO,QAAtC,SACE,cAAC,KAAD,CACEmL,iBAAkB,CAAEtE,IAAK,2CACzBuE,OAAQ6D,EAAS7D,OACjBC,KAAM4D,EAAS5D,KAHjB,SAKE,cAAC,GAAD,CAAmBC,IAAK2D,EAAS7D,OAAOE,IAAKC,IAAK0D,EAAS7D,OAAOG,IAAKpJ,KAAK,kBCVrE,SAAS6P,GAAT,GAAwC,IAAfC,EAAc,EAAdA,YACtC,EAA8BrN,mBAAS,IAAvC,mBAAOxO,EAAP,KAAgB8b,EAAhB,KAiBA,OACE,cAAC,KAAD,CACE3S,MAAOnJ,EACPiK,SAlBJ,SAAsBjK,GACpB8b,EAAW9b,IAkBT0X,SAfJ,SAAsB1X,GACpB2X,4BAAiB3X,GACd2O,MAAK,SAACiJ,GAAD,OAAaC,qBAAUD,EAAQ,OACpCjJ,MAAK,SAACmG,GACL9R,QAAQC,IAAI,UAAW6R,GACvB+G,EAAY/G,MAEbgD,OAAM,SAAC/U,GAAD,OAAWC,QAAQD,MAAM,QAASA,MAC3C+Y,EAAW9b,IAIX,SAKG,gBAAGiY,EAAH,EAAGA,cAAeC,EAAlB,EAAkBA,YAAaC,EAA/B,EAA+BA,uBAAwBvX,EAAvD,EAAuDA,QAAvD,OACC,gCACE,qCACMqX,EAAc,CAChB1H,YAAa,oBACbJ,UAAW,4BAGf,sBAAKA,UAAU,kCAAf,UACGvP,GAAW,6CACXsX,EAAY9X,KAAI,SAACoY,GAChB,IAAMrI,EAAYqI,EAAWzO,OACzB,0BACA,kBAEExK,EAAQiZ,EAAWzO,OACrB,CAAEgS,gBAAiB,UAAWC,OAAQ,WACtC,CAAED,gBAAiB,UAAWC,OAAQ,WAC1C,OACE,+CACM7D,EAAuBK,EAAY,CACrCrI,YACA5Q,WAHJ,aAME,+BAAOiZ,EAAWlY,6BCnD7B,IAAM2b,GAAoB,oBACpBC,GAAoB,oBAoCjC,IAAM/Y,GAAe,CACnBiB,KAAM,IAGO,SAAS+X,KAAoD,IAAxC7Y,EAAuC,uDAA/BH,GAA+B,yCAAhBP,EAAgB,EAAhBA,KAAMM,EAAU,EAAVA,QAC/D,OAAQN,GACN,KAAKqZ,GACH,OAAO,2BACF3Y,GADL,IAEEc,KAAMd,EAAMc,KAAOlB,IAEvB,KAAKgZ,GACH,OAAO,2BACF5Y,GADL,IAEEc,KAAMd,EAAMc,KAAOlB,IAEvB,QACE,OAAOI,GClDE,SAAS8Y,KACtB,IAAMpT,EAAWO,cACjB,EAA4BiF,mBAAS,MAArC,mBAAO6N,EAAP,KAAeC,EAAf,KACMlY,EAAOqF,aAAY,SAACnG,GAAD,OAAWA,EAAMiZ,KAAKnY,QACvCxD,EAAY6I,aAAY,SAACnG,GAAD,OAAWA,EAAMiL,SAAzC3N,QAQR,EAAgC4N,mBAPX,CACnBwG,OAAQ,CACNE,IAAK,YACLC,IAAK,aAEPF,KAAM,KAER,mBAAO4D,EAAP,KAAiBgD,EAAjB,KAMA,OACE,qCACE,6CACA,+CAAkBzX,EAAlB,OACA,cAAC7D,EAAA,EAAD,CACEX,KAAK,YACLgB,QAASA,GAAsB,cAAXyb,EACpBrS,QAAS,SAACO,GDxBX,IAAmBiS,ECyBhBxT,GDzBgBwT,ECyBG,GDxBzB,uCAAO,WAAexT,GAAf,SAAArC,EAAA,6DACLqC,EAASrG,KADJ,kBAGGiO,GAAM,KAHT,OAIL5H,EAAS,CAACpG,KAAMqZ,GAAmB/Y,QAASsZ,IAC5CxT,EAASnG,KALJ,gDAQHmG,EAASlG,GAAiB,EAAD,KARtB,yDAAP,wDCyBMwZ,EAAU/R,EAAE8R,OAAOzc,OAErBZ,QAAQ,YACRU,MAAM,UAER,cAACa,EAAA,EAAD,CACEX,KAAK,YACLgB,QAASA,GAAsB,cAAXyb,EACpBrS,QAAS,SAACO,GDnBX,IAAmBiS,ECoBhBxT,GDpBgBwT,ECoBG,GDnB3B,uCAAO,WAAexT,GAAf,SAAArC,EAAA,6DACLqC,EAASrG,KADJ,kBAGGiO,GAAM,KAHT,OAIL5H,EAAS,CAACpG,KAAMsZ,GAAmBhZ,QAASsZ,IAC5CxT,EAASnG,KALJ,gDAQHmG,EAASlG,GAAiB,EAAD,KACzByI,KAAMxI,MAAN,MATG,yDAAP,wDCoBQuZ,EAAU/R,EAAE8R,OAAOzc,OAErBZ,QAAQ,YACRU,MAAM,QAER,cAACa,EAAA,EAAD,CACEyJ,QAAS,kBACPhB,EAAS2J,GAAU,CAAEG,UAAW,YAAaC,WAAY,CAAE3O,YAE7DpF,QAAQ,aACRU,MAAM,SAER,sBAAKH,MAAO,CAAE8Y,UAAW,IAAzB,UACE,cAACuD,GAAD,CAAgBC,YApCtB,SAA2B/G,GACzB+G,EAAY,2BAAKhD,GAAN,IAAgB7D,OAAQ,CAAEE,IAAKJ,EAAOI,IAAKC,IAAKL,EAAOK,WAoC9D,cAACwG,GAAD,CAAS9C,SAAUA,UCtDZ,SAAS4D,GAAT,GAAmD,IAA3BC,EAA0B,EAA1BA,SAAUre,EAAgB,EAAhBA,KAAMkd,EAAU,EAAVA,OAC/CvS,EAAWO,cACjB,OACE,eAACkK,GAAA,EAAD,CAAO3D,MAAM,EAAM4D,QAAS,kBAAM1K,EAAS4J,OAAevU,KAAMA,EAAhE,UACGkd,GAAU,cAAC9H,GAAA,EAAM1U,OAAP,UAAewc,IAC1B,cAAC9H,GAAA,EAAM3U,QAAP,UAAgB4d,OCPP,SAASC,GAAT,GAA4B,IAARvY,EAAO,EAAPA,KAC/B,OACI,cAACqY,GAAD,CAAcpe,KAAK,OAAOkd,OAAO,aAAjC,SACI,gDAAmBnX,OCAhB,SAASwY,KACpB,IAAM5T,EAAWO,cAEjB,SAASsT,EAAkB5R,GACvBjC,EAAS4J,MnC0BV,SAAP,4BmCzBQkK,CAAY7R,GAEhB,OACI,qCACI,cAAC1K,EAAA,EAAD,CAAQyJ,QAAS,kBAAM6S,EAAkB,aAAahT,KAAK,WAAWxI,OAAK,EAAC3B,MAAM,WAAWH,MAAO,CAACwd,aAAc,IAAK/d,QAAQ,wBAChI,cAACuB,EAAA,EAAD,CAAQyJ,QAAS,kBAAM6S,EAAkB,WAAWhT,KAAK,SAASxI,OAAK,EAAC3B,MAAM,cAAcV,QAAQ,yBCLjG,SAASge,KACpB,IAAMhU,EAAWO,cACjB,OACI,cAACkT,GAAD,CAAcpe,KAAK,OAAOkd,OAAO,uBAAjC,SACI,cAAC,KAAD,CACIhM,cAAe,CAACnJ,MAAO,GAAI0E,SAAU,IACrC0E,iBAAkBC,KAAY,CAC1BrJ,MAAOqJ,OAAaC,WAAWtJ,QAC/B0E,SAAU2E,OAAaC,aAE3BC,SAAQ,uCAAE,WAAO9D,EAAP,oBAAAlF,EAAA,6DAAgBiJ,EAAhB,EAAgBA,cAAeqN,EAA/B,EAA+BA,UAA/B,kBpCTMrS,EoCWciB,EpCVrCtI,GACJwB,OACAmY,2BAA2BtS,EAAMxE,MAAOwE,EAAME,UoCMzB,OAGF8E,GAAc,GACd5G,EAAS4J,MAJP,gDAOFqK,EAAU,CAAClY,KAAM,8BACjB6K,GAAc,GARZ,kCpCTnB,IAAyBhF,IoCSN,oBAAF,wDANZ,SAoBS,gBAAEoF,EAAF,EAAEA,aAAcE,EAAhB,EAAgBA,QAASmJ,EAAzB,EAAyBA,MAAO8D,EAAhC,EAAgCA,OAAhC,OACG,eAAC,KAAD,CAAMhN,UAAU,UAAhB,UACI,cAACgG,GAAD,CAAavW,KAAK,QAAQ2Q,YAAY,kBACtC,cAAC4F,GAAD,CAAavW,KAAK,WAAW2Q,YAAY,WAAW3N,KAAK,aACxDua,EAAOpY,MAAQ,cAACzF,EAAA,EAAD,CAAOkV,OAAK,EAAC9U,MAAM,MAAMH,MAAO,CAACwd,aAAc,IAAK/d,QAASme,EAAOpY,OACpF,cAACxE,EAAA,EAAD,CACIK,QAASoP,EACTtO,UAAWwO,IAAYmJ,GAASrJ,EAChCpN,KAAK,SACLvB,OAAK,EACLhD,KAAK,QACLqB,MAAM,WACNV,QAAQ,UAEZ,cAAC6U,GAAA,EAAD,CAAS3T,YAAU,EAAnB,gBACA,cAAC0c,GAAD,YCvCb,SAASQ,KACpB,IAAMpU,EAAWO,cACjB,OACI,cAACkT,GAAD,CAAcpe,KAAK,OAAOkd,OAAO,yBAAjC,SACI,cAAC,KAAD,CACIhM,cAAe,CAAC3J,YAAa,GAAIQ,MAAO,GAAI0E,SAAU,IACtD0E,iBAAkBC,KAAY,CAC1B7J,YAAa6J,OAAaC,WAC1BtJ,MAAOqJ,OAAaC,WAAWtJ,QAC/B0E,SAAU2E,OAAaC,aAE3BC,SAAQ,uCAAE,WAAO9D,EAAP,oBAAAlF,EAAA,6DAAgBiJ,EAAhB,EAAgBA,cAAeqN,EAA/B,EAA+BA,UAA/B,kBAEItS,GAAmBkB,GAFvB,OAGF+D,GAAc,GACd5G,EAAS4J,MAJP,gDAOFqK,EAAU,CAAClY,KAAM,KAAMyG,UACvBoE,GAAc,GARZ,yDAAF,wDAPZ,SAqBS,gBAAEI,EAAF,EAAEA,aAAcE,EAAhB,EAAgBA,QAASmJ,EAAzB,EAAyBA,MAAO8D,EAAhC,EAAgCA,OAAhC,OACG,eAAC,KAAD,CAAMhN,UAAU,UAAhB,UACI,cAACgG,GAAD,CAAavW,KAAK,cAAc2Q,YAAY,iBAC5C,cAAC4F,GAAD,CAAavW,KAAK,QAAQ2Q,YAAY,kBACtC,cAAC4F,GAAD,CAAavW,KAAK,WAAW2Q,YAAY,WAAW3N,KAAK,aACxDua,EAAOpY,MAAQ,cAACzF,EAAA,EAAD,CAAOkV,OAAK,EAAC9U,MAAM,MAAMH,MAAO,CAACwd,aAAc,IAAK/d,QAASme,EAAOpY,OACpF,cAACxE,EAAA,EAAD,CACIK,QAASoP,EACTtO,UAAWwO,IAAYmJ,GAASrJ,EAChCpN,KAAK,SACLvB,OAAK,EACLhD,KAAK,QACLqB,MAAM,WACNV,QAAQ,aAEZ,cAAC6U,GAAA,EAAD,CAAS3T,YAAU,EAAnB,gBACA,cAAC0c,GAAD,YC9Cb,SAASS,KACpB,IAMIC,EANEC,EAAc,CAChBZ,aACAK,aACAI,iBAEEI,EAAe/T,aAAY,SAAAnG,GAAK,OAAIA,EAAMma,UAEhD,GAAID,EAAc,CACd,IAAO1K,EAAyB0K,EAAzB1K,UAAWC,EAAcyK,EAAdzK,WACZ2K,EAAiBH,EAAYzK,GACnCwK,EAAgB,cAACI,EAAD,eAAoB3K,IAGxC,OAAO,+BAAOuK,ICfH,SAASK,KACpB,IAAO5a,EAAS0G,aAAY,SAACnG,GAAD,OAAWA,EAAMiL,SAAtCxL,MAEP,OACI,eAACpE,EAAA,EAAD,CAAS4R,aAAW,EAApB,UACI,cAACxR,EAAA,EAAD,CAAQ8S,UAAW,SAAS7S,SAAc,OAAL+D,QAAK,IAALA,OAAA,EAAAA,EAAOyI,UAAW,6BACvD,cAACjL,EAAA,EAAD,CAAQvC,GAAIC,IAAMC,GAAG,UAAUuX,SAAO,EAAClW,MAAO,CAAC8Y,UAAW,IAAKrZ,QAAQ,6BCFpE,SAAS4e,KACtB,IAAQ5Y,EAAgByE,aAAY,SAACnG,GAAD,OAAWA,EAAMyB,QAA7CC,YAER,OACE,eAACrG,EAAA,EAAD,WACE,cAACI,EAAA,EAAD,CAAQ8e,UAAQ,EAACxf,KAAK,QAAQW,QAAQ,YACV,aAA3BgG,EAAY8Y,YACX,qCACE,cAAC/e,EAAA,EAAD,CAAQW,MAAM,OAAOqe,KAAG,EAAC/e,QAAQ,oBACjC,sEACA,cAAC,KAAD,CACEuQ,cAAe,CAAEyO,aAAc,GAAIC,aAAc,IACjDzO,iBAAkBC,KAAW,CAC3BuO,aAAcvO,OAAaC,SAAS,wBACpCuO,aAAcxO,OAAayO,MACzB,CAACzO,KAAQ,gBAAiB,MAC1B,4BAGJE,SAAQ,uCAAE,WAAO9D,EAAP,oBAAAlF,EAAA,6DAAiBiJ,EAAjB,EAAiBA,cAAeqN,EAAhC,EAAgCA,UAAhC,kBxC2BarS,EwCzBMiB,ExC0B1BtI,GAASwB,OAAOC,YACjBmZ,eAAevT,EAAMoT,cwC7Bb,sDAINf,EAAU,CAAElY,KAAM,KAAMyG,UAJlB,uBAMNoE,GAAc,GANR,8CxC2Bf,IAA4BhF,IwC3Bb,yBAAF,wDATV,SAmBG,gBAAGuS,EAAH,EAAGA,OAAQnN,EAAX,EAAWA,aAAcE,EAAzB,EAAyBA,QAASmJ,EAAlC,EAAkCA,MAAlC,OACC,eAAC,KAAD,CAAMlJ,UAAU,UAAhB,UACE,cAACgG,GAAD,CACEvW,KAAK,eACLgD,KAAK,WACL2N,YAAY,iBAEd,cAAC4F,GAAD,CACEvW,KAAK,eACLgD,KAAK,WACL2N,YAAY,qBAEb4M,EAAOpY,MACN,cAACzF,EAAA,EAAD,CACEkV,OAAK,EACL9U,MAAM,MACNH,MAAO,CAAEwd,aAAc,IACvB/d,QAASme,EAAOpY,OAGpB,cAACxE,EAAA,EAAD,CACEqC,KAAK,SACLrD,MAAQ,CAAE6e,QAAS,SACnB1c,UAAWwO,GAAWF,IAAiBqJ,EACvCzY,QAASoP,EACT3R,KAAK,QACL4b,UAAQ,EACRjb,QAAQ,6BAOQ,iBAA3BgG,EAAY8Y,YACX,qCACE,cAAC/e,EAAA,EAAD,CAAQW,MAAM,OAAOqe,KAAG,EAAC/e,QAAQ,qBACjC,8EACA,cAACuB,EAAA,EAAD,CACEsJ,KAAK,WACLnK,MAAM,WACN1B,GAAIC,IACJC,GAAG,uBACHc,QAAQ,sBAIc,eAA3BgG,EAAY8Y,YACX,qCACE,cAAC/e,EAAA,EAAD,CAAQW,MAAM,OAAOqe,KAAG,EAAC/e,QAAQ,mBACjC,4EACA,cAACuB,EAAA,EAAD,CACEsJ,KAAK,SACLnK,MAAM,cACN1B,GAAIC,IACJC,GAAG,qBACHc,QAAQ,uB,cCrFL,SAASqf,GAAT,GAAmC,IAAZ3X,EAAW,EAAXA,QACpC,OACE,cAAC,KAAD,CACE6I,cAAe,CACb3J,YAAac,EAAQd,YACrBtF,YAAaoG,EAAQpG,aAAe,IAEtCkP,iBAAkBC,KAAW,CAC3B7J,YAAa6J,OAAaC,aAE5BC,SAAQ,uCAAE,WAAO9D,EAAP,kBAAAlF,EAAA,6DAAgBiJ,EAAhB,EAAgBA,cAAhB,kBAEEnJ,GAAkBoF,GAFpB,sDAIFN,KAAMxI,MAAM,KAAMyI,SAJhB,uBAMFoE,GAAc,GANZ,0EAAF,wDARV,SAkBG,gBAAGI,EAAH,EAAGA,aAAcE,EAAjB,EAAiBA,QAASmJ,EAA1B,EAA0BA,MAA1B,OACC,eAAC,KAAD,CAAMlJ,UAAU,UAAhB,UACE,cAACgG,GAAD,CAAavW,KAAK,cAAc2Q,YAAY,iBAC5C,cAACmG,GAAD,CAAY9W,KAAK,cAAc2Q,YAAY,gBAC3C,cAAChQ,EAAA,EAAD,CACEK,QAASoP,EACTtO,SAAUsO,IAAiBE,IAAYmJ,EACvC7Y,QAAQ,QACRoC,KAAK,SACLvE,KAAK,QACL4b,UAAQ,EACRjb,QAAQ,yBCnCL,SAASsf,GAAT,GAA+C,IAA3B5X,EAA0B,EAA1BA,QAAS6X,EAAiB,EAAjBA,cAC1C,EAAgC/P,oBAAS,GAAzC,mBAAOgQ,EAAP,KAAiBC,EAAjB,KACA,OACE,cAACC,GAAA,EAAIC,KAAL,UACE,eAAC/P,EAAA,EAAD,WACE,eAACA,EAAA,EAAKC,OAAN,CAAajF,MAAO,GAApB,UACE,cAAC7K,EAAA,EAAD,CACEyB,QAAQ,OACRqJ,KAAK,OACL7K,QAAO,gBAAW0H,EAAQd,eAE3B2Y,GACD,cAAChe,EAAA,EAAD,CACEyJ,QAAS,kBAAMyU,GAAaD,IAC5Bhe,QAAQ,QACRgU,OAAK,EACLxV,QAASwf,EAAW,SAAW,YAGnC,cAAC5P,EAAA,EAAKC,OAAN,CAAajF,MAAO,GAApB,SACG4U,EACC,cAACH,GAAD,CAAa3X,QAASA,IAEtB,mCACE,sBAAKnH,MAAO,CAAEwd,aAAc,IAA5B,UACE,mDACgBld,kBAAO6G,EAAQL,UAAW,eAAgB,OAE1D,8BAAMK,EAAQpG,aAAe,mB,cC5B9B,SAASse,GAAT,GAAsD,IAArB5P,EAAoB,EAApBA,MAAO5K,EAAa,EAAbA,KAAM6K,EAAO,EAAPA,KACnDjG,EAAWO,cAEjBwE,qBAAU,WACN/E,EAASrG,KACT,IAAMwM,EAAcH,IAAQI,YACxB,SAAAlL,GACI,IAAMyD,EAAOzD,EAASyD,KAAKvH,KAAI,SAAAqF,GAAG,OAAIxB,GAAiBwB,MACvDrB,EAAKuD,GACLqB,EAASnG,QAEb,SAAAE,GAAK,OAAIiG,EAASlG,GAAiBC,OAEvC,OAAO,WACHoM,OAELF,GCZQ,SAAS4P,GAAT,GAAiC,IAAZnY,EAAW,EAAXA,QAC5BsC,EAAWO,cACjB,EAAkCiF,mBAAS,GAA3C,mBAAOsQ,EAAP,KAAkBC,EAAlB,KACQC,EAAkBvV,aAAY,SAACnG,GAAD,OAAWA,EAAMoD,WAA/CsY,cACApe,EAAY6I,aAAY,SAACnG,GAAD,OAAWA,EAAMiL,SAAzC3N,QAERge,GAAuB,CACrB5P,MAAO,kB/CgOJ,SAA4B8P,EAAW1W,GAC5C,IAAInD,EAAYjB,GAAGkB,WAAW,UACxBkC,EAAQ,IAAIC,KAClB,OAAQyX,GACN,KAAK,EACH,OAAO7Z,EACJI,MAAM,cAAe,iBAAkB+C,GACvC/C,MAAM,OAAQ,KAAM+B,GACpBjC,QAAQ,OAAQ,QACrB,KAAK,EACH,OAAOF,EAAUI,MAAM,UAAW,KAAM+C,GAASjD,QAAQ,QAC3D,QACE,OAAOF,EACJI,MAAM,cAAe,iBAAkB+C,GACvC/C,MAAM,OAAQ,KAAM+B,GACpBjC,QAAQ,S+C/OA8Z,CAAmBH,EAAWpY,EAAQvI,KACnDiG,KAAM,SAAC1D,GAAD,OAAYsI,E1CMf,SAA4BtI,GAC/B,MAAO,CACHkC,KAAMgK,GACN1J,QAASxC,G0CTcwe,CAAmBxe,KAC9CuO,KAAM,CAACjG,EAAU8V,EAAWpY,EAAQvI,MAQtC,OACE,cAACugB,GAAA,EAAIC,KAAL,CAAU/d,QAASA,EAAnB,SACE,eAACgO,EAAA,EAAD,WACE,cAACA,EAAA,EAAKC,OAAN,CAAajF,MAAO,GAApB,SACE,cAAC7K,EAAA,EAAD,CAAQyB,QAAQ,OAAOqJ,KAAK,WAAW7K,QAAQ,aAEjD,eAAC4P,EAAA,EAAKC,OAAN,CAAajF,MAAO,GAApB,UACE,cAAC8U,GAAA,EAAD,CACES,YAAa,SAAC5U,EAAGnG,GAAJ,OAAa2a,EAAa3a,EAAKgb,cAC5CC,MAdI,CACZ,CAAEC,SAAU,gBAAiBC,KAAM,CAAE9O,IAAK,WAC1C,CAAE6O,SAAU,cAAeC,KAAM,CAAE9O,IAAK,SACxC,CAAE6O,SAAU,iBAAkBC,KAAM,CAAE9O,IAAK,aAYnC+O,KAAM,CAAEvf,WAAW,EAAM6a,UAAU,KAGrC,cAAC2E,GAAA,EAAK7gB,MAAN,CAAY8gB,YAAa,EAAGngB,MAAO,CAAE8Y,UAAW,IAAhD,SACG2G,EAAc5e,KAAI,SAAC1B,GAAD,OACjB,eAAC+gB,GAAA,EAAD,CAAMzhB,GAAIC,IAAMC,GAAE,kBAAaQ,EAAMP,IAArC,UACE,cAACC,EAAA,EAAD,CACEG,IAAG,iCAA4BG,EAAMgW,SAAlC,QACHnV,MAAO,CAAE+B,UAAW,IAAKqe,UAAW,WAEtC,eAACF,GAAA,EAAK3gB,QAAN,WACE,cAAC2gB,GAAA,EAAK1gB,OAAN,CAAaC,QAASN,EAAMO,MAAO4S,UAAU,WAC7C,eAAC4N,GAAA,EAAKG,KAAN,CAAW/N,UAAU,SAArB,UACE,8BAAMhS,kBAAOnB,EAAMoB,KAAM,iBACzB,8BAAMD,kBAAOnB,EAAMoB,KAAM,qBATiBpB,EAAMP,iBCrCrD,SAAS0hB,GAAT,GAAiC,IAAXnZ,EAAU,EAAVA,QACjC,OACI,eAAC+Y,GAAA,EAAD,CAAMzhB,GAAKC,IAAMC,GAAE,mBAAcwI,EAAQvI,IAAzC,UACI,cAACC,EAAA,EAAD,CAAOG,IAAKmI,EAAQlI,UAAY0T,mCAChC,cAACuN,GAAA,EAAK3gB,QAAN,UACI,cAAC2gB,GAAA,EAAK1gB,OAAN,CAAaC,QAAS0H,EAAQd,mBCE/B,SAASka,GAAT,GAA+C,IAAvBpZ,EAAsB,EAAtBA,QAASoY,EAAa,EAAbA,UACxC9V,EAAWO,cACjB,EAAkCE,aAAY,SAACnG,GAAD,OAAWA,EAAMoD,WAAvDqZ,EAAR,EAAQA,WAAYC,EAApB,EAAoBA,UAcpB,OAZApB,GAAuB,CACrB5P,MACgB,IAAd8P,EACI,kBjDmS6BhW,EiDnSApC,EAAQvI,GjDoStC6F,GAAGkB,WAAW,aAAaO,IAAIqD,GAAW5D,WAAW,iBADvD,IAAgC4D,GiDlS7B,kBjDsS6BA,EiDtSApC,EAAQvI,GjDuStC6F,GAAGkB,WAAW,aAAaO,IAAIqD,GAAW5D,WAAW,iBADvD,IAAgC4D,GiDrSnC1E,KAAM,SAACA,GAAD,OAEA4E,EADU,IAAd8V,E5CSC,SAA2BkB,GAC9B,MAAO,CACHpd,KAAMiK,GACN3J,QAAS8c,G4CXEC,CAAkB7b,G5Ce9B,SAA4B2b,GAC/B,MAAO,CACHnd,KAAMkK,GACN5J,QAAS6c,G4CjBEG,CAAmB9b,KAClC6K,KAAM,CAAC6P,EAAW9V,KAIlB,cAAC0V,GAAA,EAAIC,KAAL,UACE,eAAC/P,EAAA,EAAD,WACE,cAACA,EAAA,EAAKC,OAAN,CAAajF,MAAO,GAApB,SACE,cAAC7K,EAAA,EAAD,CAAQyB,QAAQ,OAAOqJ,KAAK,OAAO7K,QAAuB,IAAd8f,EAAkB,YAAc,gBAE9E,cAAClQ,EAAA,EAAKC,OAAN,CAAajF,MAAO,GAApB,SACE,eAAC6V,GAAA,EAAK7gB,MAAN,CAAY8gB,YAAa,EAAzB,UACiB,IAAdZ,GAAmBkB,EAAU5f,KAAI,SAAAsG,GAAO,OACvC,cAACmZ,GAAD,CAAanZ,QAASA,GAAcA,EAAQvI,OAE/B,IAAd2gB,GAAmBiB,EAAW3f,KAAI,SAAAsG,GAAO,OACxC,cAACmZ,GAAD,CAAanZ,QAASA,GAAcA,EAAQvI,iB,gCCnC3C,SAASgiB,GAAT,GAAyD,IAA3BC,EAA0B,EAA1BA,SAAUC,EAAgB,EAAhBA,aAC/CC,EAAUC,iBAAO,MAUvB,OACE,cAAC,KAAD,CACE1Y,IAAKyY,EACL/hB,IAAK8hB,EACL9gB,MAAO,CAAE2U,OAAQ,IAAKtK,MAAO,QAC7B4W,YAAa,EACbC,QAAQ,eACRC,QAAQ,EACRC,SAAU,EACVC,SAAS,OACTC,UAAU,EACVC,gBAAgB,EAChBC,kBAAkB,EAClBC,KAtBJ,WACoD,qBAAvCV,EAAQW,QAAQC,oBAG3BZ,EAAQW,QAAQC,mBAAmBC,QAAO,SAACC,GACzChB,EAASgB,KACR,iB,cCRQ,SAASC,GAAT,GAA0C,IAAZC,EAAW,EAAXA,SACnCC,EAAiB,CACnBxP,OAAQ,kBACRyP,aAAc,KACdC,WAAY,OACZ5P,UAAW,UAOX6P,EAASC,uBAAY,SAAAC,GACzBN,EAASM,EAAcxhB,KAAI,SAAAyhB,GAAI,OAAIxX,OAAOG,OAAOqX,EAAM,CACnDpB,QAASqB,IAAIC,gBAAgBF,WAEhC,CAACP,IACJ,EAAoDU,aAAY,CAACN,WAA1DO,EAAP,EAAOA,aAAchK,EAArB,EAAqBA,cAAeiK,EAApC,EAAoCA,aAEpC,OACE,gDAASD,KAAT,IAAyB1iB,MAAO2iB,EAAY,2BAAOX,GAZ5B,CACnBxP,OAAQ,qBAW4EwP,EAAxF,UACE,qCAAWtJ,MACX,cAACtY,EAAA,EAAD,CAAMC,KAAK,SAASvB,KAAK,SACzB,cAACU,EAAA,EAAD,CAAQC,QAAQ,yB,yBCjBP,SAASmjB,GAAT,GAA2C,IAAf1D,EAAc,EAAdA,YACzC,EAA0BjQ,mBAAS,IAAnC,mBAAO4T,EAAP,KAAcd,EAAd,KACA,EAA0B9S,mBAAS,MAAnC,mBAAOjN,EAAP,KAAc6e,EAAd,KACA,EAA8B5R,oBAAS,GAAvC,mBAAO5N,EAAP,KAAgB0T,EAAhB,KA0BA,SAAS+N,IACPf,EAAS,IACTlB,EAAS,MAGX,OACE,eAACxR,EAAA,EAAD,WACE,eAACA,EAAA,EAAKC,OAAN,CAAajF,MAAO,EAApB,UACE,cAAC7K,EAAA,EAAD,CAAQW,MAAM,OAAOqe,KAAG,EAAC/e,QAAQ,uBACjC,cAACqiB,GAAD,CAAqBC,SAAUA,OAEjC,cAAC1S,EAAA,EAAKC,OAAN,CAAajF,MAAO,IACpB,eAACgF,EAAA,EAAKC,OAAN,CAAajF,MAAO,EAApB,UACE,cAAC7K,EAAA,EAAD,CAAQW,MAAM,OAAOqe,KAAG,EAAC/e,QAAQ,oBAChCojB,EAAMthB,OAAS,GACd,cAACqf,GAAD,CACEC,SAAUA,EACVC,aAAc+B,EAAM,GAAG3B,aAI7B,cAAC7R,EAAA,EAAKC,OAAN,CAAajF,MAAO,IACpB,eAACgF,EAAA,EAAKC,OAAN,CAAajF,MAAO,EAApB,UACE,cAAC7K,EAAA,EAAD,CAAQW,MAAM,OAAOqe,KAAG,EAAC/e,QAAQ,8BAChCojB,EAAMthB,OAAS,GACd,qCACE,qBACEqP,UAAU,cACV5Q,MAAO,CAAE+B,UAAW,IAAKghB,SAAU,IAAKC,SAAU,YAEpD,eAAChiB,EAAA,EAAO3B,MAAR,WACE,cAAC2B,EAAA,EAAD,CAAQK,QAASA,EAASoJ,QAvDtC,WACEsK,GAAW,GACX,IAAMxN,EAAW0b,OAAS,IzCVvB,SAA0B1b,GAC/B,OAAOA,EAAS2b,MAA6C,GAAtC3b,EAAS4b,YAAY,KAAM,IAAM,IyCStBC,CAAiBP,EAAM,GAAGxiB,MACpDgjB,EjD0CH,SAAiCf,EAAM/a,GAC5C,IAAMhC,EAAOvB,GAASwB,OAAOC,YAE7B,OADmBzB,GAASmI,UAAU7D,MACpB8D,MAAX,UAAoB7G,EAAKQ,IAAzB,wBAA4CwB,IAAY+b,IAAIhB,GiD7C9CiB,CAAwBvhB,EAAOuF,GAClD8b,EAAW5U,GAAG,iBAAiB,SAAA9J,GAC7B,IAAM6e,EAAY7e,EAAS8e,iBAAmB9e,EAAS+e,WAAc,IACrEjgB,QAAQC,IAAI,aAAe8f,EAAW,aACrC,SAAAhgB,GACDwI,KAAMxI,MAAMA,EAAMyI,YACjB,WACDoX,EAAW1e,SAAS2D,IAAIqb,iBAAiBvU,MAAK,SAAA9H,IpDuF7C,SAAP,sCoDtFQsc,CAAuBtc,EAAaC,GAAU6H,MAAK,WACjD2F,GAAW,GACX+N,IACA5D,GAAY,MACX3G,OAAM,SAAA/U,GACPwI,KAAMxI,MAAMA,EAAMyI,SAClB8I,GAAW,aAsC+C/U,MAAO,CAAEqK,MAAO,KAAOqQ,UAAQ,EAACpQ,KAAK,UAC3F,cAACtJ,EAAA,EAAD,CAAQmB,SAAUd,EAASoJ,QAASqY,EAAkB9iB,MAAO,CAAEqK,MAAO,KAAOC,KAAK,sBCzDjF,SAASuZ,GAAT,GAAgD,IAA3B1c,EAA0B,EAA1BA,QAAS6X,EAAiB,EAAjBA,cACrCvV,EAAWO,cACjB,EAAgCiF,oBAAS,GAAzC,mBAAOgQ,EAAP,KAAiBC,EAAjB,KACQ7d,EAAY6I,aAAY,SAACnG,GAAD,OAAWA,EAAMiL,SAAzC3N,QACAyiB,EAAW5Z,aAAY,SAACnG,GAAD,OAAWA,EAAMoD,WAAxC2c,OACR,EAAkC7U,mBAAS,CAAC8U,YAAY,EAAOjH,OAAQ,OAAvE,mBAAQkH,EAAR,KAAkBC,EAAlB,KACA,EAAkChV,mBAAS,CAACiV,YAAY,EAAOpH,OAAQ,OAAvE,mBAAQqH,EAAR,KAAkBC,EAAlB,KAN4D,4CAe5D,WAAkCxc,EAAOkV,GAAzC,SAAA1V,EAAA,6DACE6c,EAAY,CAACF,YAAY,EAAMjH,WADjC,kBAGUnV,GAAaC,GAHvB,sDAKIoE,KAAMxI,MAAM,KAAMyI,SALtB,uBAOIgY,EAAY,CAACF,YAAY,EAAOjH,OAAQ,OAP5C,2EAf4D,kEA0B5D,WAAiClV,EAAOkV,GAAxC,SAAA1V,EAAA,6DACEgd,EAAY,CAACF,YAAY,EAAMpH,WADjC,kBAGU5Q,GAA0BtE,EAAMvH,MAH1C,uBAIUsI,GAA0Bf,EAAMhJ,IAJ1C,uDAMIoN,KAAMxI,MAAM,KAAMyI,SANtB,yBAQImY,EAAY,CAACF,YAAY,EAAOpH,OAAQ,OAR5C,6EA1B4D,sBAsC5D,OA7BAuC,GAAuB,CACrB5P,MAAO,kBrD8GmB5G,EqD9GC1B,EAAQvI,GrD+G9B6F,GAAGkB,WAAW,SAASO,IAAI2C,GAASlD,WAAW,UADjD,IAAuBkD,GqD7G1BhE,KAAM,SAACif,GAAD,OAAYra,EhDTf,SAA4Bqa,GAC/B,MAAO,CACHzgB,KAAM+J,GACNzJ,QAASmgB,GgDMcO,CAAmBP,KAC9CpU,KAAM,CAACvI,EAAQvI,GAAI6K,KA2BnB,cAAC0V,GAAA,EAAIC,KAAL,CAAU/d,QAASA,EAAnB,SACE,eAACgO,EAAA,EAAD,WACE,eAACA,EAAA,EAAKC,OAAN,CAAajF,MAAO,GAApB,UACE,cAAC7K,EAAA,EAAD,CAAQyB,QAAQ,OAAOqJ,KAAK,OAAO7K,QAAO,WACzCuf,GACC,cAAChe,EAAA,EAAD,CACEyJ,QAAS,kBAAMyU,GAAaD,IAC5Bhe,QAAQ,QACRgU,OAAK,EACLxV,QAASwf,EAAW,SAAW,iBAIrC,cAAC5P,EAAA,EAAKC,OAAN,CAAajF,MAAO,GAApB,SACG4U,EACC,cAAC2D,GAAD,CAAmB1D,YAAaA,IAEhC,cAACgB,GAAA,EAAK7gB,MAAN,CAAY8gB,YAAa,EAAzB,SACG2D,EAAOjjB,KAAI,SAAC+G,GAAD,OACV,eAACsY,GAAA,EAAD,WACE,cAACrhB,EAAA,EAAD,CAAOG,IAAK4I,EAAMF,MAClB,eAAC1G,EAAA,EAAO3B,MAAR,CAAcyC,OAAK,EAACsS,OAAQ,EAA5B,UACE,cAACpT,EAAA,EAAD,CACEX,KAAMuH,EAAMhJ,GACZyC,QAAS2iB,EAASD,YAAcC,EAASlH,SAAWlV,EAAMhJ,GAC1D6L,QAAS,SAACO,GAAD,OAhE+B,6CAgExBsZ,CAAmB1c,EAAOoD,EAAE8R,OAAOzc,OACnD8B,SAAUyF,EAAMF,MAAQP,EAAQlI,SAChCgW,OAAK,EACL9U,MAAM,QACNV,QAAQ,SAEV,cAACuB,EAAA,EAAD,CACAX,KAAMuH,EAAMhJ,GACZyC,QAAS8iB,EAASD,YAAcC,EAASrH,SAAWlV,EAAMhJ,GAC1DuD,SAAUyF,EAAMF,MAAQP,EAAQlI,SAChCwL,QAAS,SAACO,GAAD,OA1EiC,6CA0E1BuZ,CAAkB3c,EAAOoD,EAAE8R,OAAOzc,OAClD4U,OAAK,EACL9U,MAAM,MACNmK,KAAK,eAnBE1C,EAAMhJ,gBCjElB,SAAS4lB,GAAT,GAAmD,IAA1Brd,EAAyB,EAAzBA,QAAS6X,EAAgB,EAAhBA,cAE7C,EAAkC/P,mBAAS,GAA3C,mBAAOsQ,EAAP,KAAkBC,EAAlB,KAEMM,EAAQ,CACV,CAACC,SAAU,QAAS0E,OAAQ,kBAAM,cAAC1F,GAAD,CAAU5X,QAASA,EAAS6X,cAAeA,MAC7E,CAACe,SAAU,SAAU0E,OAAQ,kBAAM,cAACZ,GAAD,CAAW1c,QAASA,EAAS6X,cAAeA,MAC/E,CAACe,SAAU,SAAU0E,OAAQ,kBAAM,cAACnF,GAAD,CAAWnY,QAASA,MACvD,CAAC4Y,SAAU,YAAa0E,OAAQ,kBAAM,cAAClE,GAAD,CAA+BpZ,QAASA,EAASoY,UAAWA,GAAzCpY,EAAQvI,MACjE,CAACmhB,SAAU,YAAa0E,OAAQ,kBAAM,cAAClE,GAAD,CAA+BpZ,QAASA,EAASoY,UAAWA,GAAzCpY,EAAQvI,OAErE,OACI,cAACugB,GAAA,EAAD,CACAc,KAAM,CAACne,OAAO,EAAMsI,UAAU,GAC9Bsa,aAAa,QACb5E,MAAOA,EACPF,YAAa,SAAC5U,EAAGnG,GAAJ,OAAa2a,EAAa3a,EAAKgb,gB,wBCNrC,SAAS8E,GAAT,GAAoD,IAA3Bxd,EAA0B,EAA1BA,QAAS6X,EAAiB,EAAjBA,cACzCvV,EAAWO,cACjB,EAA8BiF,oBAAS,GAAvC,mBAAO5N,EAAP,KAAgB0T,EAAhB,KACO6P,EAAiB1a,aAAY,SAAAnG,GAAK,OAAIA,EAAMoD,WAA5Cyd,cAHyD,4CAwBhE,sBAAAxd,EAAA,6DACE2N,GAAW,GADb,kBAGU7L,GAAW/B,GAHrB,OAIIsC,EAASmE,MAJb,gDAMI5B,KAAMxI,MAAM,KAAMyI,SANtB,yBAQI8I,GAAW,GARf,6EAxBgE,kEAqChE,sBAAA3N,EAAA,6DACE2N,GAAW,GADb,kBAGU1L,GAAalC,GAHvB,OAIIsC,EAASoE,MAJb,gDAMI7B,KAAMxI,MAAM,KAAMyI,SANtB,yBAQI8I,GAAW,GARf,6EArCgE,sBAiDhE,OA5CAvG,qBAAU,WACR,IAAIwQ,EAaJ,OAZAjK,GAAW,GAFG,0CAad8P,GAAoBzV,MAAK,kBAAM2F,GAAW,MACnC,WACLtL,EAAS,CAACpG,KAAMqK,MAfJ,4CAGd,4BAAAtG,EAAA,+EAE+BkC,GAAgBnC,EAAQvI,IAFvD,QAEUkmB,EAFV,SAGwBA,EAAalgB,QAC/B6E,EAASmE,MAJf,gDAOI5B,KAAMxI,MAAM,KAAMyI,SAPtB,0DAHc,yBAiBb,CAACxC,EAAUtC,EAAQvI,GAAIogB,IA4BxB,cAAC5f,EAAA,EAAD,UACE,eAACiQ,EAAA,EAAD,WACE,cAACA,EAAA,EAAKC,OAAN,CAAajF,MAAO,GAApB,SACE,cAAC7L,EAAA,EAAKa,MAAN,UACE,eAACb,EAAA,EAAD,WACE,cAACA,EAAA,EAAKK,MAAN,CACEuc,QAAM,EACNtc,KAAK,QACLE,IAAKmI,EAAQlI,UAAY0T,mCAE3B,cAACnU,EAAA,EAAKe,QAAN,CAAcyW,cAAc,SAA5B,SACE,cAACxW,EAAA,EAAD,CACEf,GAAG,KACHuB,MAAO,CAAE6e,QAAS,QAASrB,aAAc,IACzC/d,QAAS0H,EAAQd,uBAM3B,eAACgJ,EAAA,EAAKC,OAAN,CAAajF,MAAO,EAApB,UACE,eAAC0a,GAAA,EAAU1lB,MAAX,WACE,cAAC0lB,GAAA,EAAD,CAAWlO,MAAM,YAAYjN,MAAOzC,EAAQ6d,eAAiB,IAC7D,cAACD,GAAA,EAAD,CAAWlO,MAAM,YAAYjN,MAAOzC,EAAQgC,gBAAkB,QAE9D6V,GACA,qCACE,cAAC1K,GAAA,EAAD,IACA,eAAC2Q,GAAA,EAAD,CAAQC,SAAS,OAAjB,UACE,cAACD,GAAA,EAAO1lB,QAAR,CAAgB4lB,SAAO,EAACnlB,MAAO,CAAEqK,MAAO,QAAxC,SACE,cAACrJ,EAAA,EAAD,CAAQc,OAAK,EAAC3B,MAAM,WAAWV,QAASmlB,EAAgB,YAAc,oBAExE,cAACK,GAAA,EAAO1lB,QAAR,CAAgB6lB,QAAM,EAACplB,MAAO,CAAEqK,MAAO,QAAvC,SACE,cAACrJ,EAAA,EAAD,CACEyJ,QAASma,EAAgB,kBApFqB,0CAoFfS,IAAuB,kBApFR,0CAoFcC,IAC5DjkB,QAASA,EACT4T,OAAK,EACLnT,OAAK,EACL3B,MAAOykB,EAAgB,OAAS,WAChCnlB,QAASmlB,EAAgB,WAAa,2BChG3C,SAASW,GAAT,GAAiC,IAO1Cpe,EAPgCqP,EAAS,EAATA,MAC9B/M,EAAWO,cACjB,EAAoDE,aAClD,SAACnG,GAAD,OAAWA,EAAMoD,WADXqe,EAAR,EAAQA,oBAAqBtK,EAA7B,EAA6BA,mBAGrBzV,EAAgByE,aAAY,SAACnG,GAAD,OAAWA,EAAMyB,QAA7CC,YACR,EAA2ByE,aAAY,SAACnG,GAAD,OAAWA,EAAMiL,SAAhD3N,EAAR,EAAQA,QAASmC,EAAjB,EAAiBA,MAgBjB,OAbAgM,GAAgB,CACdC,MAAO,kBAAMzI,GAAewP,EAAMG,OAAO/X,KACzCiG,KAAM,SAACsC,GAAD,OAAasC,EnDZhB,SAAqCtC,GACxC,MAAO,CACH9D,KAAM8J,GACNxJ,QAASwD,GmDSese,CAA4Bte,KACxDuI,KAAM,CAACjG,EAAU+M,EAAMG,OAAO/X,IAC9B+Q,cAAe6G,EAAMG,OAAO/X,KAAO6G,EAAYM,MAI/CoB,EADEqP,EAAMG,OAAO/X,KAAO6G,EAAYM,IACxBmV,EAEAsK,EAGPnkB,IAAY8F,IAAcA,IAAY3D,EAClC,cAAC6S,GAAD,CAAkB5W,QAAQ,wBAGjC,cAAC4P,EAAA,EAAD,UACE,eAACA,EAAA,EAAKC,OAAN,CAAajF,MAAO,GAApB,UACE,cAACsa,GAAD,CACExd,QAASA,EACT6X,cAAevZ,EAAYM,MAAQoB,EAAQvI,KAE7C,cAAC4lB,GAAD,CACErd,QAASA,EACT6X,cAAevZ,EAAYM,MAAQoB,EAAQvI,U,oCCvCtC,SAAS8mB,GAAT,GAIX,IAHSC,EAGV,EAHDC,UAEGC,GACF,EAFDhS,aAEC,oBACO5J,EAAkBC,aAAY,SAACnG,GAAD,OAAWA,EAAMyB,QAA/CyE,cACR,OACE,cAAC,IAAD,2BACM4b,GADN,IAEEpB,OAAQ,SAAC3N,GAAD,OACN7M,EAAgB,cAAC0b,EAAD,eAAe7O,IAAY,cAACrD,GAAD,eAAiBqD,QCGrD,SAASgP,KACtB,IAAQ5U,EAAQ6U,cAAR7U,IAGR,OAFwBhH,aAAY,SAACnG,GAAD,OAAWA,EAAMiL,SAA7CnL,YAKN,qCACE,cAACia,GAAD,IACA,cAAC,KAAD,CAAgBhN,SAAS,eAAekV,iBAAe,IACvD,cAAC,IAAD,CAAOjK,OAAK,EAACkK,KAAK,IAAIL,UAAW7K,KACjC,cAAC,IAAD,CACEkL,KAAM,QACNxB,OAAQ,kBACN,qCACE,cAAC9I,GAAD,IACA,eAACX,EAAA,EAAD,CAAWpK,UAAU,OAArB,UACE,cAAC,IAAD,CAAOmL,OAAK,EAACkK,KAAK,UAAUL,UAAW9W,KACvC,cAAC,IAAD,CAAOiN,OAAK,EAACkK,KAAK,WAAWL,UAAW/I,KACxC,cAAC,IAAD,CAAOoJ,KAAK,cAAcL,UAAWrP,KACrC,cAACmP,GAAD,CACEO,KAAM,CAAC,eAAgB,eACvBL,UAAWvM,IACNnI,GAEP,cAACwU,GAAD,CAAcO,KAAK,WAAWL,UAAWvH,KACzC,cAACqH,GAAD,CAAcO,KAAK,eAAeL,UAAWL,KAC7C,cAAC,IAAD,CAAOU,KAAK,SAASL,UAAWxH,iBAvBnB,cAAC/H,GAAD,CAAkB5W,QAAQ,mB,wBCtBxCymB,GAAe,eACfC,GAAgB,gB,SCEvBviB,GAAe,CACnBqG,eAAe,EACfxE,YAAa,KACboO,aAAc,KACduS,gBAAiB,MAGJ,SAASC,KAAsD,IAA1CtiB,EAAyC,uDAAjCH,GAAiC,yCAAjBP,EAAiB,EAAjBA,KAAMM,EAAW,EAAXA,QAChE,OAAQN,GACN,KAAK6iB,GACH,OAAO,2BACFniB,GADL,IAEEkG,eAAe,EACfxE,YAAa,CACXoB,MAAOlD,EAAQkD,MACf5H,SAAU0E,EAAQ1E,SAClB8G,IAAKpC,EAAQoC,IACbM,YAAa1C,EAAQ0C,YACrBkY,WAAY5a,EAAQ2iB,aAAa,GAAG/H,cAG1C,KAAK4H,GACH,OAAO,2BACFpiB,GADL,IAEEkG,eAAe,EACfxE,YAAa,OAEf,KAAK8gB,KACH,OAAO,2BACFxiB,GADL,IAEE8P,aAAc9P,EAAMqiB,gBACpBA,gBAAiBziB,EAAQ2V,WAE/B,QACE,OAAOvV,G,aCtBPH,GAAe,CACnBzC,OAAQ,GACR8Q,SAAU,GACV3Q,YAAY,EACZmV,cAAe,KACf/M,YAAa,KACbvE,OAAQ,MACRC,UAAW,IAAI0C,KACfiH,aAAa,GAGA,SAASyX,KAAuD,IAA1CziB,EAAyC,uDAAjCH,GAAiC,yCAAjBP,EAAiB,EAAjBA,KAAMM,EAAW,EAAXA,QACjE,OAAQN,GACN,KAAKjB,EACH,OAAO,2BACF2B,GADL,IAEE5C,OAAO,GAAD,oBAAM4C,EAAM5C,QAAZ,CAAoBwC,MAE9B,KAAKtB,EACH,OAAO,2BACF0B,GADL,IAEE5C,OAAO,GAAD,oBACD4C,EAAM5C,OAAOgE,QAAO,SAACshB,GAAD,OAASA,EAAI7nB,KAAO+E,EAAQ/E,OAD/C,CAEJ+E,MAGN,KAAKrB,EACH,OAAO,2BACFyB,GADL,IAEE5C,OAAO,aAAK4C,EAAM5C,OAAOgE,QAAO,SAACshB,GAAD,OAASA,EAAI7nB,KAAO+E,QAExD,KAAKpB,EACH,OAAO,2BACFwB,GADL,IAEE5C,OAAO,GAAD,oBAAM4C,EAAM5C,QAAZ,aAAuBwC,EAAQxC,SACrCG,WAAYqC,EAAQrC,WACpBoI,YAAa/F,EAAQ+F,cAGzB,KAAKlH,EACH,OAAO,2BACFuB,GADL,IAEEkO,SAAUtO,IAEd,KAAKlB,EACH,OAAO,2BACFsB,GADL,IAEEkO,SAAU,KAEd,KAAKvP,EACH,OAAO,2BACFqB,GADL,IAEE0S,cAAe9S,IAEnB,KAAKhB,EACH,OAAO,2BACFoB,GADL,IAEE0S,cAAe,OAEnB,KAAK7T,EACH,OAAO,2BACFmB,GADL,IAEE5C,OAAQ,GACRG,YAAY,EACZoI,YAAa,OAEjB,KAAK7G,EACH,OAAO,2BACFkB,GADL,IAEEgL,aAAa,EACbzN,YAAY,EACZ6D,OAAQxB,IAEZ,KAAKb,EACH,OAAO,2BACFiB,GADL,IAEEgL,aAAa,EACbzN,YAAY,EACZ8D,UAAWzB,IAEf,KAAKZ,EACH,OAAO,2BACFgB,GADL,IAEEgL,aAAa,IAGjB,QACE,OAAOhL,GCzFb,IAAMH,GAAe,CACnBsX,mBAAoB,KACpBsK,oBAAqB,KACrB1B,OAAQ,GACRrE,cAAe,GACfgB,UAAW,GACXD,WAAY,GACZoE,eAAe,EACfrW,KAAM,IAGO,SAASmY,KAGrB,IAFD3iB,EAEA,uDAFQH,GAER,yCADEP,EACF,EADEA,KAAMM,EACR,EADQA,QAER,OAAQN,GACN,KAAK6J,GACH,OAAO,2BACFnJ,GADL,IAEEmX,mBAAoBvX,IAExB,KAAKwJ,GACH,OAAO,2BACFpJ,GADL,IAEEyhB,oBAAqB7hB,IAEzB,KAAKyJ,GACH,OAAO,2BACFrJ,GADL,IAEE+f,OAAQngB,IAEZ,KAAK0J,GACH,OAAO,2BACFtJ,GADL,IAEE0b,cAAe9b,IAEnB,KAAK2J,GACH,OAAO,2BACFvJ,GADL,IAEE0c,UAAW9c,IAEf,KAAK4J,GACH,OAAO,2BACFxJ,GADL,IAEEyc,WAAY7c,IAEhB,KAAK6J,GACH,OAAO,2BACFzJ,GADL,IAEE6gB,eAAe,IAEnB,KAAKnX,GACH,OAAO,2BACF1J,GADL,IAEE6gB,eAAe,IAEnB,KAAKlX,GACH,OAAO,2BACF3J,GADL,IAEE0c,UAAW,GACXD,WAAY,KAEhB,KAAK7S,GACH,OAAO,2BACF5J,GADL,IAEEwK,KAAM5K,IAGV,QACE,OAAOI,G,cC9DE4iB,GAXK,SAACjT,GAAD,OAAakT,2BAAgB,CAC7CC,OAAQC,aAAcpT,GACtBsJ,KAAMJ,GACNzd,MAAOqnB,GACPtI,OAAQ5K,GACR9N,KAAM6gB,GACNrX,MAAOlL,GACPqD,QAASuf,M,UCDN,SAASK,KACZ,OAAO,SAAUtd,GACb,OAAOzF,GAASwB,OAAOwhB,oBAAmB,SAAAzhB,GAClCA,GACAkE,EAbT,SAAoBlE,GACvB,MAAO,CACHlC,KAAM6iB,GACNviB,QAAS4B,GAUQ0hB,CAAW1hB,IACDyB,GAAezB,EAAKQ,KAC5B8J,YAAW,SAAAlL,G3DnB/B,IAAoCwC,E2DoBvBsC,G3DpBuBtC,E2DoBazC,GAAiBC,G3DnB9D,CACHtB,KAAM6J,GACNvJ,QAASwD,K2DkBGsC,EAAS,CAACpG,KAAMF,SAGpBsG,EAQL,CACHpG,KAAM8iB,KARE1c,EAAS,CAACpG,KAAMF,S,aCpBnBuQ,GAAUwT,eCJR,SAASC,KACtB,IAAQpT,EAAagS,cAAbhS,SAMR,OAJAvF,qBAAU,WACR4Y,OAAOC,SAAS,EAAG,KAClB,CAACtT,IAEG,KCGT,IAAMuT,GFJC,WAEH,IAAMA,EAAQC,uBAAYZ,GAAYjT,IAAU8T,+BAAoBC,2BAAgBC,QAIpF,OAFAJ,EAAM7d,SAASsd,MAERO,EEFGK,GAIRC,GAASC,SAASC,eAAe,QAGrCC,IAAStD,OACP,cAAC,IAAD,CAAU6C,MAAOA,GAAjB,SACE,eAAC,KAAD,CAAiB5T,QAASA,GAA1B,UACE,cAACyT,GAAD,IACA,cAACrB,GAAD,SAIJ8B,M","file":"static/js/main.92fc2556.chunk.js","sourcesContent":["import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { List, Image } from 'semantic-ui-react';\n\nexport default function EventListAttendee({attendee}) {\n    return(\n     <List.Item as={Link} to={`/profile/${attendee.id}`}>\n         <Image size='mini' circular src={attendee.photoURL} />\n     </List.Item> \n    )\n}","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Item, Segment, Icon, List, Button, Label } from \"semantic-ui-react\";\nimport EventListAttendee from \"./EventListAttendee\";\nimport {format} from 'date-fns'\n\n\nexport default function EventListItem({ event }) {\n\n\n  return (\n    <Segment.Group>\n      <Segment>\n        <Item.Group>\n          <Item>\n            <Item.Image size=\"tiny\" circular src={event.hostPhotoURL} />\n            <Item.Content>\n              <Item.Header content={event.title} />\n              <Item.Description>Hosted by <Link to={`/profile/${event.hostUid}`}>{event.hostedBy}</Link></Item.Description>\n              {event.isCancelled && (\n                <Label \n                  style={{top: '-40px'}}\n                  ribbon='right'\n                  color='red'\n                  content='This event has been canceled.'\n\n                />\n              )}\n            </Item.Content>\n          </Item>\n        </Item.Group>\n      </Segment>\n      <Segment>\n        <span>\n          <Icon name=\"clock\" /> {format(event.date, 'MMMM d, yyyy h:mm a')}\n          <Icon name=\"marker\" /> {event.venue.address}\n        </span>\n      </Segment>\n      <Segment secondary>\n        <List horizontal>\n          {event.attendees.map((attendee) => (\n            <EventListAttendee key={attendee.id} attendee={attendee} />\n          ))}\n        </List>\n      </Segment>\n      <Segment clearing>\n        <div>{event.description}</div>\n       \n        <Button\n          as={Link} to={`/events/${event.id}`}\n          color=\"facebook\"\n          floated=\"right\"\n          content=\"View\"\n        />\n      </Segment>\n    </Segment.Group>\n  );\n}\n","import React from \"react\";\nimport EventListItem from \"./EventListItem\";\nimport InfiniteScroll from \"react-infinite-scroller\";\n\nexport default function EventList({\n  events,\n  getNextEvents,\n  loading,\n  moreEvents,\n}) {\n  return (\n    <>\n      {events.length !== 0 && (\n        <InfiniteScroll\n          pageStart={0}\n          loadMore={getNextEvents}\n          hasMore={!loading && moreEvents}\n          initialLoad={false}\n        >\n          {events.map((event) => (\n            <EventListItem event={event} key={event.id} />\n          ))}\n        </InfiniteScroll>\n      )}\n    </>\n  );\n}\n","import React from 'react';\nimport {Segment, Button, Placeholder} from 'semantic-ui-react';\nexport default function EventListItemPlaceholder() {\n    return (\n        <Placeholder fluid >\n            <Segment.Group>\n                <Segment style={{minHeight: 110}}>\n                    <Placeholder>\n                        <Placeholder.Header image>\n                            <Placeholder.Line/>\n                            <Placeholder.Line/>\n                        </Placeholder.Header>\n                        <Placeholder.Paragraph>\n                            <Placeholder.Line/>\n                        </Placeholder.Paragraph>\n                    </Placeholder>\n                </Segment>\n                <Segment>\n                    <Placeholder>\n                        <Placeholder.Line/>\n                        <Placeholder.Line/>\n                    </Placeholder>\n                </Segment>\n                <Segment secondary style={{minHeight: 70}}/>\n                <Segment clearing>\n                    <Button disabled color='blue' floated='right' content='View'/>\n                </Segment>\n            </Segment.Group>\n        </Placeholder>\n    );\n};","export const CREATE_EVENT = 'CREATE_EVENT';\nexport const UPDATE_EVENT = 'UPDATE_EVENT';\nexport const DELETE_EVENT = 'DELETE_EVENT';\nexport const FETCH_EVENTS = 'FETCH_EVENTS';\nexport const LISTEN_TO_EVENT_CHAT = 'LISTEN_TO_EVENT_CHAT';\nexport const CLEAR_COMMENTS = 'CLEAR_COMMENTS';\nexport const LISTEN_TO_SELECTED_EVENT = 'LISTEN_TO_SELECTED_EVENT';\nexport const CLEAR_SELECTED_EVENT = 'CLEAR_SELECTED_EVENT';\nexport const CLEAR_EVENTS = 'CLEAR_EVENTS';\nexport const SET_FILTER = 'SET_FILTER';\nexport const SET_START_DATE = 'SET_START_DATE';\nexport const RETAIN_STATE = 'RETAIN_STATE';\n\n\n","const ASYNC_ACTION_START = \"ASYNC_ACTION_START\";\nconst ASYNC_ACTION_FINISH = \"ASYNC_ACTION_FINISH\";\nconst ASYNC_ACTION_ERROR = \"ASYNC_ACTION_ERROR\";\nexport const APP_LOADED = 'APP_LOADED';\n\nexport function asyncActionStart() {\n  return {\n    type: ASYNC_ACTION_START,\n  };\n}\n\nexport function asyncActionFinish() {\n  return {\n    type: ASYNC_ACTION_FINISH,\n  };\n}\n\nexport function asyncActionError(error) {\n  console.log(error);\n  return {\n    type: ASYNC_ACTION_ERROR,\n    payload: error,\n  };\n}\n\nconst initialState = {\n  loading: false,\n  error: null,\n  initialized: false\n};\n\nexport default function asyncReducer(state = initialState, { type, payload }) {\n  switch (type) {\n    case ASYNC_ACTION_START:\n      return {\n        ...state,\n        loading: true,\n        error: null,\n      };\n    case ASYNC_ACTION_FINISH:\n      return {\n        ...state,\n        loading: false,\n      };\n    case ASYNC_ACTION_ERROR:\n      return {\n        ...state,\n        loading: false,\n        error: payload,\n      };\n      case APP_LOADED:\n      return {\n        ...state,\n        initialized: true,\n      };\n    default:\n      return state;\n  }\n}\n","import firebase from 'firebase/app';\nimport 'firebase/firestore';\nimport 'firebase/database';\nimport 'firebase/auth';\nimport 'firebase/storage';\n\nconst firebaseConfig = {\n    apiKey: \"AIzaSyAJKD6-wlcmHwRzD2HhxkKNQdrt4BJvhG0\",\n    authDomain: \"eventspace-a2198.firebaseapp.com\",\n    projectId: \"eventspace-a2198\",\n    storageBucket: \"eventspace-a2198.appspot.com\",\n    messagingSenderId: \"1004675596430\",\n    appId: \"1:1004675596430:web:4018cfe41370857cff09df\"\n}\n\nfirebase.initializeApp(firebaseConfig);\nfirebase.firestore();\n\nexport default firebase;","import firebase from \"../config/firebase\";\n\nconst db = firebase.firestore();\n\nexport function dataFromSnapshot(snapshot) {\n  if (!snapshot.exists) return undefined;\n  const data = snapshot.data();\n\n  for (const prop in data) {\n    if (data.hasOwnProperty(prop)) {\n      if (data[prop] instanceof firebase.firestore.Timestamp) {\n        data[prop] = data[prop].toDate();\n      }\n    }\n  }\n\n  return {\n    ...data,\n    id: snapshot.id,\n  };\n}\n\nexport function fetchEventsFromFirestore(\n  filter,\n  startDate,\n  limit,\n  lastDocSnapshot = null\n) {\n  const user = firebase.auth().currentUser;\n  let eventsRef = db\n    .collection(\"events\")\n    .orderBy(\"date\")\n    .startAfter(lastDocSnapshot)\n    .limit(limit);\n  switch (filter) {\n    case \"isGoing\":\n      return eventsRef\n        .where(\"attendeeIds\", \"array-contains\", user.uid)\n        .where(\"date\", \">=\", startDate);\n    case \"isHost\":\n      return eventsRef\n        .where(\"hostUid\", \"==\", user.uid)\n        .where(\"date\", \">=\", startDate);\n    default:\n      return eventsRef.where(\"date\", \">=\", startDate);\n  }\n}\n\nexport function listenToEventFromFirestore(eventId) {\n  return db.collection(\"events\").doc(eventId);\n}\n\nexport function addEventToFirestore(event) {\n  const user = firebase.auth().currentUser;\n  return db.collection(\"events\").add({\n    ...event,\n    hostUid: user.uid,\n    hostedBy: user.displayName,\n    hostPhotoURL: user.photoURL || null,\n    attendees: firebase.firestore.FieldValue.arrayUnion({\n      id: user.uid,\n      displayName: user.displayName,\n      photoURL: user.photoURL || null,\n    }),\n    attendeeIds: firebase.firestore.FieldValue.arrayUnion(user.uid),\n  });\n}\n\nexport function updateEventInFirestore(event) {\n  return db.collection(\"events\").doc(event.id).update(event);\n}\n\nexport function deleteEventInFirestore(eventId) {\n  return db.collection(\"events\").doc(eventId).delete();\n}\n\nexport function cancelEventToggle(event) {\n  return db.collection(\"events\").doc(event.id).update({\n    isCancelled: !event.isCancelled,\n  });\n}\n\nexport function setUserProfileData(user) {\n  return db\n    .collection(\"users\")\n    .doc(user.uid)\n    .set({\n      displayName: user.displayName,\n      email: user.email,\n      photoURL: user.photoURL || null,\n      createdAt: firebase.firestore.FieldValue.serverTimestamp(),\n    });\n}\n\nexport function getUserProfile(userId) {\n  return db.collection(\"users\").doc(userId);\n}\n\nexport async function updateUserProfile(profile) {\n  const user = firebase.auth().currentUser;\n  try {\n    if (user.displayName !== profile.displayName) {\n      await user.updateProfile({\n        displayName: profile.displayName,\n      });\n    }\n    return await db.collection(\"users\").doc(user.uid).update(profile);\n  } catch (error) {\n    throw error;\n  }\n}\n\nexport async function updateUserProfilePhoto(downloadURL, filename) {\n  const user = firebase.auth().currentUser;\n  const userDocRef = db.collection(\"users\").doc(user.uid);\n  try {\n    const userDoc = await userDocRef.get();\n    if (!userDoc.data().photoURL) {\n      await db.collection(\"users\").doc(user.uid).update({\n        photoURL: downloadURL,\n      });\n      await user.updateProfile({\n        photoURL: downloadURL,\n      });\n    }\n    return await db.collection(\"users\").doc(user.uid).collection(\"photos\").add({\n      name: filename,\n      url: downloadURL,\n    });\n  } catch (error) {\n    throw error;\n  }\n}\n\nexport function getUserPhotos(userUid) {\n  return db.collection(\"users\").doc(userUid).collection(\"photos\");\n}\n\nexport async function setMainPhoto(photo) {\n  const user = firebase.auth().currentUser;\n  const today = new Date();\n  const eventDocQuery = db\n    .collection(\"events\")\n    .where(\"attendeeIds\", \"array-contains\", user.uid)\n    .where(\"date\", \">=\", today);\n  const userFollowingRef = db\n    .collection(\"following\")\n    .doc(user.uid)\n    .collection(\"userFollowing\");\n\n  const batch = db.batch();\n\n  batch.update(db.collection(\"users\").doc(user.uid), {\n    photoURL: photo.url,\n  });\n\n  try {\n    const eventsQuerySnap = await eventDocQuery.get();\n    for (let i = 0; i < eventsQuerySnap.docs.length; i++) {\n      let eventDoc = eventsQuerySnap.docs[i];\n      if (eventDoc.data().hostUid === user.uid) {\n        batch.update(eventsQuerySnap.docs[i].ref, {\n          hostPhotoURL: photo.url,\n        });\n      }\n      batch.update(eventsQuerySnap.docs[i].ref, {\n        attendees: eventDoc.data().attendees.filter((attendee) => {\n          if (attendee.id === user.uid) {\n            attendee.photoURL = photo.url;\n          }\n          return attendee;\n        }),\n      });\n    }\n\n    const userFollowingSnap = await userFollowingRef.get();\n    userFollowingSnap.docs.forEach((docRef) => {\n      let followingDocRef = db\n        .collection(\"following\")\n        .doc(docRef.id)\n        .collection(\"userFollowers\")\n        .doc(user.uid);\n      batch.update(followingDocRef, {\n        photoURL: photo.url\n      })\n    });\n\n    await batch.commit();\n\n    return await user.updateProfile({\n      photoURL: photo.url,\n    });\n  } catch (error) {\n    throw error;\n  }\n}\n\nexport function deletePhotoFromCollection(photoId) {\n  const userUid = firebase.auth().currentUser.uid;\n  return db\n    .collection(\"users\")\n    .doc(userUid)\n    .collection(\"photos\")\n    .doc(photoId)\n    .delete();\n}\n\nexport function addUserAttendance(event) {\n  const user = firebase.auth().currentUser;\n  return db\n    .collection(\"events\")\n    .doc(event.id)\n    .update({\n      attendees: firebase.firestore.FieldValue.arrayUnion({\n        id: user.uid,\n        displayName: user.displayName,\n        photoURL: user.photoURL || null,\n      }),\n      attendeeIds: firebase.firestore.FieldValue.arrayUnion(user.uid),\n    });\n}\n\nexport async function cancelUserAttendance(event) {\n  const user = firebase.auth().currentUser;\n  try {\n    const eventDoc = await db.collection(\"events\").doc(event.id).get();\n    return db\n      .collection(\"events\")\n      .doc(event.id)\n      .update({\n        attendeeIds: firebase.firestore.FieldValue.arrayRemove(user.uid),\n        attendees: eventDoc\n          .data()\n          .attendees.filter((attendee) => attendee.id !== user.uid),\n      });\n  } catch (error) {\n    throw error;\n  }\n}\n\nexport function getUserEventsQuery(activeTab, userUid) {\n  let eventsRef = db.collection(\"events\");\n  const today = new Date();\n  switch (activeTab) {\n    case 1: //past events\n      return eventsRef\n        .where(\"attendeeIds\", \"array-contains\", userUid)\n        .where(\"date\", \"<=\", today)\n        .orderBy(\"date\", \"desc\");\n    case 2: //hosting\n      return eventsRef.where(\"hostUid\", \"==\", userUid).orderBy(\"date\");\n    default:\n      return eventsRef\n        .where(\"attendeeIds\", \"array-contains\", userUid)\n        .where(\"date\", \">=\", today)\n        .orderBy(\"date\");\n  }\n}\n\nexport async function followUser(profile) {\n  const user = firebase.auth().currentUser;\n  const batch = db.batch();\n\n  try {\n    batch.set(\n      db\n        .collection(\"following\")\n        .doc(user.uid)\n        .collection(\"userFollowing\")\n        .doc(profile.id),\n      {\n        displayName: profile.displayName,\n        photoURL: profile.photoURL,\n        uid: profile.id,\n      }\n    );\n\n    batch.update(db.collection(\"users\").doc(user.uid), {\n      followingCount: firebase.firestore.FieldValue.increment(1),\n    });\n\n    return await batch.commit();\n  } catch (error) {\n    throw error;\n  }\n}\n\nexport async function unfollowUser(profile) {\n  const user = firebase.auth().currentUser;\n  const batch = db.batch();\n\n  try {\n    batch.delete(\n      db\n        .collection(\"following\")\n        .doc(user.uid)\n        .collection(\"userFollowing\")\n        .doc(profile.id)\n    );\n    batch.update(db.collection(\"users\").doc(user.uid), {\n      followingCount: firebase.firestore.FieldValue.increment(-1),\n    });\n\n    return await batch.commit();\n  } catch (error) {\n    throw error;\n  }\n}\n\nexport function getFollowersCollection(profileId) {\n  return db.collection(\"following\").doc(profileId).collection(\"userFollowers\");\n}\n\nexport function getFollowingCollection(profileId) {\n  return db.collection(\"following\").doc(profileId).collection(\"userFollowing\");\n}\n\nexport function getFollowingDoc(profileId) {\n  const userUid = firebase.auth().currentUser.uid;\n  return db\n    .collection(\"following\")\n    .doc(userUid)\n    .collection(\"userFollowing\")\n    .doc(profileId)\n    .get();\n}\n","import {\n    CLEAR_EVENTS,\n  CLEAR_SELECTED_EVENT,\n  CREATE_EVENT,\n  DELETE_EVENT,\n  FETCH_EVENTS,\n  LISTEN_TO_EVENT_CHAT,\n  LISTEN_TO_SELECTED_EVENT,\n  SET_FILTER,\n  SET_START_DATE,\n  UPDATE_EVENT,\n} from \"./eventConstants\";\nimport {\n  asyncActionError,\n  asyncActionFinish,\n  asyncActionStart,\n} from \"../../app/async/asyncReducer\";\nimport {\n  dataFromSnapshot,\n  fetchEventsFromFirestore,\n} from \"../../app/firestore/firestoreService\";\n\nexport function fetchEvents(filter, startDate, limit, lastDocSnapshot) {\n  return async function (dispatch) {\n    dispatch(asyncActionStart());\n    try {\n      const snapshot = await fetchEventsFromFirestore(\n        filter,\n        startDate,\n        limit,\n        lastDocSnapshot\n      ).get();\n      const lastVisible = snapshot.docs[snapshot.docs.length - 1];\n      const moreEvents = snapshot.docs.length >= limit;\n      const events = snapshot.docs.map((doc) => dataFromSnapshot(doc));\n      dispatch({ type: FETCH_EVENTS, payload: { events, moreEvents, lastVisible } });\n      dispatch(asyncActionFinish());\n    } catch (error) {\n      dispatch(asyncActionError(error));\n    }\n  };\n}\n\nexport function setFilter(value) {\n  return function(dispatch) {\n    dispatch(clearEvents());\n    dispatch({type: SET_FILTER, payload: value})\n  }\n}\n\nexport function setStartDate(date) {\n  return function(dispatch) {\n    dispatch(clearEvents());\n    dispatch({type: SET_START_DATE, payload: date})\n  }\n}\n\nexport function listenToSelectedEvent(event) {\n  return {\n    type: LISTEN_TO_SELECTED_EVENT,\n    payload: event,\n  };\n}\n\nexport function clearSelectedEvent() {\n  return {\n    type: CLEAR_SELECTED_EVENT\n  }\n}\n\nexport function createEvent(event) {\n  return {\n    type: CREATE_EVENT,\n    payload: event,\n  };\n}\n\nexport function updateEvent(event) {\n  return {\n    type: UPDATE_EVENT,\n    payload: event,\n  };\n}\n\nexport function deleteEvent(eventId) {\n  return {\n    type: DELETE_EVENT,\n    payload: eventId,\n  };\n}\n\nexport function listenToEventsChat(comments) {\n  return {\n    type: LISTEN_TO_EVENT_CHAT,\n    payload: comments,\n  };\n}\n\nexport function clearEvents() {\n    return {\n        type: CLEAR_EVENTS\n    }\n}","import React from \"react\";\nimport { Header, Menu } from \"semantic-ui-react\";\nimport Calendar from \"react-calendar\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { setFilter, setStartDate } from \"../eventActions\";\n\nexport default function EventFilters({ loading }) {\n  const dispatch = useDispatch();\n  const { authenticated } = useSelector((state) => state.auth);\n  const { filter, startDate } = useSelector((state) => state.event);\n  return (\n    <>\n      {authenticated && (\n        <Menu vertical size=\"large\" style={{ width: \"100%\" }}>\n          <Header icon=\"filter\" attached color=\"blue\" content=\"Filters\" />\n          <Menu.Item\n            content=\"All Events\"\n            active={filter === \"all\"}\n            onClick={() => dispatch(setFilter('all'))}\n            disabled={loading}\n          />\n          <Menu.Item\n            content=\"I'm Going\"\n            active={filter === \"isGoing\"}\n            onClick={() => dispatch(setFilter('isGoing'))}\n            disabled={loading}\n          />\n          <Menu.Item\n            content=\"I'm Hosting\"\n            active={filter === \"isHost\"}\n            onClick={() => dispatch(setFilter('isHost'))}\n            disabled={loading}\n          />\n        </Menu>\n      )}\n      <Header icon=\"calendar\" attached color=\"blue\" content=\"Select Date\" />\n      <Calendar\n        onChange={(date) => dispatch(setStartDate(date))}\n        value={startDate || new Date()}\n        tileDisabled={() => loading}\n      />\n    </>\n  );\n}\n","import firebase from \"../config/firebase\";\nimport { setUserProfileData } from \"./firestoreService\";\nimport { toast } from \"react-toastify\";\n\nexport function firebaseObjectToArray(snapshot) {\n  if (snapshot) {\n    return Object.entries(snapshot).map((e) =>\n      Object.assign({}, e[1], { id: e[0] })\n    );\n  }\n}\n\nexport function signInWithEmail(creds) {\n  return firebase\n    .auth()\n    .signInWithEmailAndPassword(creds.email, creds.password);\n}\n\nexport function signOutFirebase() {\n  return firebase.auth().signOut();\n}\n\nexport async function registerInFirebase(creds) {\n  try {\n    const result = await firebase\n      .auth()\n      .createUserWithEmailAndPassword(creds.email, creds.password);\n    await result.user.updateProfile({\n      displayName: creds.displayName,\n    });\n    return await setUserProfileData(result.user);\n  } catch (error) {\n    throw error;\n  }\n}\n\nexport async function socialLogin(selectedProvider) {\n  let provider;\n  if (selectedProvider === \"facebook\") {\n    provider = new firebase.auth.FacebookAuthProvider();\n  }\n  if (selectedProvider === \"google\") {\n    provider = new firebase.auth.GoogleAuthProvider();\n  }\n  try {\n    const result = await firebase.auth().signInWithPopup(provider);\n    console.log(result);\n    if (result.additionalUserInfo.isNewUser) {\n      await setUserProfileData(result.user);\n    }\n  } catch (error) {\n    toast.error(error.message);\n  }\n}\n\nexport function updateUserPassword(creds) {\n  const user = firebase.auth().currentUser;\n  return user.updatePassword(creds.newPassword1);\n}\n\nexport function uploadToFirebaseStorage(file, filename) {\n  const user = firebase.auth().currentUser;\n  const storageRef = firebase.storage().ref();\n  return storageRef.child(`${user.uid}/user_images/${filename}`).put(file);\n}\n\nexport function deleteFromFirebaseStorage(filename) {\n  const userUid = firebase.auth().currentUser.uid;\n  const storageRef = firebase.storage().ref();\n  const photoRef = storageRef.child(`${userUid}/user_images/${filename}`);\n  return photoRef.delete();\n}\n\nexport function addEventChatComment(eventId, values) {\n  const user = firebase.auth().currentUser;\n  const newComment = {\n    displayName: user.displayName,\n    photoURL: user.photoURL,\n    uid: user.uid,\n    text: values.comment,\n    date: Date.now(),\n    parentId: values.parentId,\n  };\n  return firebase.database().ref(`chat/${eventId}`).push(newComment);\n}\n\nexport function getEventChatRef(eventId) {\n  return firebase.database().ref(`chat/${eventId}`).orderByKey();\n}\n\nexport function getUserFeedRef() {\n  const user = firebase.auth().currentUser;\n  return firebase\n    .database()\n    .ref(`posts/${user.uid}`)\n    .orderByKey()\n    .limitToLast(5);\n}\n","export const LISTEN_TO_CURRENT_USER_PROFILE = 'LISTEN_TO_CURRENT_USER_PROFILE';\nexport const LISTEN_TO_SELECTED_USER_PROFILE = 'LISTEN_TO_SELECTED_USER_PROFILE';\nexport const LISTEN_TO_USER_PHOTOS = 'LISTEN_TO_USER_PHOTOS';\nexport const LISTEN_TO_USER_EVENTS = 'LISTEN_TO_USER_EVENTS';\nexport const LISTEN_TO_FOLLOWERS = 'LISTEN_TO_FOLLOWERS';\nexport const LISTEN_TO_FOLLOWINGS = 'LISTEN_TO_FOLLOWINGS';\nexport const SET_FOLLOW_USER = 'SET_FOLLOW_USER';\nexport const SET_UNFOLLOW_USER = 'SET_UNFOLLOW_USER';\nexport const CLEAR_FOLLOWINGS = 'CLEAR_FOLLOWINGS';\nexport const LISTEN_TO_FEED = 'LISTEN_TO_FEED';\n","import { LISTEN_TO_CURRENT_USER_PROFILE, LISTEN_TO_FEED, LISTEN_TO_FOLLOWERS, LISTEN_TO_FOLLOWINGS, LISTEN_TO_SELECTED_USER_PROFILE, LISTEN_TO_USER_EVENTS, LISTEN_TO_USER_PHOTOS, SET_FOLLOW_USER, SET_UNFOLLOW_USER,} from \"./profileConstants\";\n\nexport function listenToCurrentUserProfile(profile) {\n    return {\n        type: LISTEN_TO_CURRENT_USER_PROFILE,\n        payload: profile\n    }\n}\n\nexport function listenToSelectedUserProfile(profile) {\n    return {\n        type: LISTEN_TO_SELECTED_USER_PROFILE,\n        payload: profile\n    }\n}\n\nexport function listenToUserPhotos(photos) {\n    return {\n        type: LISTEN_TO_USER_PHOTOS,\n        payload: photos\n    }\n}\n\nexport function listenToUserEvents(events) {\n    return {\n        type: LISTEN_TO_USER_EVENTS,\n        payload: events\n    }\n}\n\nexport function listenToFollowers(followers) {\n    return {\n        type: LISTEN_TO_FOLLOWERS,\n        payload: followers\n    }\n}\n\nexport function listenToFollowings(followings) {\n    return {\n        type: LISTEN_TO_FOLLOWINGS,\n        payload: followings\n    }\n}\n\nexport function setFollowUser() {\n    return {\n        type: SET_FOLLOW_USER\n    }\n}\n\nexport function setUnfollowUser() {\n    return {\n        type: SET_UNFOLLOW_USER\n    }\n}\n\nexport function listenToFeed(feed) {\n    return {\n        type: LISTEN_TO_FEED,\n        payload: feed\n    }\n}","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Feed } from \"semantic-ui-react\";\nimport { formatDistance } from 'date-fns';\n\nexport default function EventFeedItem({ post }) {\n  let summary;\n  switch (post.code) {\n    case \"joined-event\":\n      summary = (\n        <>\n          <Link to={`/profile/${post.userUid}`}>{post.displayName}</Link> has\n          signed up to <Link to={`/events/${post.eventId}`}>{post.title}</Link>\n        </>\n      );\n      break;\n    case \"left-event\":\n      summary = (\n        <>\n          <Link to={`/profile/${post.userUid}`}>{post.displayName}</Link> has\n          canceled their place on\n          <Link to={`/events/${post.eventId}`}>{post.title}</Link>\n        </>\n      );\n      break;\n    default:\n      summary = \"Something happened\";\n      break;\n  }\n  return (\n      <Feed.Event>\n          <Feed.Label image={post.photoURL} />\n          <Feed.Content>\n              <Feed.Date>{formatDistance(new Date(post.date), new Date())} ago</Feed.Date>\n              <Feed.Summary>{summary}</Feed.Summary>\n          </Feed.Content>\n      </Feed.Event>\n  )\n}\n","import React, { useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Feed, Header, Segment } from \"semantic-ui-react\";\nimport { getUserFeedRef, firebaseObjectToArray } from '../../../app/firestore/firebaseService'\nimport { listenToFeed } from \"../../profiles/profileActions\";\nimport EventFeedItem from \"./EventFeedItem\";\n\nexport default function EventsFeed() {\n  const dispatch = useDispatch();\n \n  const { feed } = useSelector((state) => state.profile);\n\n  useEffect(() => {\n      getUserFeedRef().on('value', snapshot => {\n        if (!snapshot.exists()) {\n            return;\n        }\n        const feed = firebaseObjectToArray(snapshot.val()).reverse();\n        dispatch(listenToFeed(feed))\n      })\n      return () => {\n          getUserFeedRef().off();\n      }\n  }, [dispatch])\n\n\n  return (\n    <>\n      <Header attached color=\"blue\" icon=\"newspaper\" content=\"News feed\" />\n      <Segment attached=\"bottom\">\n        <Feed>\n          {feed.map(post => (\n            <EventFeedItem post={post} key={post.id} />\n          ))}\n        </Feed>\n      </Segment>\n    </>\n  );\n}\n","import React, { useEffect, useState } from \"react\";\nimport { Grid, Loader } from \"semantic-ui-react\";\nimport EventList from \"./EventList\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport EventListItemPlaceholder from \"./EventListItemPlaceholder\";\nimport EventFilters from \"./EventFilters\";\n\nimport EventsFeed from \"./EventsFeed\";\n\nimport { fetchEvents } from \"../eventActions\";\nimport { RETAIN_STATE } from \"../eventConstants\";\n\n\n\nexport default function EventDashboard() {\n  const limit = 2;\n  const dispatch = useDispatch();\n  const { events, moreEvents, filter, startDate, lastVisible, retainState } = useSelector((state) => state.event);\n  const { loading } = useSelector((state) => state.async);\n  const { authenticated } = useSelector((state) => state.auth);\n  const [loadingInitial, setLoadingInitial] = useState(false);\n \n \n\n  useEffect(() => {\n    if (retainState) return;\n    setLoadingInitial(true);\n    dispatch(fetchEvents(filter, startDate, limit)).then(() => {\n      setLoadingInitial(false);\n    });\n    return () => {\n      dispatch({type: RETAIN_STATE})\n    }\n  }, [dispatch, filter, startDate, retainState]);\n\n  function handleFetchNextEvents() {\n    dispatch(fetchEvents(filter, startDate, limit, lastVisible));\n  }\n\n  return (\n    <Grid>\n      <Grid.Column width={10}>\n\n        {loadingInitial && (\n          <>\n            <EventListItemPlaceholder />\n            <EventListItemPlaceholder />\n          </>\n        )}\n        <EventList\n          events={events}\n          getNextEvents={handleFetchNextEvents}\n          loading={loading}\n          moreEvents={moreEvents}\n        />\n      </Grid.Column>\n      <Grid.Column width={6}>\n        {authenticated && <EventsFeed />}\n        <EventFilters\n          \n          loading={loading}\n        />\n      </Grid.Column>\n      <Grid.Column width={10}>\n          <Loader active={loading} />\n      </Grid.Column>\n    </Grid>\n  );\n}\n","import { useEffect } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { asyncActionError, asyncActionFinish, asyncActionStart} from '../async/asyncReducer';\nimport { dataFromSnapshot } from \"../firestore/firestoreService\";\n\nexport default function useFirestoreDoc({query, data, deps, shouldExecute = true}) {\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        if (!shouldExecute) return; \n        dispatch(asyncActionStart());\n        const unsubscribe = query().onSnapshot(\n            snapshot => {\n                if (!snapshot.exists) {\n                    dispatch(asyncActionError({code: 'not-found', message: 'Could not find document'}));\n                    return;\n                }\n                data(dataFromSnapshot(snapshot));\n                dispatch(asyncActionFinish());\n            },\n            error => dispatch(asyncActionError())\n        );\n        return () => {\n            unsubscribe()\n        }\n    }, deps) // eslint-disable-line react-hooks/exhaustive-deps\n}","import { Field, Form, Formik } from \"formik\";\nimport React from \"react\";\nimport { toast } from \"react-toastify\";\nimport { addEventChatComment } from \"../../../app/firestore/firebaseService\";\nimport { Loader } from \"semantic-ui-react\";\nimport * as Yup from 'yup';\n\nexport default function EventDetailedChatForm({ eventId, parentId, closeForm }) {\n  return (\n    <Formik\n      initialValues={{ comment: \"\" }}\n      validationSchema={Yup.object({\n          comment: Yup.string().required()\n      })}\n      onSubmit={async (values, { setSubmitting, resetForm }) => {\n        try {\n          await addEventChatComment(eventId, {...values, parentId});\n          resetForm();\n        } catch (error) {\n          toast.error(error.message);\n        } finally {\n          setSubmitting(false);\n          closeForm({open: false, commentId: null})\n        }\n      }}\n    >\n      {({ isSubmitting, handleSubmit, isValid }) => (\n        <Form className=\"ui form\">\n          <Field name=\"comment\">\n            {({ field }) => (\n              <div style={{ position: \"relative\" }}>\n                <Loader active={isSubmitting} />\n                <textarea\n                  rows={2}\n                  {...field}\n                  placeholder=\"Enter your comment (Press ENTER to submit, SHIFT + ENTER for new line)\"\n                  onKeyPress={(e) => {\n                      if (e.key === 'Enter' && e.shiftKey) {\n                          return;\n                      }\n                      if (e.key === 'Enter' && !e.shiftKey) {\n                          e.preventDefault();\n                          isValid && handleSubmit();\n                      }\n                  }}\n                >\n\n                </textarea>\n              </div>\n            )}\n          </Field>\n        </Form>\n      )}\n    </Formik>\n  );\n}\n","\n\nexport function delay(ms) {\n  return new Promise((resolve) => setTimeout(resolve, ms));\n}\n\n\nexport function getFileExtension(filename) {\n  return filename.slice((filename.lastIndexOf('.') -1 >>> 0) + 2);\n}\n\nexport function createDataTree(dataset) {\n  let hashtable = Object.create(null);\n  dataset.forEach(a => hashtable[a.id] = {...a, childNodes: []});\n  let dataTree = [];\n  dataset.forEach(a => {\n    if (a.parentId) hashtable[a.parentId].childNodes.push(hashtable[a.id]);\n    else dataTree.push(hashtable[a.id]);\n  });\n  return dataTree;\n}\n","import React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport { Segment, Header, Comment } from \"semantic-ui-react\";\nimport {\n  firebaseObjectToArray,\n  getEventChatRef,\n} from \"../../../app/firestore/firebaseService\";\nimport { listenToEventsChat } from \"../eventActions\";\nimport EventDetailedChatForm from \"./EventDetailedChatForm\";\nimport { formatDistance } from \"date-fns\";\nimport { CLEAR_COMMENTS } from \"../eventConstants\";\nimport { createDataTree } from \"../../../app/common/util/util\";\n\nexport default function EventDetailedChat({ eventId }) {\n  const dispatch = useDispatch();\n  const { comments } = useSelector((state) => state.event);\n  const { authenticated } = useSelector((state) => state.auth);\n  const [showReplyForm, setShowReplyForm] = useState({\n    open: false,\n    commentId: null,\n  });\n\n  function handleCloseReplyForm() {\n    setShowReplyForm({ open: false, commentId: null });\n  }\n\n  useEffect(() => {\n    getEventChatRef(eventId).on(\"value\", (snapshot) => {\n      if (!snapshot.exists()) return;\n      dispatch(\n        listenToEventsChat(firebaseObjectToArray(snapshot.val()).reverse())\n      );\n    });\n    return () => {\n      dispatch({ type: CLEAR_COMMENTS });\n      getEventChatRef().off();\n    };\n  }, [eventId, dispatch]);\n\n  return (\n    <>\n      <Segment\n        textAlign=\"center\"\n        attached=\"top\"\n        inverted\n        color='facebook'\n        style={{ border: \"none\" }}\n      >\n        <Header>{authenticated ? 'Chat about this event' : 'Sign in to view and comment'}</Header>\n      </Segment>\n\n      {authenticated && \n      <Segment attached>\n        <EventDetailedChatForm\n          eventId={eventId}\n          parentId={0}\n          closeForm={setShowReplyForm}\n        />\n        <Comment.Group>\n          {createDataTree(comments).map((comment) => (\n            <Comment key={comment.id}>\n              <Comment.Avatar src={comment.photoURL || process.env.PUBLIC_URL + '/assets/user.png'} />\n              <Comment.Content>\n                <Comment.Author as={Link} to={`/profile/${comment.uid}`}>\n                  {comment.displayName}\n                </Comment.Author>\n                <Comment.Metadata>\n                  <div>{formatDistance(comment.date, new Date())}</div>\n                </Comment.Metadata>\n                <Comment.Text>\n                  {comment.text.split(\"\\n\").map((text, i) => (\n                    <span key={i}>\n                      {text}\n                      <br />\n                    </span>\n                  ))}\n                </Comment.Text>\n                <Comment.Actions>\n                  <Comment.Action\n                    onClick={() =>\n                      setShowReplyForm({ open: true, commentId: comment.id })\n                    }\n                  >\n                    Reply\n                  </Comment.Action>\n                  {showReplyForm.open &&\n                    showReplyForm.commentId === comment.id && (\n                      <EventDetailedChatForm\n                        eventId={eventId}\n                        parentId={comment.id}\n                        closeForm={handleCloseReplyForm}\n                      />\n                    )}\n                </Comment.Actions>\n              </Comment.Content>\n              {comment.childNodes.length > 0 && (\n                <Comment.Group>\n                  {comment.childNodes.reverse().map((child) => (\n                    <Comment key={child.id}>\n                      <Comment.Avatar\n                        src={child.photoURL || process.env.PUBLIC_URL + '/assets/user.png'}\n                      />\n                      <Comment.Content>\n                        <Comment.Author as={Link} to={`/profile/${child.uid}`}>\n                          {child.displayName}\n                        </Comment.Author>\n                        <Comment.Metadata>\n                          <div>{formatDistance(child.date, new Date())}</div>\n                        </Comment.Metadata>\n                        <Comment.Text>\n                          {child.text.split(\"\\n\").map((text, i) => (\n                            <span key={i}>\n                              {text}\n                              <br />\n                            </span>\n                          ))}\n                        </Comment.Text>\n                        <Comment.Actions>\n                          <Comment.Action\n                            onClick={() =>\n                              setShowReplyForm({\n                                open: true,\n                                commentId: child.id,\n                              })\n                            }\n                          >\n                            Reply\n                          </Comment.Action>\n                          {showReplyForm.open &&\n                            showReplyForm.commentId === child.id && (\n                              <EventDetailedChatForm\n                                eventId={eventId}\n                                parentId={child.parentId}\n                                closeForm={handleCloseReplyForm}\n                              />\n                            )}\n                        </Comment.Actions>\n                      </Comment.Content>\n                    </Comment>\n                  ))}\n                </Comment.Group>\n              )}\n            </Comment>\n          ))}\n        </Comment.Group>\n      </Segment>}\n    </>\n  );\n}\n","const OPEN_MODAL = 'OPEN_MODAL';\nconst CLOSE_MODAL = 'CLOSE_MODAL';\n\nexport function openModal(payload) {\n    return {\n        type: OPEN_MODAL,\n        payload\n    }\n}\n\nexport function closeModal() {\n    return {\n        type: CLOSE_MODAL,\n        \n    }\n}\n\nconst initialState = null;\n\nexport default function modalReducer(state = initialState, {type, payload}) {\n    switch (type) {\n        case OPEN_MODAL:\n            const {modalType, modalProps} = payload;\n            return {modalType, modalProps};\n            case CLOSE_MODAL:\n                return null;\n                default:\n                    return state;\n    }\n}","import React, { useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Button, Divider, Modal } from \"semantic-ui-react\";\nimport { openModal } from \"../../app/common/modals/modalReducer\";\n\nexport default function UnauthModal({ history, setModalOpen }) {\n  const [open, setOpen] = useState(true);\n  const { prevLocation } = useSelector((state) => state.auth);\n  const dispatch = useDispatch();\n\n  function handleClose() {\n    if (!history) {\n      setOpen(false);\n      setModalOpen(false);\n      return;\n    }\n    if (history && prevLocation) {\n      history.push(prevLocation.pathname);\n    } else {\n      history.push(\"/events\");\n    }\n    setOpen(false);\n  }\n\nfunction handleOpenLoginModal(modalType) {\n  dispatch(openModal({modalType}))\n  setOpen(false)\n  if (setModalOpen !== undefined) {\n    setModalOpen(false)\n  }\n}\n\n  return (\n    <Modal open={open} size=\"mini\" onClose={handleClose}>\n      <Modal.Header content=\"You need to be signed in to do that\" />\n      <Modal.Content>\n        <p>Please login or register to see this content</p>\n        <Button.Group widths={4}>\n          <Button\n            fluid\n            color=\"blue\"\n            content=\"Login\"\n            onClick={() => handleOpenLoginModal('LoginForm')}\n          />\n          <Button.Or />\n          <Button\n            fluid\n            color=\"gray\"\n            content=\"Register\"\n            onClick={() => handleOpenLoginModal('RegisterForm')}\n          />\n        </Button.Group>\n        <Divider />\n        <div style={{ textAlign: \"center\" }}>\n          <p>Or click cancel to continue as a guest</p>\n          <Button onClick={handleClose} content=\"Cancel\" />\n        </div>\n      </Modal.Content>\n    </Modal>\n  );\n}\n","import React, { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Segment, Image, Item, Header, Button } from \"semantic-ui-react\";\nimport { format } from \"date-fns\";\nimport { toast } from \"react-toastify\";\nimport { addUserAttendance, cancelUserAttendance } from \"../../../app/firestore/firestoreService\";\nimport { useSelector } from \"react-redux\";\nimport UnauthModal from '../../auth/UnauthModal';\n\n\nconst eventImageStyle = {\n  filter: \"brightness(30%)\",\n};\n\nconst eventImageTextStyle = {\n  position: \"absolute\",\n  bottom: \"5%\",\n  left: \"5%\",\n  width: \"100%\",\n  height: \"auto\",\n  color: \"white\",\n};\n\nexport default function EventDetailedHeader({ event, isHost, isGoing }) {\n  const [loading, setLoading] = useState(false);\n  const {authenticated} = useSelector(state => state.auth);\n  const {modalOpen, setModalOpen} = useState(false);\n\n  async function handleUserJoinEvent() {\n    setLoading(true);\n    try {\n      await addUserAttendance(event);\n    } catch (error) {\n      toast.error(error.message);\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  async function handleUserLeaveEvent() {\n    setLoading(true);\n    try {\n      await cancelUserAttendance(event);\n    } catch (error) {\n      toast.error(error.message);\n    } finally {\n      setLoading(false);\n    }\n  }\n\n\n  return (\n\n    <>\n    {modalOpen &&\n    <UnauthModal setModalOpen={setModalOpen} />\n    }\n    <Segment.Group>\n      <Segment basic attached=\"top\" style={{ padding: \"0\" }}>\n        <Image\n          src={process.env.PUBLIC_URL + `/assets/categoryImages/${event.category}.jpg`}\n          fluid\n          style={eventImageStyle}\n        />\n\n        <Segment basic stye={eventImageTextStyle}>\n          <Item.Group>\n            <Item>\n              <Item.Content>\n                <Header\n                  size=\"huge\"\n                  content={event.title}\n                  style={{ color: \"black\" }}\n                />\n                <p>{format(event.date, \"MMMM d, yyyy h:mm a\")}</p>\n                <p>\n                  Hosted by <strong><Link to={`/profile/${event.hostUid}`}>{event.hostedBy}</Link></strong>\n                </p>\n              </Item.Content>\n            </Item>\n          </Item.Group>\n        </Segment>\n      </Segment>\n\n      <Segment attached=\"bottom\" clearing>\n        {!isHost && (\n          <>\n            {isGoing ? (\n              <Button onClick={handleUserLeaveEvent} loading={loading}>Cancel My Place</Button>\n            ) : (\n              <Button\n                onClick={authenticated ? handleUserJoinEvent : () => setModalOpen(true)}\n                loading={loading}\n                color=\"facebook\"\n              >\n                JOIN THIS EVENT\n              </Button>\n            )}\n          </>\n        )}\n\n        {isHost && (\n          <Button\n            as={Link}\n            to={`/manage/${event.id}`}\n            color=\"facebook\"\n            floated=\"right\"\n            \n          >\n            Manage Event\n          </Button>\n        )}\n      </Segment>\n    </Segment.Group>\n    </>\n    \n  );\n}\n","import React from \"react\";\nimport { Icon, Segment } from \"semantic-ui-react\";\nimport GoogleMapReact from \"google-map-react\";\n\nfunction Marker() {\n  return (<Icon name=\"marker\" size=\"big\" color=\"red\" />)\n}\n\nexport default function EventDetailedMap({latLng}) {\n  const zoom = 14;\n  return (\n    <Segment attached=\"bottom\" style={{ padding: 0 }}>\n      <div style={{ height: 300, width: \"100%\" }}>\n        <GoogleMapReact\n          bootstrapURLKeys={{ key: \"AIzaSyDgO0x7YfN3CkJv_vBMfxnYADSdk2ZUTy0\" }}\n          center={latLng}\n          zoom={zoom}\n        >\n            \n          <Marker lat={latLng.lat} lng={latLng.lng}  />\n        </GoogleMapReact>\n      </div>\n    </Segment>\n  )\n}\n","import React, { useState } from 'react';\nimport { Segment, Grid, Icon, Button } from 'semantic-ui-react'\nimport { format } from 'date-fns';\nimport EventDetailedMap from './EventDetailedMap';\n\nexport default function EventDetailedInfo({event}) {\n    const [mapOpen, setMapOpenToggle] = useState(false)\n    return(\n        <Segment.Group>\n    <Segment attached=\"top\">\n        <Grid>\n            <Grid.Column width={1}>\n                <Icon size=\"large\" color=\"grey\" name=\"info\"/>\n            </Grid.Column>\n            <Grid.Column width={15}>\n                <p>{event.description}</p>\n            </Grid.Column>\n        </Grid>\n    </Segment>\n    <Segment attached>\n        <Grid verticalAlign=\"middle\">\n            <Grid.Column width={1}>\n                <Icon name=\"calendar\" size=\"large\" color=\"grey\"/>\n            </Grid.Column>\n            <Grid.Column width={15}>\n                <span>{format(event.date, 'MMMM d, yyyy h:mm a')}</span>\n            </Grid.Column>\n        </Grid>\n    </Segment>\n    <Segment attached>\n        <Grid verticalAlign=\"middle\">\n            <Grid.Column width={1}>\n                <Icon name=\"marker\" size=\"large\" color=\"blue\"/>\n            </Grid.Column>\n            <Grid.Column width={11}>\n                <span>{event.venue.address}</span>\n            </Grid.Column>\n            <Grid.Column width={4}>\n                <Button \n                onClick={() => setMapOpenToggle(!mapOpen)}   \n                color=\"facebook\" \n                size=\"tiny\" \n                content={mapOpen ? 'Hide Map' : 'Show Map'}/>\n            </Grid.Column>\n        </Grid>\n    </Segment>\n    {mapOpen && \n    <EventDetailedMap latLng={event.venue.latLng} />}\n</Segment.Group>\n    )\n}","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Segment, Item, Label } from \"semantic-ui-react\";\n\nexport default function EventDetailedSidebar({ attendees, hostUid }) {\n  return (\n    <>\n      <Segment\n        textAlign=\"center\"\n        style={{ border: \"none\" }}\n        attached=\"top\"\n        primary\n        inverted\n        \n      >\n        {attendees.length} {attendees.length > 1 ? \"People\" : \"Person\"} Going\n      </Segment>\n      <Segment attached>\n        <Item.Group relaxed divided>\n          {attendees.map((attendee) => (\n            <Item as={Link} to={`/profile/${attendee.id}`} key={attendee.id} style={{ position: \"relative\" }}>\n              {hostUid === attendee.id && (\n                <Label style={{position: 'absolute'}} color='orange' ribbon='right' content='Host' />\n              )}\n              <Item.Image\n                size=\"tiny\"\n                src={attendee.photoURL ||  `/assets/user.png`}\n              />\n              <Item.Content verticalAlign=\"middle\">\n                <Item.Header as=\"h3\">\n                  <span>{attendee.displayName}</span>\n                </Item.Header>\n              </Item.Content>\n            </Item>\n          ))}\n        </Item.Group>\n      </Segment>\n    </>\n  );\n}\n","import React from 'react';\nimport { Dimmer, Loader } from 'semantic-ui-react';\n\nexport default function LoadingComponent({inverted = true, content = 'Loading...'}) {\n return (\n     <Dimmer inverted={inverted} active={true}>\n         <Loader content={content} />\n     </Dimmer>\n )\n}","import React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Grid } from \"semantic-ui-react\";\nimport { listenToEventFromFirestore } from \"../../../app/firestore/firestoreService\";\nimport useFirestoreDoc from \"../../../app/hooks/useFirestoreDoc\";\nimport EventDetailedChat from \"./EventDetailedChat\";\nimport EventDetailedHeader from \"./EventDetailedHeader\";\nimport EventDetailedInfo from \"./EventDetailedInfo\";\nimport EventDetailedSidebar from \"./EventDetailedSidebar\";\n\nimport LoadingComponent from \"../../../app/layout/LoadingComponent\";\nimport { Redirect } from \"react-router\";\nimport { listenToSelectedEvent } from \"../eventActions\";\n\nexport default function EventDetailedPage({ match }) {\n  const dispatch = useDispatch();\n  const { currentUser } = useSelector((state) => state.auth);\n  const event = useSelector((state) => state.event.selectedEvent);\n  const { loading, error } = useSelector((state) => state.async);\n  const isHost = event?.hostUid === currentUser?.uid;\n  const isGoing = event?.attendees?.some((a) => a.id === currentUser?.uid);\n\n  useFirestoreDoc({\n    query: () => listenToEventFromFirestore(match.params.id),\n    data: (event) => dispatch(listenToSelectedEvent(event)),\n    deps: [match.params.id, dispatch],\n  });\n\n  if (loading || (!event && !error))\n    return <LoadingComponent content=\"Loading event...\" />;\n\n  if (error) return <Redirect to=\"/error\" />;\n\n  return (\n    <Grid>\n      <Grid.Column width={10}>\n        <EventDetailedHeader event={event} isGoing={isGoing} isHost={isHost} />\n        <EventDetailedInfo event={event} />\n        <EventDetailedChat eventId={event.id} />\n      </Grid.Column>\n      <Grid.Column width={6}>\n        <EventDetailedSidebar\n          attendees={event?.attendees}\n          hostUid={event.hostUid}\n        />\n      </Grid.Column>\n    </Grid>\n  );\n}\n","import React from 'react';\nimport { FormField, Label } from 'semantic-ui-react';\nimport { useField } from 'formik';\n\nexport default function MyTextInput({label, ...props}) {\n    const [field, meta] = useField(props);\n    return (\n        <FormField error={meta.touched && !!meta.error}>\n            <label>{label}</label>\n            <input {...field} {...props} />\n            {meta.touched && meta.error ? (\n                <Label basic color='red'>{meta.error}</Label>\n            ) : null}\n        </FormField>\n    )\n}","import React from 'react';\nimport { FormField, Label } from 'semantic-ui-react';\nimport { useField } from 'formik';\n\nexport default function MyTextArea({label, ...props}) {\n    const [field, meta] = useField(props);\n    return (\n        <FormField error={meta.touched && !!meta.error}>\n            <label>{label}</label>\n            <textarea {...field} {...props} />\n            {meta.touched && meta.error ? (\n                <Label basic color='red'>{meta.error}</Label>\n            ) : null}\n        </FormField>\n    )\n}","import React from 'react';\nimport { FormField, Label, Select } from 'semantic-ui-react';\nimport { useField } from 'formik';\n\nexport default function MySelectInput({label, ...props}) {\n    const [field, meta, helpers] = useField(props);\n    return (\n        <FormField error={meta.touched && !!meta.error}>\n            <label>{label}</label>\n            <Select\n                clearable\n                value={field.value || null}\n                onChange={(e, d) => helpers.setValue(d.value)}\n                onBlur={() => helpers.setTouched(true)}\n                {...props}\n            />\n            {meta.touched && meta.error ? (\n                <Label basic color='red'>{meta.error}</Label>\n            ) : null}\n        </FormField>\n    )\n}","\n\nexport const categoryData = [\n    {key: 'drinks', text: 'Drinks', value: 'drinks'},\n    {key: 'culture', text: 'Culture', value: 'culture'},\n    {key: 'film', text: 'Film', value: 'film'},\n    {key: 'food', text: 'Food', value: 'food'},\n    {key: 'music', text: 'Music', value: 'music'},\n    {key: 'travel', text: 'Travel', value: 'travel'},\n];","import React from 'react';\nimport { FormField, Label } from 'semantic-ui-react';\nimport { useField, useFormikContext } from 'formik';\nimport DatePicker from 'react-datepicker';\nimport 'react-datepicker/dist/react-datepicker.css'\n\nexport default function MyDateInput({label, ...props}) {\n    const {setFieldValue} = useFormikContext()\n    const [field, meta] = useField(props);\n    return (\n        <FormField error={meta.touched && !!meta.error}>\n            <label>{label}</label>\n            <DatePicker\n                {...field}\n                {...props}\n                selected={(field.value && new Date(field.value)) || null}\n                onChange={value => setFieldValue(field.name, value)}\n            />\n            {meta.touched && meta.error ? (\n                <Label basic color='red'>{meta.error}</Label>\n            ) : null}\n        </FormField>\n    )\n}","import React from \"react\";\nimport { FormField, Label, List, Segment } from \"semantic-ui-react\";\nimport { useField } from \"formik\";\nimport PlacesAutocomplete, {\n  geocodeByAddress,\n  getLatLng,\n} from \"react-places-autocomplete\";\n\nexport default function MyPlaceInput({ label, options, ...props }) {\n  const [field, meta, helpers] = useField(props);\n\n  function handleSelect(address) {\n    geocodeByAddress(address)\n      .then((results) => getLatLng(results[0]))\n      .then((latLng) => helpers.setValue({ address, latLng }))\n      .catch((error) => helpers.setError(error));\n  }\n\n  function handleBlur(e) {\n      field.onBlur(e);\n      if (!field.value.latLng) {\n          helpers.setValue({address: '', latLng: null})\n      }\n  }\n\n  return (\n    <PlacesAutocomplete\n      value={field.value[\"address\"]}\n      onChange={(value) => helpers.setValue({ address: value })}\n      onSelect={(value) => handleSelect(value)}\n      searchOptions={options}\n    >\n      {({ getInputProps, suggestions, getSuggestionItemProps, loading }) => (\n        <FormField error={meta.touched && !!meta.error}>\n          <input {...getInputProps({name: field.name, onBlur: (e) => handleBlur(e),...props})} />\n          {meta.touched && meta.error ? (\n            <Label basic color=\"red\">\n              {meta.error['address']}\n            </Label>\n          ) : null}\n          {suggestions?.length > 0 && (\n              <Segment loading={loading} style={{marginTop: 0, position: 'absolute', zIndex: 1000, width: '100%'}}>\n                  <List selection>\n                    {suggestions.map(suggestion => (\n                        <List.Item {...getSuggestionItemProps(suggestion)}>\n                            <List.Header>\n                                {suggestion.formattedSuggestion.mainText}\n                            </List.Header>\n                            <List.Description>\n                                {suggestion.formattedSuggestion.secondaryText}\n                            </List.Description>\n                        </List.Item>\n                    ))}\n                  </List>\n\n              </Segment>\n          )}\n        </FormField>\n      )}\n    </PlacesAutocomplete>\n  );\n}\n","/* global google */\n\nimport React, { useEffect, useState } from \"react\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport { Header, Segment, Button, Confirm } from \"semantic-ui-react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { clearSelectedEvent, listenToSelectedEvent } from \"../eventActions\";\nimport { Formik, Form } from \"formik\";\nimport { toast } from \"react-toastify\";\nimport * as Yup from \"yup\";\nimport MyTextInput from \"../../../app/common/form/MyTextInput\";\nimport MyTextArea from \"../../../app/common/form/MyTextArea\";\nimport MySelectInput from \"../../../app/common/form/MySelectInput\";\nimport { categoryData } from \"../../../app/api/categoryOptions\";\nimport MyDateInput from \"../../../app/common/form/MyDateInput\";\nimport MyPlaceInput from \"../../../app/common/form/MyPlaceInput\";\nimport useFirestoreDoc from \"../../../app/hooks/useFirestoreDoc\";\nimport {\n  addEventToFirestore,\n  cancelEventToggle,\n  listenToEventFromFirestore,\n  updateEventInFirestore,\n} from \"../../../app/firestore/firestoreService\";\nimport LoadingComponent from \"../../../app/layout/LoadingComponent\";\n\nexport default function EventForm({ match, history, location }) {\n  const dispatch = useDispatch();\n  const [loadingCancel, setLoadingCancel] = useState(false);\n  const [confirmOpen, setConfirmOpen] = useState(false);\n  const { selectedEvent } = useSelector((state) => state.event);\n\n  const { loading, error } = useSelector((state) => state.async);\n\n  useEffect(() => {\n    if (location.pathname !== '/createEvent') return;\n    dispatch(clearSelectedEvent());\n\n  }, [dispatch, location.pathname])\n\n  const initialValues = selectedEvent ?? {\n    title: \"\",\n    category: \"\",\n    description: \"\",\n    city: {\n      address: \"\",\n      latLng: null,\n    },\n    venue: {\n      address: \"\",\n      latLng: null,\n    },\n    date: \"\",\n  };\n\n  const validationSchema = Yup.object({\n    title: Yup.string().required(\"You must provide a title\"),\n    category: Yup.string().required(\"You must provide a category\"),\n    description: Yup.string().required(),\n    city: Yup.object().shape({\n      address: Yup.string().required(\"City is required\"),\n    }),\n    venue: Yup.object().shape({\n      address: Yup.string().required(\"Venue is required\"),\n    }),\n    date: Yup.string().required(),\n  });\n\n  async function handleCancelToggle(event) {\n    setConfirmOpen(false);\n    setLoadingCancel(true);\n    try {\n      await cancelEventToggle(event);\n      setLoadingCancel(false);\n    } catch (error) {\n      setLoadingCancel(true);\n      toast.error(error.message);\n    }\n  }\n\n  useFirestoreDoc({\n    shouldExecute: match.params.id !== selectedEvent?.id && location.pathname !== '/createEvent',\n    query: () => listenToEventFromFirestore(match.params.id),\n    data: (event) => dispatch(listenToSelectedEvent(event)),\n    deps: [match.params.id, dispatch],\n  });\n\n  if (loading) return <LoadingComponent content=\"Loading event...\" />;\n\n  if (error) return <Redirect to=\"/error\" />;\n\n  return (\n    <Segment clearing>\n      <Formik\n      enableReinitialize\n        initialValues={initialValues}\n        validationSchema={validationSchema}\n        onSubmit={async (values, { setSubmitting }) => {\n          try {\n            selectedEvent\n              ? await updateEventInFirestore(values)\n              : await addEventToFirestore(values);\n            setSubmitting(false);\n            history.push(\"/events\");\n          } catch (error) {\n            toast.error(error.message);\n            setSubmitting(false);\n          }\n        }}\n      >\n        {({ isSubmitting, dirty, isValid, values }) => (\n          <Form className=\"ui form\">\n            <Header content=\"EVENT DETAILS\" />\n            <MyTextInput name=\"title\" placeholder=\"Event Title\" />\n            <MySelectInput\n              name=\"category\"\n              placeholder=\"Category\"\n              options={categoryData}\n            />\n            <MyTextArea name=\"description\" placeholder=\"Description\" rows={3} />\n            <Header content=\"EVENT LOCATION DETAILS\" />\n            <MyPlaceInput name=\"city\" placeholder=\"City\" />\n            <MyPlaceInput\n              name=\"venue\"\n              disabled={!values.city.latLng}\n              placeholder=\"Venue\"\n              options={{\n                location: new google.maps.LatLng(values.city.latLng),\n                radius: 1000,\n                types: [\"establishment\"],\n              }}\n            />\n            <MyDateInput\n              name=\"date\"\n              placeholderText=\"Event Date\"\n              timeFormat=\"HH:mm\"\n              showTimeSelect\n              timeCaption=\"time\"\n              dateFormat=\"MMMM d, yyyy h:mm a\"\n              autoComplete='off'\n            />\n            {selectedEvent && (\n              <Button\n                loading={loadingCancel}\n                type=\"button\"\n                floated=\"left\"\n                color={selectedEvent.isCancelled ? \"green\" : \"red\"}\n                content={\n                  selectedEvent.isCancelled\n                    ? \"Reactivate Event\"\n                    : \"Cancel Event\"\n                }\n                onClick={() => setConfirmOpen(true)}\n              />\n            )}\n\n            <Button\n              loading={isSubmitting}\n              disabled={!isValid || !dirty || isSubmitting}\n              type=\"submit\"\n              floated=\"right\"\n              positive\n              content=\"Submit\"\n            />\n\n            <Button\n              disabled={isSubmitting}\n              as={Link}\n              to=\"/events\"\n              type=\"submit\"\n              floated=\"right\"\n              content=\"Cancel\"\n            />\n          </Form>\n        )}\n      </Formik>\n      <Confirm\n        content={\n          selectedEvent?.isCancelled\n            ? \"This will reactivate the event - are you sure?\"\n            : \"This will cancel the event - are you sure?\"\n        }\n        open={confirmOpen}\n        onCancel={() => setConfirmOpen(false)}\n        onConfirm={() => handleCancelToggle(selectedEvent)}\n      />\n    </Segment>\n  );\n}\n","import React from 'react';\nimport { Segment, Container, Header, Button, Icon } from 'semantic-ui-react';\n\nexport default function HomePage({history}) {\n    return(\n        <Segment inverted textAlign='center' vertical className='masthead' >\n            <Container>\n                <Header as='h1' inverted>\n                    \n                    EventSpace\n                </Header>\n                <Button onClick={() => history.push('/events')} size='huge' inverted >\n                    Get Started\n                    <Icon name='right arrow' inverted />\n                </Button>\n            </Container> \n        </Segment>\n    )\n}","import React from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { Menu, Image, Dropdown } from \"semantic-ui-react\";\n\nimport { toast } from 'react-toastify';\nimport { signOutFirebase } from \"../../app/firestore/firebaseService\";\n\nexport default function SignedInMenu() {\n\n  const {currentUserProfile} = useSelector(state => state.profile);\n  const history = useHistory();\n\n  async function handleSignOut() {\n    try {\n      history.push('/');\n      await signOutFirebase();\n      \n    } catch (error) {\n      toast.error(error.message);\n    }\n  }\n\n  return (\n    <Menu.Item position=\"right\">\n      <Image avatar spaced='right' src={currentUserProfile?.photoURL || process.env.PUBLIC_URL + '/assets/user.png'} />\n      <Dropdown pointing='top left' text={currentUserProfile?.displayName} >\n      <Dropdown.Menu>\n          <Dropdown.Item as={Link} to='/createEvent' text='Create Event' icon='plus' />\n          <Dropdown.Item as={Link} to={`/profile/${currentUserProfile?.id}`} text='My Profile' icon='user' />\n          <Dropdown.Item as={Link} to='/account' text='My Account' icon='settings' />\n          <Dropdown.Item \n          onClick={handleSignOut}\n          text='Sign Out' \n          icon='power' \n          />\n      </Dropdown.Menu>\n      </Dropdown>\n    </Menu.Item>\n  );\n}\n","import React from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { Button, Menu } from \"semantic-ui-react\";\nimport { openModal } from \"../../app/common/modals/modalReducer\";\n\nexport default function SignedOutMenu({setAuthenticated}) {\n  const dispatch = useDispatch();\n  return (\n    <Menu.Item position=\"right\">\n      <Button onClick={() => dispatch(openModal({modalType: 'LoginForm'}))} basic inverted content=\"Login\" />\n      <Button\n      onClick={() => dispatch(openModal({modalType: 'RegisterForm'}))}\n        basic\n        inverted\n        content=\"Register\"\n        style={{ marginLeft: \"0.5em\" }}\n      />\n    </Menu.Item>\n  );\n}\n","import React from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { NavLink } from \"react-router-dom\";\nimport { Button, Container, Menu } from \"semantic-ui-react\";\nimport SignedInMenu from \"./SignedInMenu\";\nimport SignedOutMenu from \"./SignedOutMenu\";\n\nexport default function NavBar({ setFormOpen }) {\n  \n  const {authenticated} = useSelector(state => state.auth);\n\n \n\n  return (\n    <Menu inverted fixed=\"top\">\n      <Container>\n        <Menu.Item as={NavLink} exact to=\"/\" header>\n          <img src={process.env.PUBLIC_URL + `/assets/logo.png`} alt=\"logo\" style={{ marginRight: 15 }} />\n          EventSpace\n        </Menu.Item>\n        <Menu.Item as={NavLink} to=\"/events\" name=\"Events\" />\n        \n        {authenticated && (\n          <Menu.Item as={NavLink} to=\"/createEvent\">\n            <Button inverted  color='' content=\"Create Event\" />\n          </Menu.Item>\n        )}\n        {authenticated ? (\n          <SignedInMenu  />\n        ) : (\n          <SignedOutMenu />\n        )}\n      </Container>\n    </Menu>\n  );\n}\n","import React from \"react\";\nimport GoogleMapReact from \"google-map-react\";\n\nconst AnyReactComponent = ({ text }) => <div>{text}</div>;\n\nexport default function TestMap({location}) {\n  \n\n  return (\n    // Important! Always set the container height explicitly\n    <div style={{ height: \"100vh\", width: \"100%\" }}>\n      <GoogleMapReact\n        bootstrapURLKeys={{ key: \"AIzaSyDgO0x7YfN3CkJv_vBMfxnYADSdk2ZUTy0\" }}\n        center={location.center}\n        zoom={location.zoom}\n      >\n        <AnyReactComponent lat={location.center.lat} lng={location.center.lng} text=\"My Marker\" />\n      </GoogleMapReact>\n    </div>\n  );\n}\n","import React, { useState } from \"react\";\nimport PlacesAutocomplete, {\n  geocodeByAddress,\n  getLatLng,\n} from \"react-places-autocomplete\";\n\nexport default function TestPlaceInput({setLocation}) {\n  const [address, setAddress] = useState(\"\");\n\n  function handleChange(address) {\n    setAddress(address);\n  }\n\n  function handleSelect(address) {\n    geocodeByAddress(address)\n      .then((results) => getLatLng(results[0]))\n      .then((latLng) => {\n        console.log(\"Success\", latLng);\n        setLocation(latLng);\n      })\n      .catch((error) => console.error(\"Error\", error));\n    setAddress(address);\n  }\n\n  return (\n    <PlacesAutocomplete\n      value={address}\n      onChange={handleChange}\n      onSelect={handleSelect}\n    >\n      {({ getInputProps, suggestions, getSuggestionItemProps, loading }) => (\n        <div>\n          <input\n            {...getInputProps({\n              placeholder: \"Search Places ...\",\n              className: \"location-search-input\",\n            })}\n          />\n          <div className=\"autocomplete-dropdown-container\">\n            {loading && <div>Loading...</div>}\n            {suggestions.map((suggestion) => {\n              const className = suggestion.active\n                ? \"suggestion-item--active\"\n                : \"suggestion-item\";\n              // inline style for demonstration purpose\n              const style = suggestion.active\n                ? { backgroundColor: \"#fafafa\", cursor: \"pointer\" }\n                : { backgroundColor: \"#ffffff\", cursor: \"pointer\" };\n              return (\n                <div\n                  {...getSuggestionItemProps(suggestion, {\n                    className,\n                    style,\n                  })}\n                >\n                  <span>{suggestion.description}</span>\n                </div>\n              );\n            })}\n          </div>\n        </div>\n      )}\n    </PlacesAutocomplete>\n  );\n}\n","import {asyncActionError, asyncActionFinish, asyncActionStart} from '../../app/async/asyncReducer'\nimport { delay } from '../../app/common/util/util';\nimport {toast} from 'react-toastify'\n\nexport const INCREMENT_COUNTER = \"INCREMENT_COUNTER\";\nexport const DECREMENT_COUNTER = \"DECREMENT_COUNTER\";\n\n\n\nexport function increment(amount) {\n    return async function(dispatch) {\n      dispatch(asyncActionStart());\n      try {\n        await delay(1000);\n      dispatch({type: INCREMENT_COUNTER, payload: amount});\n      dispatch(asyncActionFinish());\n\n      } catch (error) {\n        dispatch(asyncActionError(error))\n      }\n      \n    }\n}\n\nexport function decrement(amount) {\n  return async function(dispatch) {\n    dispatch(asyncActionStart());\n    try {\n      await delay(1000);\n    dispatch({type: DECREMENT_COUNTER, payload: amount});\n    dispatch(asyncActionFinish());\n\n    } catch (error) {\n      dispatch(asyncActionError(error));\n      toast.error(error);\n    }\n    \n  }\n}\n\n\nconst initialState = {\n  data: 42,\n};\n\nexport default function testReducer(state = initialState, {type, payload}) {\n  switch (type) {\n    case INCREMENT_COUNTER:\n      return {\n        ...state,\n        data: state.data + payload,\n      };\n    case DECREMENT_COUNTER:\n      return {\n        ...state,\n        data: state.data - payload,\n      };\n    default:\n      return state;\n  }\n}\n","import React, { useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Button } from \"semantic-ui-react\";\nimport { openModal } from \"../../app/common/modals/modalReducer\";\nimport TestMap from \"./TestMap\";\nimport TestPlaceInput from \"./TestPlaceInput\";\nimport { decrement, increment } from \"./testReducer\";\n\nexport default function Sandbox() {\n  const dispatch = useDispatch();\n  const [target, setTarget] = useState(null);\n  const data = useSelector((state) => state.test.data);\n  const { loading } = useSelector((state) => state.async);\n  const defaultProps = {\n    center: {\n      lat: 10.99835602,\n      lng: 77.01502627,\n    },\n    zoom: 11,\n  };\n  const [location, setLocation] = useState(defaultProps);\n\n  function handleSetLocation(latLng) {\n    setLocation({ ...location, center: { lat: latLng.lat, lng: latLng.lng } });\n  }\n\n  return (\n    <>\n      <h1>Testing 123</h1>\n      <h2>The data is: {data} </h2>\n      <Button\n        name=\"increment\"\n        loading={loading && target === 'increment'}\n        onClick={(e) => {\n          dispatch(increment(20));\n          setTarget(e.target.name);\n        }}\n        content=\"increment\"\n        color=\"green\"\n      />\n      <Button\n        name=\"decrement\"\n        loading={loading && target === 'decrement'}\n        onClick={(e) => {\n          dispatch(decrement(10));\n          setTarget(e.target.name);\n        }}\n        content=\"decrement\"\n        color=\"red\"\n      />\n      <Button\n        onClick={() =>\n          dispatch(openModal({ modalType: \"TestModal\", modalProps: { data } }))\n        }\n        content=\"Open Modal\"\n        color=\"teal\"\n      />\n      <div style={{ marginTop: 15 }}>\n        <TestPlaceInput setLocation={handleSetLocation} />\n        <TestMap location={location} />\n      </div>\n    </>\n  );\n}\n","import React from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { Modal } from \"semantic-ui-react\";\nimport { closeModal } from \"./modalReducer\";\n\nexport default function ModalWrapper({ children, size, header }) {\n  const dispatch = useDispatch();\n  return (\n    <Modal open={true} onClose={() => dispatch(closeModal())} size={size}>\n      {header && <Modal.Header>{header}</Modal.Header>}\n      <Modal.Content>{children}</Modal.Content>\n    </Modal>\n  );\n}\n","import React from 'react';\nimport ModalWrapper from '../../app/common/modals/ModalWrapper';\n\nexport default function TestModal({data}) {\n    return (\n        <ModalWrapper size='mini' header='Test Modal'>\n            <div>The data is: {data}</div>\n\n        </ModalWrapper>\n    )\n}","import React from 'react';\nimport { useDispatch } from 'react-redux';\nimport { Button } from 'semantic-ui-react';\nimport { closeModal } from '../../app/common/modals/modalReducer';\nimport { socialLogin } from '../../app/firestore/firebaseService';\n\nexport default function SocialLogin() {\n    const dispatch = useDispatch();\n\n    function handleSocialLogin(provider) {\n        dispatch(closeModal());\n        socialLogin(provider);\n    }\n    return (\n        <>\n            <Button onClick={() => handleSocialLogin('facebook')} icon='facebook' fluid color='facebook' style={{marginBottom: 10}} content='Login with Facebook' />\n            <Button onClick={() => handleSocialLogin('google')} icon='google' fluid color='google plus' content='Login with Google' />\n        </>\n    )\n}","import React from 'react';\nimport ModalWrapper from '../../app/common/modals/ModalWrapper';\nimport { Formik, Form } from 'formik';\nimport * as Yup from 'yup';\nimport MyTextInput from '../../app/common/form/MyTextInput';\nimport { Button, Divider, Label } from 'semantic-ui-react';\nimport { useDispatch } from 'react-redux';\nimport { closeModal } from '../../app/common/modals/modalReducer';\nimport { signInWithEmail } from '../../app/firestore/firebaseService';\nimport SocialLogin from './SocialLogin';\n\nexport default function LoginForm() {\n    const dispatch = useDispatch();\n    return (\n        <ModalWrapper size='mini' header='Sign into EventSpace'>\n            <Formik\n                initialValues={{email: '', password: ''}}\n                validationSchema={Yup.object ({\n                    email: Yup.string().required().email(),\n                    password: Yup.string().required()\n                })}\n                onSubmit={async (values, {setSubmitting, setErrors}) => {\n                    try {\n                        await signInWithEmail(values);\n                        setSubmitting(false);\n                        dispatch(closeModal());\n\n                    } catch (error) {\n                        setErrors({auth: 'Invalid email or password'})\n                        setSubmitting(false);\n                        \n                    }\n                   \n                }}\n            >\n                    {({isSubmitting, isValid, dirty, errors}) => (\n                        <Form className='ui form'>\n                            <MyTextInput name=\"email\" placeholder=\"Email Address\" />\n                            <MyTextInput name=\"password\" placeholder=\"Password\" type='password' />\n                            {errors.auth && <Label basic color='red' style={{marginBottom: 10}} content={errors.auth} />}\n                            <Button\n                                loading={isSubmitting}\n                                disabled={!isValid || !dirty || isSubmitting}\n                                type='submit'\n                                fluid\n                                size='large'\n                                color='facebook'\n                                content='Login'\n                            />\n                            <Divider horizontal>Or</Divider>\n                            <SocialLogin />\n                        </Form>\n                    )}\n\n            </Formik>\n\n        </ModalWrapper>\n    )\n}","import React from 'react';\nimport ModalWrapper from '../../app/common/modals/ModalWrapper';\nimport { Formik, Form } from 'formik';\nimport * as Yup from 'yup';\nimport MyTextInput from '../../app/common/form/MyTextInput';\nimport { Button, Divider, Label } from 'semantic-ui-react';\nimport { useDispatch } from 'react-redux';\nimport { closeModal } from '../../app/common/modals/modalReducer';\nimport { registerInFirebase } from '../../app/firestore/firebaseService';\nimport SocialLogin from './SocialLogin';\n\nexport default function RegisterForm() {\n    const dispatch = useDispatch();\n    return (\n        <ModalWrapper size='mini' header='Register to EventSpace'>\n            <Formik\n                initialValues={{displayName: '', email: '', password: ''}}\n                validationSchema={Yup.object ({\n                    displayName: Yup.string().required(),\n                    email: Yup.string().required().email(),\n                    password: Yup.string().required()\n                })}\n                onSubmit={async (values, {setSubmitting, setErrors}) => {\n                    try {\n                        await registerInFirebase(values);\n                        setSubmitting(false);\n                        dispatch(closeModal());\n\n                    } catch (error) {\n                        setErrors({auth: error.message})\n                        setSubmitting(false);\n                        \n                    }\n                   \n                }}\n            >\n                    {({isSubmitting, isValid, dirty, errors}) => (\n                        <Form className='ui form'>\n                            <MyTextInput name=\"displayName\" placeholder=\"Display Name\" />\n                            <MyTextInput name=\"email\" placeholder=\"Email Address\" />\n                            <MyTextInput name=\"password\" placeholder=\"Password\" type='password' />\n                            {errors.auth && <Label basic color='red' style={{marginBottom: 10}} content={errors.auth} />}\n                            <Button\n                                loading={isSubmitting}\n                                disabled={!isValid || !dirty || isSubmitting}\n                                type='submit'\n                                fluid\n                                size='large'\n                                color='facebook'\n                                content='Register'\n                            />\n                            <Divider horizontal>Or</Divider>\n                            <SocialLogin />\n                        </Form>\n                    )}\n\n            </Formik>\n\n        </ModalWrapper>\n    )\n}","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport TestModal from '../../../features/sandbox/TestModal';\nimport LoginForm from '../../../features/auth/LoginForm';\nimport RegisterForm from '../../../features/auth/RegisterForm';\n\nexport default function ModalManager() {\n    const modalLookup = {\n        TestModal,\n        LoginForm,\n        RegisterForm\n    };\n    const currentModal = useSelector(state => state.modals);\n    let renderedModal;\n    if (currentModal) {\n        const {modalType, modalProps} = currentModal;\n        const ModalComponent = modalLookup[modalType];\n        renderedModal = <ModalComponent {...modalProps} />;\n    }\n\n    return <span>{renderedModal}</span>;\n}","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { Header, Segment, Button } from 'semantic-ui-react';\n\nexport default function ErrorComponent() {\n    const {error} = useSelector((state) => state.async);\n\n    return (\n        <Segment placeholder>\n            <Header textAlign= 'center' content={error?.message || 'Oops - we have an error.'} />\n            <Button as={Link} to='/events' primary style={{marginTop: 20}} content='Return to events page' />\n        </Segment>\n    )\n}","import React from \"react\";\nimport { Button, Header, Label, Segment } from \"semantic-ui-react\";\nimport { Formik, Form } from \"formik\";\nimport * as Yup from \"yup\";\nimport MyTextInput from \"../../app/common/form/MyTextInput\";\nimport { Link } from \"react-router-dom\";\nimport { useSelector } from \"react-redux\";\nimport { updateUserPassword } from \"../../app/firestore/firebaseService\";\n\nexport default function AccountPage() {\n  const { currentUser } = useSelector((state) => state.auth);\n\n  return (\n    <Segment>\n      <Header dividing size=\"large\" content=\"Account\" />\n      {currentUser.providerId === \"password\" && (\n        <>\n          <Header color=\"teal\" sub content=\"Change Password\" />\n          <p>Use this form to change your password</p>\n          <Formik\n            initialValues={{ newPassword1: \"\", newPassword2: \"\" }}\n            validationSchema={Yup.object({\n              newPassword1: Yup.string().required(\"Password is required\"),\n              newPassword2: Yup.string().oneOf(\n                [Yup.ref(\"newPassword1\"), null],\n                \"Passwords do not match\"\n              ),\n            })}\n            onSubmit={async (values, { setSubmitting, setErrors }) => {\n              try {\n                await updateUserPassword(values);\n              } catch (error) {\n                setErrors({ auth: error.message });\n              } finally {\n                setSubmitting(false);\n              }\n            }}\n          >\n            {({ errors, isSubmitting, isValid, dirty }) => (\n              <Form className=\"ui form\">\n                <MyTextInput\n                  name=\"newPassword1\"\n                  type=\"password\"\n                  placeholder=\"New Password\"\n                />\n                <MyTextInput\n                  name=\"newPassword2\"\n                  type=\"password\"\n                  placeholder=\"Confirm Password\"\n                />\n                {errors.auth && (\n                  <Label\n                    basic\n                    color=\"red\"\n                    style={{ marginBottom: 10 }}\n                    content={errors.auth}\n                  />\n                )}\n                <Button\n                  type=\"submit\"\n                  style= {{ display: 'block' }}\n                  disabled={!isValid || isSubmitting || !dirty}\n                  loading={isSubmitting}\n                  size=\"large\"\n                  positive\n                  content=\"Update Password\"\n                />\n              </Form>\n            )}\n          </Formik>\n        </>\n      )}\n      {currentUser.providerId === \"facebook.com\" && (\n        <>\n          <Header color=\"teal\" sub content=\"Facebook account\" />\n          <p>Please visit Facebook to update your account.</p>\n          <Button\n            icon=\"facebook\"\n            color=\"facebook\"\n            as={Link}\n            to=\"https://facebook.com\"\n            content=\"Go to Facebook\"\n          />\n        </>\n      )}\n      {currentUser.providerId === \"google.com\" && (\n        <>\n          <Header color=\"teal\" sub content=\"Google account\" />\n          <p>Please visit Google to update your account.</p>\n          <Button\n            icon=\"google\"\n            color=\"google plus\"\n            as={Link}\n            to=\"https://google.com\"\n            content=\"Go to Google\"\n          />\n        </>\n      )}\n    </Segment>\n  );\n}\n","import React from \"react\";\nimport { Formik, Form } from \"formik\";\nimport MyTextInput from \"../../../app/common/form/MyTextInput\";\nimport MyTextArea from \"../../../app/common/form/MyTextArea\";\nimport { Button } from \"semantic-ui-react\";\nimport * as Yup from \"yup\";\nimport { updateUserProfile } from \"../../../app/firestore/firestoreService\";\nimport {toast} from 'react-toastify';\n\nexport default function ProfileForm({ profile }) {\n  return (\n    <Formik\n      initialValues={{\n        displayName: profile.displayName,\n        description: profile.description || \"\",\n      }}\n      validationSchema={Yup.object({\n        displayName: Yup.string().required(),\n      })}\n      onSubmit={async (values, {setSubmitting}) => {\n          try {\n            await updateUserProfile(values);\n          } catch (error) {\n              toast.error(error.message);\n          } finally {\n              setSubmitting(false);\n          }\n      }}\n    >\n      {({ isSubmitting, isValid, dirty }) => (\n        <Form className=\"ui form\">\n          <MyTextInput name=\"displayName\" placeholder=\"Display Name\" />\n          <MyTextArea name=\"description\" placeholder=\"Description\" />\n          <Button\n            loading={isSubmitting}\n            disabled={isSubmitting || !isValid || !dirty}\n            floated=\"right\"\n            type=\"submit\"\n            size=\"large\"\n            positive\n            content=\"Update Profile\"\n          />\n        </Form>\n      )}\n    </Formik>\n  );\n}\n","import React, { useState } from \"react\";\nimport { Button, Grid, Header, Tab } from \"semantic-ui-react\";\nimport { format } from \"date-fns\";\nimport ProfileForm from \"./ProfileForm\";\n\nexport default function AboutTab({ profile, isCurrentUser }) {\n  const [editMode, setEditMode] = useState(false);\n  return (\n    <Tab.Pane>\n      <Grid>\n        <Grid.Column width={16}>\n          <Header\n            floated=\"left\"\n            icon=\"user\"\n            content={`About ${profile.displayName}`}\n          />\n          {isCurrentUser &&\n          <Button\n            onClick={() => setEditMode(!editMode)}\n            floated=\"right\"\n            basic\n            content={editMode ? \"Cancel\" : \"Edit\"}\n          />}\n        </Grid.Column>\n        <Grid.Column width={16}>\n          {editMode ? (\n            <ProfileForm profile={profile} />\n          ) : (\n            <>\n              <div style={{ marginBottom: 10 }}>\n                <strong>\n                  Member Since:{format(profile.createdAt, \"dd MMM yyyy\")}{\" \"}\n                </strong>\n                <div>{profile.description || null}</div>\n              </div>\n            </>\n          )}\n        </Grid.Column>\n      </Grid>\n    </Tab.Pane>\n  );\n}\n","import { useEffect } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { asyncActionError, asyncActionFinish, asyncActionStart} from '../async/asyncReducer';\nimport { dataFromSnapshot } from \"../firestore/firestoreService\";\n\nexport default function useFirestoreCollection({query, data, deps}) {\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        dispatch(asyncActionStart());\n        const unsubscribe = query().onSnapshot(\n            snapshot => {\n                const docs = snapshot.docs.map(doc => dataFromSnapshot(doc));\n                data(docs);\n                dispatch(asyncActionFinish());\n            },\n            error => dispatch(asyncActionError(error))\n        );\n        return () => {\n            unsubscribe()\n        }\n    }, deps) // eslint-disable-line react-hooks/exhaustive-deps\n}","import React, { useState } from \"react\";\nimport { Card, Grid, Header, Image, Tab } from \"semantic-ui-react\";\nimport { format } from \"date-fns\";\nimport { Link } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport useFirestoreCollection from \"../../../app/hooks/useFirestoreCollection\";\nimport { getUserEventsQuery } from \"../../../app/firestore/firestoreService\";\nimport { listenToUserEvents } from \"../profileActions\";\n\nexport default function EventsTab({ profile }) {\n  const dispatch = useDispatch();\n  const [activeTab, setActiveTab] = useState(0);\n  const { profileEvents } = useSelector((state) => state.profile);\n  const { loading } = useSelector((state) => state.async);\n\n  useFirestoreCollection({\n    query: () => getUserEventsQuery(activeTab, profile.id),\n    data: (events) => dispatch(listenToUserEvents(events)),\n    deps: [dispatch, activeTab, profile.id],\n  });\n\n  const panes = [\n    { menuItem: \"Future Events\", pane: { key: \"future\" } },\n    { menuItem: \"Past Events\", pane: { key: \"past\" } },\n    { menuItem: \"Hosting Events\", pane: { key: \"hosting\" } },\n  ];\n  return (\n    <Tab.Pane loading={loading}>\n      <Grid>\n        <Grid.Column width={16}>\n          <Header floated=\"left\" icon=\"calendar\" content=\"Events\" />\n        </Grid.Column>\n        <Grid.Column width={16}>\n          <Tab\n            onTabChange={(e, data) => setActiveTab(data.activeIndex)}\n            panes={panes}\n            menu={{ secondary: true, pointing: true }}\n            \n          />\n          <Card.Group itemsPerRow={5} style={{ marginTop: 10 }}>\n            {profileEvents.map((event) => (\n              <Card as={Link} to={`/events/${event.id}`} key={event.id}>\n                <Image\n                  src={`/assets/categoryImages/${event.category}.jpg`}\n                  style={{ minHeight: 100, objectFit: \"cover\" }}\n                />\n                <Card.Content>\n                  <Card.Header content={event.title} textAlign=\"center\" />\n                  <Card.Meta textAlign=\"center\">\n                    <div>{format(event.date, 'dd MMM yyyy')}</div>\n                    <div>{format(event.date, 'hh:mm a')}</div>\n                  </Card.Meta>\n                </Card.Content>\n              </Card>\n            ))}\n          </Card.Group>\n        </Grid.Column>\n      </Grid>\n    </Tab.Pane>\n  );\n}\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { Card, Image } from 'semantic-ui-react';\n\nexport default function ProfileCard({profile}) {\n    return (\n        <Card as ={Link} to={`/profile/${profile.id}`}>\n            <Image src={profile.photoURL || process.env.PUBLIC_URL + '/assets/user.png'} />\n            <Card.Content>\n                <Card.Header content={profile.displayName} />\n            </Card.Content>\n        </Card>\n    )\n}","import React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Card, Grid, Header, Tab } from \"semantic-ui-react\";\nimport {\n  getFollowersCollection,\n  getFollowingCollection,\n} from \"../../../app/firestore/firestoreService\";\nimport useFirestoreCollection from \"../../../app/hooks/useFirestoreCollection\";\nimport ProfileCard from \"../../profiles/profilePage/ProfileCard\";\nimport { listenToFollowers, listenToFollowings } from \"../profileActions\";\n\nexport default function FollowingTab({ profile, activeTab }) {\n  const dispatch = useDispatch();\n  const { followings, followers } = useSelector((state) => state.profile);\n\n  useFirestoreCollection({\n    query:\n      activeTab === 3\n        ? () => getFollowersCollection(profile.id)\n        : () => getFollowingCollection(profile.id),\n    data: (data) =>\n      activeTab === 3\n        ? dispatch(listenToFollowers(data))\n        : dispatch(listenToFollowings(data)),\n    deps: [activeTab, dispatch],\n  });\n\n  return (\n    <Tab.Pane>\n      <Grid>\n        <Grid.Column width={16}>\n          <Header floated=\"left\" icon=\"user\" content={activeTab === 3 ? 'Followers' : 'Following'} />\n        </Grid.Column>\n        <Grid.Column width={16}>\n          <Card.Group itemsPerRow={5}>\n            {activeTab === 3 && followers.map(profile => (\n              <ProfileCard profile={profile} key={profile.id} />\n            ))}\n            {activeTab === 4 && followings.map(profile => (\n              <ProfileCard profile={profile} key={profile.id} />\n            ))}\n          </Card.Group>\n        </Grid.Column>\n      </Grid>\n    </Tab.Pane>\n  );\n}\n","import React, { useRef } from \"react\";\nimport Cropper from \"react-cropper\";\nimport \"cropperjs/dist/cropper.css\";\n\nexport default function PhotoWidgetCropper({ setImage, imagePreview }) {\n  const cropper = useRef(null);\n  function cropImage() {\n    if (typeof cropper.current.getCroppedCanvas() === \"undefined\") {\n      return;\n    }\n    cropper.current.getCroppedCanvas().toBlob((blob) => {\n      setImage(blob);\n    }, \"image/jpeg\");\n  }\n\n  return (\n    <Cropper\n      ref={cropper}\n      src={imagePreview}\n      style={{ height: 200, width: \"100%\" }}\n      aspectRatio={1}\n      preview=\".img-preview\"\n      guides={false}\n      viewMode={1}\n      dragMode=\"move\"\n      scalable={true}\n      cropBoxMovable={true}\n      cropBoxResizable={true}\n      crop={cropImage}\n    />\n  );\n}\n","import React, {useCallback} from 'react'\nimport {useDropzone} from 'react-dropzone'\nimport { Header, Icon } from 'semantic-ui-react'\n\nexport default function PhotoWidgetDropzone({setFiles}) {\n    const dropzoneStyles = {\n        border: 'dashed 3px #eee',\n        borderRadius: '5%',\n        paddingTop: '30px',\n        textAlign: 'center'\n    }\n\n    const dropzoneActive = {\n        border: 'dashed 3px green'\n    }\n\n  const onDrop = useCallback(acceptedFiles => {\n    setFiles(acceptedFiles.map(file => Object.assign(file, {\n        preview: URL.createObjectURL(file)\n    })))\n  }, [setFiles])\n  const {getRootProps, getInputProps, isDragActive} = useDropzone({onDrop})\n\n  return (\n    <div {...getRootProps()} style={isDragActive ? {...dropzoneStyles, ...dropzoneActive} : dropzoneStyles }>\n      <input {...getInputProps()} />\n      <Icon name='upload' size='huge' />\n      <Header content='Drop image here.' />\n    </div>\n  )\n}","import React, { useState } from \"react\";\nimport { Button, Grid, Header } from \"semantic-ui-react\";\nimport PhotoWidgetCropper from \"./PhotoWidgetCropper\";\nimport PhotoWidgetDropzone from \"./PhotoWidgetDropzone\";\nimport cuid from 'cuid';\nimport { getFileExtension } from \"../util/util\";\nimport { uploadToFirebaseStorage } from \"../../firestore/firebaseService\";\nimport { updateUserProfilePhoto } from \"../../firestore/firestoreService\";\nimport { toast } from 'react-toastify';\n\nexport default function PhotoUploadWidget({setEditMode}) {\n  const [files, setFiles] = useState([]);\n  const [image, setImage] = useState(null);\n  const [loading, setLoading] = useState(false);\n\n  function handleUploadImage() {\n    setLoading(true);\n    const filename = cuid() + '.' + getFileExtension(files[0].name);\n    const uploadTask = uploadToFirebaseStorage(image, filename);\n    uploadTask.on('state_changed', snapshot => {\n      const progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n      console.log('upload is ' + progress + '% done');\n    }, error => {\n      toast.error(error.message);\n    }, () => {\n      uploadTask.snapshot.ref.getDownloadURL().then(downloadURL => {\n        updateUserProfilePhoto(downloadURL, filename).then(() => {\n          setLoading(false);\n          handleCancelCrop();\n          setEditMode(false);\n        }).catch(error => {\n          toast.error(error.message);\n          setLoading(false);\n        }); \n      })\n    })\n  }\n\n\n  function handleCancelCrop() {\n    setFiles([]);\n    setImage(null);\n  }\n\n  return (\n    <Grid>\n      <Grid.Column width={4}>\n        <Header color=\"blue\" sub content=\"Step 1 - Add Photo\" />\n        <PhotoWidgetDropzone setFiles={setFiles} />\n      </Grid.Column>\n      <Grid.Column width={1} />\n      <Grid.Column width={4}>\n        <Header color=\"blue\" sub content=\"Step 2 - Resize\" />\n        {files.length > 0 && (\n          <PhotoWidgetCropper\n            setImage={setImage}\n            imagePreview={files[0].preview}\n          />\n        )}\n      </Grid.Column>\n      <Grid.Column width={1} />\n      <Grid.Column width={4}>\n        <Header color=\"blue\" sub content=\"Step 3 - Preview & Upload\" />\n        {files.length > 0 && (\n          <>\n            <div\n              className=\"img-preview\"\n              style={{ minHeight: 200, minWidth: 200, overflow: \"hidden\" }}\n            />\n            <Button.Group>\n              <Button loading={loading} onClick={handleUploadImage} style={{ width: 100 }} positive icon=\"check\" />\n              <Button disabled={loading} onClick={handleCancelCrop} style={{ width: 100 }} icon=\"close\" />\n            </Button.Group>\n          </>\n        )}\n      </Grid.Column>\n    </Grid>\n  );\n}\n","import React, { useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Button, Card, Grid, Header, Tab, Image } from \"semantic-ui-react\";\nimport PhotoUploadWidget from \"../../../app/common/photos/PhotoUploadWidget\";\nimport {\n  deletePhotoFromCollection,\n  getUserPhotos,\n  setMainPhoto,\n} from \"../../../app/firestore/firestoreService\";\nimport useFirestoreCollection from \"../../../app/hooks/useFirestoreCollection\";\nimport { listenToUserPhotos } from \"../profileActions\";\nimport { toast } from \"react-toastify\";\nimport { deleteFromFirebaseStorage } from \"../../../app/firestore/firebaseService\";\n\nexport default function PhotosTab({ profile, isCurrentUser }) {\n  const dispatch = useDispatch();\n  const [editMode, setEditMode] = useState(false);\n  const { loading } = useSelector((state) => state.async);\n  const { photos } = useSelector((state) => state.profile);\n  const [ updating, setUpdating ] = useState({isUpdating: false, target: null});\n  const [ deleting, setDeleting ] = useState({isDeleting: false, target: null});\n\n\n  useFirestoreCollection({\n    query: () => getUserPhotos(profile.id),\n    data: (photos) => dispatch(listenToUserPhotos(photos)),\n    deps: [profile.id, dispatch],\n  });\n\n  async function handleSetMainPhoto(photo, target) {\n    setUpdating({isUpdating: true, target});\n    try {\n      await setMainPhoto(photo);\n    } catch (error) {\n      toast.error(error.message);\n    } finally {\n      setUpdating({isUpdating: false, target: null});\n    }\n  }\n\n  async function handleDeletePhoto(photo, target) {\n    setDeleting({isDeleting: true, target});\n    try {\n      await deleteFromFirebaseStorage(photo.name);\n      await deletePhotoFromCollection(photo.id)\n    } catch (error) {\n      toast.error(error.message);\n    } finally {\n      setDeleting({isDeleting: false, target: null});\n    }\n  }\n\n  return (\n    <Tab.Pane loading={loading}>\n      <Grid>\n        <Grid.Column width={16}>\n          <Header floated=\"left\" icon=\"user\" content={`Photos`} />\n          {isCurrentUser && (\n            <Button\n              onClick={() => setEditMode(!editMode)}\n              floated=\"right\"\n              basic\n              content={editMode ? \"Cancel\" : \"Add Photo\"}\n            />\n          )}\n        </Grid.Column>\n        <Grid.Column width={16}>\n          {editMode ? (\n            <PhotoUploadWidget setEditMode={setEditMode} />\n          ) : (\n            <Card.Group itemsPerRow={5}>\n              {photos.map((photo) => (\n                <Card key={photo.id}>\n                  <Image src={photo.url} />\n                  <Button.Group fluid widths={2}>\n                    <Button\n                      name={photo.id}\n                      loading={updating.isUpdating && updating.target === photo.id}\n                      onClick={(e) => handleSetMainPhoto(photo, e.target.name)}\n                      disabled={photo.url === profile.photoURL}\n                      basic\n                      color=\"green\"\n                      content=\"Main\"\n                    />\n                    <Button \n                    name={photo.id}\n                    loading={deleting.isDeleting && deleting.target === photo.id}\n                    disabled={photo.url === profile.photoURL}\n                    onClick={(e) => handleDeletePhoto(photo, e.target.name)}\n                    basic \n                    color=\"red\" \n                    icon=\"trash\" />\n                  </Button.Group>\n                </Card>\n              ))}\n            </Card.Group>\n          )}\n        </Grid.Column>\n      </Grid>\n    </Tab.Pane>\n  );\n}\n","import React, { useState } from 'react';\nimport { Tab } from 'semantic-ui-react';\nimport AboutTab from './AboutTab';\nimport EventsTab from './EventsTab';\nimport FollowingTab from './FollowingTab';\nimport PhotosTab from './PhotosTab';\n\nexport default function ProfileContent({profile, isCurrentUser}) {\n\n    const [activeTab, setActiveTab] = useState(0)\n\n    const panes = [\n        {menuItem: 'About', render: () => <AboutTab profile={profile} isCurrentUser={isCurrentUser} />},\n        {menuItem: 'Photos', render: () => <PhotosTab profile={profile} isCurrentUser={isCurrentUser} />},\n        {menuItem: 'Events', render: () => <EventsTab profile={profile} />},\n        {menuItem: 'Followers', render: () => <FollowingTab key={profile.id} profile={profile} activeTab={activeTab} />},\n        {menuItem: 'Following', render: () => <FollowingTab key={profile.id} profile={profile} activeTab={activeTab} />},\n    ]\n    return (\n        <Tab \n        menu={{fluid: true, vertical: true}}\n        menuPosition='right'\n        panes={panes}\n        onTabChange={(e, data) => setActiveTab(data.activeIndex)}\n       \n        />\n    )\n}","import React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { toast } from \"react-toastify\";\nimport {\n  Button,\n  Divider,\n  Grid,\n  Header,\n  Item,\n  Reveal,\n  Segment,\n  Statistic,\n} from \"semantic-ui-react\";\nimport { followUser, getFollowingDoc, unfollowUser } from \"../../../app/firestore/firestoreService\";\nimport { setFollowUser, setUnfollowUser } from \"../profileActions\";\nimport { CLEAR_FOLLOWINGS } from \"../profileConstants\";\n\nexport default function ProfileHeader({ profile, isCurrentUser }) {\n  const dispatch = useDispatch();\n  const [loading, setLoading] = useState(false);\n  const {followingUser} = useSelector(state => state.profile);\n\n  useEffect(() => {\n    if (isCurrentUser) return;\n    setLoading(true);\n    async function fetchFollowingDoc() {\n      try {\n        const followingDoc = await getFollowingDoc(profile.id);\n        if (followingDoc && followingDoc.exists) {\n          dispatch(setFollowUser())\n        }\n      } catch (error) {\n        toast.error(error.message);\n      }\n    }\n    fetchFollowingDoc().then(() => setLoading(false));\n    return () => {\n      dispatch({type: CLEAR_FOLLOWINGS})\n    }\n  }, [dispatch, profile.id, isCurrentUser])\n\n  async function handleFollowUser() {\n    setLoading(true);\n    try {\n      await followUser(profile);\n      dispatch(setFollowUser());\n    } catch (error) {\n      toast.error(error.message);\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  \n  async function handleUnfollowUser() {\n    setLoading(true);\n    try {\n      await unfollowUser(profile);\n      dispatch(setUnfollowUser());\n    } catch (error) {\n      toast.error(error.message);\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  return (\n    <Segment>\n      <Grid>\n        <Grid.Column width={12}>\n          <Item.Group>\n            <Item>\n              <Item.Image\n                avatar\n                size=\"small\"\n                src={profile.photoURL || process.env.PUBLIC_URL + '/assets/user.png'}\n              />\n              <Item.Content verticalAlign=\"middle\">\n                <Header\n                  as=\"h1\"\n                  style={{ display: \"block\", marginBottom: 10 }}\n                  content={profile.displayName}\n                />\n              </Item.Content>\n            </Item>\n          </Item.Group>\n        </Grid.Column>\n        <Grid.Column width={4}>\n          <Statistic.Group>\n            <Statistic label=\"Followers\" value={profile.followerCount || 0} />\n            <Statistic label=\"Following\" value={profile.followingCount || 0} />\n          </Statistic.Group>\n          {!isCurrentUser && (\n            <>\n              <Divider />\n              <Reveal animated=\"move\">\n                <Reveal.Content visible style={{ width: \"100%\" }}>\n                  <Button fluid color=\"facebook\" content={followingUser ? 'Following' : 'Not Following'}/>\n                </Reveal.Content>\n                <Reveal.Content hidden style={{ width: \"100%\" }}>\n                  <Button\n                    onClick={followingUser ? () => handleUnfollowUser() : () => handleFollowUser()}\n                    loading={loading}\n                    basic\n                    fluid\n                    color={followingUser ? 'gray' : 'facebook'}\n                    content={followingUser ? 'Unfollow' : 'Follow'}\n                  />\n                </Reveal.Content>\n              </Reveal>\n            \n            </>\n          )}\n        </Grid.Column>\n      </Grid>\n    </Segment>\n  );\n}\n","import React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Grid } from \"semantic-ui-react\";\nimport ProfileContent from \"./ProfileContent\";\nimport ProfileHeader from \"./ProfileHeader\";\nimport useFirestoreDoc from \"../../../app/hooks/useFirestoreDoc\";\nimport { getUserProfile } from \"../../../app/firestore/firestoreService\";\nimport { listenToSelectedUserProfile } from \"../profileActions\";\nimport LoadingComponent from \"../../../app/layout/LoadingComponent\";\n\nexport default function ProfilePage({ match }) {\n  const dispatch = useDispatch();\n  const { selectedUserProfile, currentUserProfile } = useSelector(\n    (state) => state.profile\n  );\n  const { currentUser } = useSelector((state) => state.auth);\n  const { loading, error } = useSelector((state) => state.async);\n  let profile;\n\n  useFirestoreDoc({\n    query: () => getUserProfile(match.params.id),\n    data: (profile) => dispatch(listenToSelectedUserProfile(profile)),\n    deps: [dispatch, match.params.id],\n    shouldExecute: match.params.id !== currentUser.uid,\n  });\n\n  if (match.params.id === currentUser.uid) {\n    profile = currentUserProfile;\n  } else {\n    profile = selectedUserProfile;\n  }\n\n  if ((loading && !profile) || (!profile && !error))\n    return <LoadingComponent content=\"Loading profile....\" />;\n\n  return (\n    <Grid>\n      <Grid.Column width={16}>\n        <ProfileHeader\n          profile={profile}\n          isCurrentUser={currentUser.uid === profile.id}\n        />\n        <ProfileContent\n          profile={profile}\n          isCurrentUser={currentUser.uid === profile.id}\n        />\n      </Grid.Column>\n    </Grid>\n  );\n}\n","import React from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { Route } from \"react-router\";\nimport UnauthModal from \"../../features/auth/UnauthModal\";\n\nexport default function PrivateRoute({\n  component: Component,\n  prevLocation,\n  ...rest\n}) {\n  const { authenticated } = useSelector((state) => state.auth);\n  return (\n    <Route\n      {...rest}\n      render={(props) =>\n        authenticated ? <Component {...props} /> : <UnauthModal {...props} />\n      }\n    />\n  );\n}\n","import React from \"react\";\nimport { Route, useLocation } from \"react-router\";\nimport { Container } from \"semantic-ui-react\";\nimport EventDashboard from \"../../features/events/eventDashboard/EventDashboard\";\nimport EventDetailedPage from \"../../features/events/eventDetailed/EventDetailedPage\";\nimport EventForm from \"../../features/events/eventForm/EventForm\";\nimport HomePage from \"../../features/home/HomePage\";\nimport NavBar from \"../../features/nav/NavBar\";\nimport Sandbox from \"../../features/sandbox/Sandbox\";\nimport ModalManager from \"../common/modals/ModalManager\";\nimport { ToastContainer } from \"react-toastify\";\nimport ErrorComponent from \"../common/errors/ErrorComponent\";\nimport AccountPage from \"../../features/auth/AccountPage\";\nimport { useSelector } from \"react-redux\";\nimport LoadingComponent from \"./LoadingComponent\";\nimport ProfilePage from \"../../features/profiles/profilePage/ProfilePage\";\nimport PrivateRoute from \"./PrivateRoute\";\n\nexport default function App() {\n  const { key } = useLocation();\n  const { initialized } = useSelector((state) => state.async);\n\n  if (!initialized) return <LoadingComponent content=\"Loading App...\" />;\n\n  return (\n    <>\n      <ModalManager />\n      <ToastContainer position=\"bottom-right\" hideProgressBar />\n      <Route exact path=\"/\" component={HomePage} />\n      <Route\n        path={\"/(.+)\"}\n        render={() => (\n          <>\n            <NavBar />\n            <Container className=\"main\">\n              <Route exact path=\"/events\" component={EventDashboard} />\n              <Route exact path=\"/sandbox\" component={Sandbox} />\n              <Route path=\"/events/:id\" component={EventDetailedPage} />\n              <PrivateRoute\n                path={[\"/createEvent\", \"/manage/:id\"]}\n                component={EventForm}\n                key={key}\n              />\n              <PrivateRoute path=\"/account\" component={AccountPage} />\n              <PrivateRoute path=\"/profile/:id\" component={ProfilePage} />\n              <Route path=\"/error\" component={ErrorComponent} />\n            </Container>\n          </>\n        )}\n      />\n    </>\n  );\n}\n","export const SIGN_IN_USER = 'SIGN_IN_USER';\nexport const SIGN_OUT_USER = 'SIGN_OUT_USER';\n\n\n","import { SIGN_IN_USER, SIGN_OUT_USER } from \"./authConstants\";\nimport {LOCATION_CHANGE} from 'connected-react-router';\n\nconst initialState = {\n  authenticated: false,\n  currentUser: null,\n  prevLocation: null,\n  currentLocation: null\n};\n\nexport default function authReducer(state = initialState, { type, payload }) {\n  switch (type) {\n    case SIGN_IN_USER:\n      return {\n        ...state,\n        authenticated: true,\n        currentUser: {\n          email: payload.email,\n          photoURL: payload.photoURL,\n          uid: payload.uid,\n          displayName: payload.displayName,\n          providerId: payload.providerData[0].providerId\n        },\n      };\n    case SIGN_OUT_USER:\n      return {\n        ...state,\n        authenticated: false,\n        currentUser: null,\n      };\n      case LOCATION_CHANGE:\n        return {\n          ...state,\n          prevLocation: state.currentLocation,\n          currentLocation: payload.location\n        }\n    default:\n      return state;\n  }\n}\n","import {\n  CLEAR_COMMENTS,\n  CLEAR_EVENTS,\n  CLEAR_SELECTED_EVENT,\n  CREATE_EVENT,\n  DELETE_EVENT,\n  FETCH_EVENTS,\n  LISTEN_TO_EVENT_CHAT,\n  LISTEN_TO_SELECTED_EVENT,\n  RETAIN_STATE,\n  SET_FILTER,\n  SET_START_DATE,\n  UPDATE_EVENT,\n} from \"./eventConstants\";\n\nconst initialState = {\n  events: [],\n  comments: [],\n  moreEvents: true,\n  selectedEvent: null,\n  lastVisible: null,\n  filter: \"all\",\n  startDate: new Date(),\n  retainState: false,\n};\n\nexport default function eventReducer(state = initialState, { type, payload }) {\n  switch (type) {\n    case CREATE_EVENT:\n      return {\n        ...state,\n        events: [...state.events, payload],\n      };\n    case UPDATE_EVENT:\n      return {\n        ...state,\n        events: [\n          ...state.events.filter((evt) => evt.id !== payload.id),\n          payload,\n        ],\n      };\n    case DELETE_EVENT:\n      return {\n        ...state,\n        events: [...state.events.filter((evt) => evt.id !== payload)],\n      };\n    case FETCH_EVENTS:\n      return {\n        ...state,\n        events: [...state.events, ...payload.events],\n        moreEvents: payload.moreEvents,\n        lastVisible: payload.lastVisible,\n      };\n\n    case LISTEN_TO_EVENT_CHAT:\n      return {\n        ...state,\n        comments: payload,\n      };\n    case CLEAR_COMMENTS:\n      return {\n        ...state,\n        comments: [],\n      };\n    case LISTEN_TO_SELECTED_EVENT:\n      return {\n        ...state,\n        selectedEvent: payload,\n      };\n    case CLEAR_SELECTED_EVENT:\n      return {\n        ...state,\n        selectedEvent: null,\n      };\n    case CLEAR_EVENTS:\n      return {\n        ...state,\n        events: [],\n        moreEvents: true,\n        lastVisible: null,\n      };\n    case SET_FILTER:\n      return {\n        ...state,\n        retainState: false,\n        moreEvents: true,\n        filter: payload,\n      };\n    case SET_START_DATE:\n      return {\n        ...state,\n        retainState: false,\n        moreEvents: true,\n        startDate: payload,\n      };\n    case RETAIN_STATE:\n      return {\n        ...state,\n        retainState: true,\n      };\n\n    default:\n      return state;\n  }\n}\n","import {\n  CLEAR_FOLLOWINGS,\n  LISTEN_TO_CURRENT_USER_PROFILE,\n  LISTEN_TO_FEED,\n  LISTEN_TO_FOLLOWERS,\n  LISTEN_TO_FOLLOWINGS,\n  LISTEN_TO_SELECTED_USER_PROFILE,\n  LISTEN_TO_USER_EVENTS,\n  LISTEN_TO_USER_PHOTOS,\n  SET_FOLLOW_USER,\n  SET_UNFOLLOW_USER,\n} from \"./profileConstants\";\n\nconst initialState = {\n  currentUserProfile: null,\n  selectedUserProfile: null,\n  photos: [],\n  profileEvents: [],\n  followers: [],\n  followings: [],\n  followingUser: false,\n  feed: [],\n};\n\nexport default function profileReducer(\n  state = initialState,\n  { type, payload }\n) {\n  switch (type) {\n    case LISTEN_TO_CURRENT_USER_PROFILE:\n      return {\n        ...state,\n        currentUserProfile: payload,\n      };\n    case LISTEN_TO_SELECTED_USER_PROFILE:\n      return {\n        ...state,\n        selectedUserProfile: payload,\n      };\n    case LISTEN_TO_USER_PHOTOS:\n      return {\n        ...state,\n        photos: payload,\n      };\n    case LISTEN_TO_USER_EVENTS:\n      return {\n        ...state,\n        profileEvents: payload,\n      };\n    case LISTEN_TO_FOLLOWERS:\n      return {\n        ...state,\n        followers: payload,\n      };\n    case LISTEN_TO_FOLLOWINGS:\n      return {\n        ...state,\n        followings: payload,\n      };\n    case SET_FOLLOW_USER:\n      return {\n        ...state,\n        followingUser: true,\n      };\n    case SET_UNFOLLOW_USER:\n      return {\n        ...state,\n        followingUser: false,\n      };\n    case CLEAR_FOLLOWINGS:\n      return {\n        ...state,\n        followers: [],\n        followings: [],\n      };\n    case LISTEN_TO_FEED:\n      return {\n        ...state,\n        feed: payload,\n      };\n\n    default: {\n      return state;\n    }\n  }\n}\n","import {combineReducers} from 'redux';\nimport authReducer from '../../features/auth/authReducer';\nimport eventReducer from '../../features/events/eventReducer';\nimport profileReducer from '../../features/profiles/profileReducer';\nimport testReducer from '../../features/sandbox/testReducer';\nimport asyncReducer from '../async/asyncReducer';\nimport modalReducer from '../common/modals/modalReducer';\nimport {connectRouter} from 'connected-react-router';\n\nconst rootReducer = (history) => combineReducers({\n    router: connectRouter(history),\n    test: testReducer,\n    event: eventReducer,\n    modals: modalReducer,\n    auth: authReducer,\n    async: asyncReducer,\n    profile: profileReducer\n\n})\n\nexport default rootReducer","import { SIGN_IN_USER, SIGN_OUT_USER } from \"./authConstants\";\nimport { APP_LOADED } from '../../app/async/asyncReducer';\nimport firebase from '../../app/config/firebase';\nimport { dataFromSnapshot, getUserProfile } from \"../../app/firestore/firestoreService\";\nimport { listenToCurrentUserProfile } from \"../profiles/profileActions\";\n\nexport function signInUser(user) {\n    return {\n        type: SIGN_IN_USER,\n        payload: user\n    \n    }\n}\n\n\nexport function verifyAuth() {\n    return function (dispatch) {\n        return firebase.auth().onAuthStateChanged(user => {\n            if (user) {\n                dispatch(signInUser(user))\n                const profileRef = getUserProfile(user.uid)\n                profileRef.onSnapshot(snapshot => {\n                    dispatch(listenToCurrentUserProfile(dataFromSnapshot(snapshot)));\n                    dispatch({type: APP_LOADED})\n                })\n            } else {\n                dispatch(signOutUser())\n                dispatch({type: APP_LOADED})\n            }\n        })\n    }\n}\n\nexport function signOutUser() {\n    return {\n        type: SIGN_OUT_USER\n    }\n}","import {applyMiddleware, createStore} from 'redux';\nimport {composeWithDevTools} from 'redux-devtools-extension';\nimport rootReducer from './rootReducer';\nimport thunk from 'redux-thunk';\nimport { verifyAuth } from '../../features/auth/authActions';\nimport {createBrowserHistory} from 'history';\n\nexport const history = createBrowserHistory();\n\nexport function configureStore () {\n\n    const store = createStore(rootReducer(history), composeWithDevTools(applyMiddleware(thunk)))\n\n    store.dispatch(verifyAuth());\n\n    return store;\n}\n","import { useEffect } from \"react\";\nimport { useLocation } from \"react-router-dom\";\n\nexport default function ScrollToTop() {\n  const { pathname } = useLocation();\n\n  useEffect(() => {\n    window.scrollTo(0, 0);\n  }, [pathname]);\n\n  return null;\n}","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"semantic-ui-css/semantic.min.css\";\nimport 'react-toastify/dist/ReactToastify.min.css';\nimport 'react-calendar/dist/Calendar.css';\nimport \"./app/layout/styles.css\";\nimport App from \"./app/layout/App\";\nimport { Provider } from \"react-redux\";\nimport { configureStore, history } from \"./app/store/configureStore\";\nimport ScrollToTop from \"./app/layout/ScrollToTop\";\nimport { ConnectedRouter } from 'connected-react-router';\n\n\nconst store = configureStore();\n\n\n\nconst rootEl = document.getElementById(\"root\");\n\nfunction render() {\n  ReactDOM.render(\n    <Provider store={store}>\n      <ConnectedRouter history={history}>\n        <ScrollToTop />\n        <App />\n      </ConnectedRouter>\n    </Provider>,\n\n    rootEl\n  );\n}\n\nif (module.hot) {\n  module.hot.accept(\"./app/layout/App\", function () {\n    setTimeout(render);\n  });\n}\n\nrender();\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n\n\n"],"sourceRoot":""}