(this["webpackJsonpevent-web-app"]=this["webpackJsonpevent-web-app"]||[]).push([[0],{299:function(e,t,n){},460:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(33),a=n.n(c),o=(n(296),n(297),n(298),n(299),n(24)),i=n(484),s=n(18),l=n(277),u=n(480),d=n(23),j=n(228),b=n(487),p=n(190),h=n(94),O=n(488),f=n(278),x=n(276),v=n(1);function m(e){var t=e.attendee;return Object(v.jsx)(O.a.Item,{as:d.a,to:"/profile/".concat(t.id),children:Object(v.jsx)(x.a,{size:"mini",circular:!0,src:t.photoURL})})}var g=n(463);function y(e){var t=e.event;return Object(v.jsxs)(j.a.Group,{children:[Object(v.jsx)(j.a,{children:Object(v.jsx)(b.a.Group,{children:Object(v.jsxs)(b.a,{children:[Object(v.jsx)(b.a.Image,{size:"tiny",circular:!0,src:t.hostPhotoURL}),Object(v.jsxs)(b.a.Content,{children:[Object(v.jsx)(b.a.Header,{content:t.title}),Object(v.jsxs)(b.a.Description,{children:["Hosted by ",Object(v.jsx)(d.a,{to:"/profile/".concat(t.hostUid),children:t.hostedBy})]}),t.isCancelled&&Object(v.jsx)(p.a,{style:{top:"-40px"},ribbon:"right",color:"red",content:"This event has been canceled."})]})]})})}),Object(v.jsx)(j.a,{children:Object(v.jsxs)("span",{children:[Object(v.jsx)(h.a,{name:"clock"})," ",Object(g.default)(t.date,"MMMM d, yyyy h:mm a"),Object(v.jsx)(h.a,{name:"marker"})," ",t.venue.address]})}),Object(v.jsx)(j.a,{secondary:!0,children:Object(v.jsx)(O.a,{horizontal:!0,children:t.attendees.map((function(e){return Object(v.jsx)(m,{attendee:e},e.id)}))})}),Object(v.jsxs)(j.a,{clearing:!0,children:[Object(v.jsx)("div",{children:t.description}),Object(v.jsx)(f.a,{as:d.a,to:"/events/".concat(t.id),color:"facebook",floated:"right",content:"View"})]})]})}var w=n(258),E=n.n(w);function C(e){var t=e.events,n=e.getNextEvents,r=e.loading,c=e.moreEvents;return Object(v.jsx)(v.Fragment,{children:0!==t.length&&Object(v.jsx)(E.a,{pageStart:0,loadMore:n,hasMore:!r&&c,initialLoad:!1,children:t.map((function(e){return Object(v.jsx)(y,{event:e},e.id)}))})})}var k=n(12),S=n(491);function L(){return Object(v.jsx)(S.a,{fluid:!0,children:Object(v.jsxs)(j.a.Group,{children:[Object(v.jsx)(j.a,{style:{minHeight:110},children:Object(v.jsxs)(S.a,{children:[Object(v.jsxs)(S.a.Header,{image:!0,children:[Object(v.jsx)(S.a.Line,{}),Object(v.jsx)(S.a.Line,{})]}),Object(v.jsx)(S.a.Paragraph,{children:Object(v.jsx)(S.a.Line,{})})]})}),Object(v.jsx)(j.a,{children:Object(v.jsxs)(S.a,{children:[Object(v.jsx)(S.a.Line,{}),Object(v.jsx)(S.a.Line,{})]})}),Object(v.jsx)(j.a,{secondary:!0,style:{minHeight:70}}),Object(v.jsx)(j.a,{clearing:!0,children:Object(v.jsx)(f.a,{disabled:!0,color:"blue",floated:"right",content:"View"})})]})})}var U=n(274),I=n(496),T=n(273),N=n(14),R=n.n(N),P=n(22),F="CREATE_EVENT",A="UPDATE_EVENT",_="DELETE_EVENT",M="FETCH_EVENTS",D="LISTEN_TO_EVENT_CHAT",V="CLEAR_COMMENTS",z="LISTEN_TO_SELECTED_EVENT",G="CLEAR_SELECTED_EVENT",H="CLEAR_EVENTS",B="SET_FILTER",q="SET_START_DATE",K="RETAIN_STATE",W=n(10),Y="ASYNC_ACTION_START",J="ASYNC_ACTION_FINISH",Z="ASYNC_ACTION_ERROR",Q="APP_LOADED";function X(){return{type:Y}}function $(){return{type:J}}function ee(e){return console.log(e),{type:Z,payload:e}}var te={loading:!1,error:null,initialized:!1};function ne(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case Y:return Object(W.a)(Object(W.a)({},e),{},{loading:!0,error:null});case J:return Object(W.a)(Object(W.a)({},e),{},{loading:!1});case Z:return Object(W.a)(Object(W.a)({},e),{},{loading:!1,error:r});case Q:return Object(W.a)(Object(W.a)({},e),{},{initialized:!0});default:return e}}var re=n(202);n(466),n(309),n(311),n(465);re.a.initializeApp({apiKey:"AIzaSyAJKD6-wlcmHwRzD2HhxkKNQdrt4BJvhG0",authDomain:"eventspace-a2198.firebaseapp.com",projectId:"eventspace-a2198",storageBucket:"eventspace-a2198.appspot.com",messagingSenderId:"1004675596430",appId:"1:1004675596430:web:4018cfe41370857cff09df"}),re.a.firestore();var ce=re.a,ae=ce.firestore();function oe(e){if(e.exists){var t=e.data();for(var n in t)t.hasOwnProperty(n)&&t[n]instanceof ce.firestore.Timestamp&&(t[n]=t[n].toDate());return Object(W.a)(Object(W.a)({},t),{},{id:e.id})}}function ie(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,c=ce.auth().currentUser,a=ae.collection("events").orderBy("date").startAfter(r).limit(n);switch(e){case"isGoing":return a.where("attendeeIds","array-contains",c.uid).where("date",">=",t);case"isHost":return a.where("hostUid","==",c.uid).where("date",">=",t);default:return a.where("date",">=",t)}}function se(e){return ae.collection("events").doc(e)}function le(e){var t=ce.auth().currentUser;return ae.collection("events").add(Object(W.a)(Object(W.a)({},e),{},{hostUid:t.uid,hostedBy:t.displayName,hostPhotoURL:t.photoURL||null,attendees:ce.firestore.FieldValue.arrayUnion({id:t.uid,displayName:t.displayName,photoURL:t.photoURL||null}),attendeeIds:ce.firestore.FieldValue.arrayUnion(t.uid)}))}function ue(e){return ae.collection("events").doc(e.id).update({isCancelled:!e.isCancelled})}function de(e){return ae.collection("users").doc(e.uid).set({displayName:e.displayName,email:e.email,photoURL:e.photoURL||null,createdAt:ce.firestore.FieldValue.serverTimestamp()})}function je(e){return ae.collection("users").doc(e)}function be(e){return pe.apply(this,arguments)}function pe(){return(pe=Object(P.a)(R.a.mark((function e(t){var n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=ce.auth().currentUser,e.prev=1,n.displayName===t.displayName){e.next=5;break}return e.next=5,n.updateProfile({displayName:t.displayName});case 5:return e.next=7,ae.collection("users").doc(n.uid).update(t);case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(1),e.t0;case 13:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function he(){return(he=Object(P.a)(R.a.mark((function e(t,n){var r,c;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ce.auth().currentUser,c=ae.collection("users").doc(r.uid),e.prev=2,e.next=5,c.get();case 5:if(e.sent.data().photoURL){e.next=11;break}return e.next=9,ae.collection("users").doc(r.uid).update({photoURL:t});case 9:return e.next=11,r.updateProfile({photoURL:t});case 11:return e.next=13,ae.collection("users").doc(r.uid).collection("photos").add({name:n,url:t});case 13:return e.abrupt("return",e.sent);case 16:throw e.prev=16,e.t0=e.catch(2),e.t0;case 19:case"end":return e.stop()}}),e,null,[[2,16]])})))).apply(this,arguments)}function Oe(e){return fe.apply(this,arguments)}function fe(){return(fe=Object(P.a)(R.a.mark((function e(t){var n,r,c,a,o,i,s,l;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ce.auth().currentUser,r=new Date,c=ae.collection("events").where("attendeeIds","array-contains",n.uid).where("date",">=",r),a=ae.collection("following").doc(n.uid).collection("userFollowing"),(o=ae.batch()).update(ae.collection("users").doc(n.uid),{photoURL:t.url}),e.prev=6,e.next=9,c.get();case 9:for(i=e.sent,s=0;s<i.docs.length;s++)(l=i.docs[s]).data().hostUid===n.uid&&o.update(i.docs[s].ref,{hostPhotoURL:t.url}),o.update(i.docs[s].ref,{attendees:l.data().attendees.filter((function(e){return e.id===n.uid&&(e.photoURL=t.url),e}))});return e.next=13,a.get();case 13:return e.sent.docs.forEach((function(e){var r=ae.collection("following").doc(e.id).collection("userFollowers").doc(n.uid);o.update(r,{photoURL:t.url})})),e.next=17,o.commit();case 17:return e.next=19,n.updateProfile({photoURL:t.url});case 19:return e.abrupt("return",e.sent);case 22:throw e.prev=22,e.t0=e.catch(6),e.t0;case 25:case"end":return e.stop()}}),e,null,[[6,22]])})))).apply(this,arguments)}function xe(e){var t=ce.auth().currentUser.uid;return ae.collection("users").doc(t).collection("photos").doc(e).delete()}function ve(e){var t=ce.auth().currentUser;return ae.collection("events").doc(e.id).update({attendees:ce.firestore.FieldValue.arrayUnion({id:t.uid,displayName:t.displayName,photoURL:t.photoURL||null}),attendeeIds:ce.firestore.FieldValue.arrayUnion(t.uid)})}function me(e){return ge.apply(this,arguments)}function ge(){return(ge=Object(P.a)(R.a.mark((function e(t){var n,r;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ce.auth().currentUser,e.prev=1,e.next=4,ae.collection("events").doc(t.id).get();case 4:return r=e.sent,e.abrupt("return",ae.collection("events").doc(t.id).update({attendeeIds:ce.firestore.FieldValue.arrayRemove(n.uid),attendees:r.data().attendees.filter((function(e){return e.id!==n.uid}))}));case 8:throw e.prev=8,e.t0=e.catch(1),e.t0;case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function ye(e){return we.apply(this,arguments)}function we(){return(we=Object(P.a)(R.a.mark((function e(t){var n,r;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ce.auth().currentUser,r=ae.batch(),e.prev=2,r.set(ae.collection("following").doc(n.uid).collection("userFollowing").doc(t.id),{displayName:t.displayName,photoURL:t.photoURL,uid:t.id}),r.update(ae.collection("users").doc(n.uid),{followingCount:ce.firestore.FieldValue.increment(1)}),e.next=7,r.commit();case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(2),e.t0;case 13:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}function Ee(e){return Ce.apply(this,arguments)}function Ce(){return(Ce=Object(P.a)(R.a.mark((function e(t){var n,r;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ce.auth().currentUser,r=ae.batch(),e.prev=2,r.delete(ae.collection("following").doc(n.uid).collection("userFollowing").doc(t.id)),r.update(ae.collection("users").doc(n.uid),{followingCount:ce.firestore.FieldValue.increment(-1)}),e.next=7,r.commit();case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(2),e.t0;case 13:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}function ke(e){var t=ce.auth().currentUser.uid;return ae.collection("following").doc(t).collection("userFollowing").doc(e).get()}function Se(e,t,n,r){return function(){var c=Object(P.a)(R.a.mark((function c(a){var o,i,s,l;return R.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return a(X()),c.prev=1,c.next=4,ie(e,t,n,r).get();case 4:o=c.sent,i=o.docs[o.docs.length-1],s=o.docs.length>=n,l=o.docs.map((function(e){return oe(e)})),a({type:M,payload:{events:l,moreEvents:s,lastVisible:i}}),a($()),c.next=15;break;case 12:c.prev=12,c.t0=c.catch(1),a(ee(c.t0));case 15:case"end":return c.stop()}}),c,null,[[1,12]])})));return function(e){return c.apply(this,arguments)}}()}function Le(e){return function(t){t(Ie()),t({type:B,payload:e})}}function Ue(e){return{type:z,payload:e}}function Ie(){return{type:H}}function Te(e){var t=e.loading,n=Object(k.d)(),r=Object(k.e)((function(e){return e.auth})).authenticated,c=Object(k.e)((function(e){return e.event})),a=c.filter,o=c.startDate;return Object(v.jsxs)(v.Fragment,{children:[r&&Object(v.jsxs)(U.a,{vertical:!0,size:"large",style:{width:"100%"},children:[Object(v.jsx)(I.a,{icon:"filter",attached:!0,color:"blue",content:"Filters"}),Object(v.jsx)(U.a.Item,{content:"All Events",active:"all"===a,onClick:function(){return n(Le("all"))},disabled:t}),Object(v.jsx)(U.a.Item,{content:"I'm Going",active:"isGoing"===a,onClick:function(){return n(Le("isGoing"))},disabled:t}),Object(v.jsx)(U.a.Item,{content:"I'm Hosting",active:"isHost"===a,onClick:function(){return n(Le("isHost"))},disabled:t})]}),Object(v.jsx)(I.a,{icon:"calendar",attached:!0,color:"blue",content:"Select Date"}),Object(v.jsx)(T.a,{onChange:function(e){return n(function(e){return function(t){t(Ie()),t({type:q,payload:e})}}(e))},value:o||new Date,tileDisabled:function(){return t}})]})}var Ne=n(485),Re=n(28);function Pe(e){if(e)return Object.entries(e).map((function(e){return Object.assign({},e[1],{id:e[0]})}))}function Fe(){return ce.auth().signOut()}function Ae(e){return _e.apply(this,arguments)}function _e(){return(_e=Object(P.a)(R.a.mark((function e(t){var n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ce.auth().createUserWithEmailAndPassword(t.email,t.password);case 3:return n=e.sent,e.next=6,n.user.updateProfile({displayName:t.displayName});case 6:return e.next=8,de(n.user);case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e.catch(0),e.t0;case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function Me(){return(Me=Object(P.a)(R.a.mark((function e(t){var n,r;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"facebook"===t&&(n=new ce.auth.FacebookAuthProvider),"google"===t&&(n=new ce.auth.GoogleAuthProvider),e.prev=2,e.next=5,ce.auth().signInWithPopup(n);case 5:if(r=e.sent,console.log(r),!r.additionalUserInfo.isNewUser){e.next=10;break}return e.next=10,de(r.user);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),Re.b.error(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})))).apply(this,arguments)}function De(e){var t=ce.auth().currentUser.uid;return ce.storage().ref().child("".concat(t,"/user_images/").concat(e)).delete()}function Ve(e,t){var n=ce.auth().currentUser,r={displayName:n.displayName,photoURL:n.photoURL,uid:n.uid,text:t.comment,date:Date.now(),parentId:t.parentId};return ce.database().ref("chat/".concat(e)).push(r)}function ze(e){return ce.database().ref("chat/".concat(e)).orderByKey()}function Ge(){var e=ce.auth().currentUser;return ce.database().ref("posts/".concat(e.uid)).orderByKey().limitToLast(5)}var He="LISTEN_TO_CURRENT_USER_PROFILE",Be="LISTEN_TO_SELECTED_USER_PROFILE",qe="LISTEN_TO_USER_PHOTOS",Ke="LISTEN_TO_USER_EVENTS",We="LISTEN_TO_FOLLOWERS",Ye="LISTEN_TO_FOLLOWINGS",Je="SET_FOLLOW_USER",Ze="SET_UNFOLLOW_USER",Qe="CLEAR_FOLLOWINGS",Xe="LISTEN_TO_FEED";function $e(){return{type:Je}}function et(){return{type:Ze}}var tt=n(489);function nt(e){var t,n=e.post;switch(n.code){case"joined-event":t=Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(d.a,{to:"/profile/".concat(n.userUid),children:n.displayName})," has signed up to ",Object(v.jsx)(d.a,{to:"/events/".concat(n.eventId),children:n.title})]});break;case"left-event":t=Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(d.a,{to:"/profile/".concat(n.userUid),children:n.displayName})," has canceled their place on",Object(v.jsx)(d.a,{to:"/events/".concat(n.eventId),children:n.title})]});break;default:t="Something happened"}return Object(v.jsxs)(Ne.a.Event,{children:[Object(v.jsx)(Ne.a.Label,{image:n.photoURL}),Object(v.jsxs)(Ne.a.Content,{children:[Object(v.jsxs)(Ne.a.Date,{children:[Object(tt.a)(new Date(n.date),new Date)," ago"]}),Object(v.jsx)(Ne.a.Summary,{children:t})]})]})}function rt(){var e=Object(k.d)(),t=Object(k.e)((function(e){return e.profile})).feed;return Object(r.useEffect)((function(){return Ge().on("value",(function(t){if(t.exists()){var n=Pe(t.val()).reverse();e(function(e){return{type:Xe,payload:e}}(n))}})),function(){Ge().off()}}),[e]),Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(I.a,{attached:!0,color:"blue",icon:"newspaper",content:"News feed"}),Object(v.jsx)(j.a,{attached:"bottom",children:Object(v.jsx)(Ne.a,{children:t.map((function(e){return Object(v.jsx)(nt,{post:e},e.id)}))})})]})}function ct(){var e=Object(k.d)(),t=Object(k.e)((function(e){return e.event})),n=t.events,c=t.moreEvents,a=t.filter,o=t.startDate,i=t.lastVisible,d=t.retainState,j=Object(k.e)((function(e){return e.async})).loading,b=Object(k.e)((function(e){return e.auth})).authenticated,p=Object(r.useState)(!1),h=Object(s.a)(p,2),O=h[0],f=h[1];return Object(r.useEffect)((function(){if(!d)return f(!0),e(Se(a,o,2)).then((function(){f(!1)})),function(){e({type:K})}}),[e,a,o,d]),Object(v.jsxs)(l.a,{children:[Object(v.jsxs)(l.a.Column,{width:10,children:[O&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(L,{}),Object(v.jsx)(L,{})]}),Object(v.jsx)(C,{events:n,getNextEvents:function(){e(Se(a,o,2,i))},loading:j,moreEvents:c})]}),Object(v.jsxs)(l.a.Column,{width:6,children:[b&&Object(v.jsx)(rt,{}),Object(v.jsx)(Te,{loading:j})]}),Object(v.jsx)(l.a.Column,{width:10,children:Object(v.jsx)(u.a,{active:j})})]})}function at(e){var t=e.query,n=e.data,c=e.deps,a=e.shouldExecute,o=void 0===a||a,i=Object(k.d)();Object(r.useEffect)((function(){if(o){i(X());var e=t().onSnapshot((function(e){e.exists?(n(oe(e)),i($())):i(ee({code:"not-found",message:"Could not find document"}))}),(function(e){return i(ee())}));return function(){e()}}}),c)}var ot=n(486),it=n(26),st=n(27);function lt(e){var t=e.eventId,n=e.parentId,r=e.closeForm;return Object(v.jsx)(it.c,{initialValues:{comment:""},validationSchema:st.a({comment:st.c().required()}),onSubmit:function(){var e=Object(P.a)(R.a.mark((function e(c,a){var o,i;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=a.setSubmitting,i=a.resetForm,e.prev=1,e.next=4,Ve(t,Object(W.a)(Object(W.a)({},c),{},{parentId:n}));case 4:i(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),Re.b.error(e.t0.message);case 10:return e.prev=10,o(!1),r({open:!1,commentId:null}),e.finish(10);case 14:case"end":return e.stop()}}),e,null,[[1,7,10,14]])})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting,n=e.handleSubmit,r=e.isValid;return Object(v.jsx)(it.b,{className:"ui form",children:Object(v.jsx)(it.a,{name:"comment",children:function(e){var c=e.field;return Object(v.jsxs)("div",{style:{position:"relative"},children:[Object(v.jsx)(u.a,{active:t}),Object(v.jsx)("textarea",Object(W.a)(Object(W.a)({rows:2},c),{},{placeholder:"Enter your comment (Press ENTER to submit, SHIFT + ENTER for new line)",onKeyPress:function(e){"Enter"===e.key&&e.shiftKey||"Enter"!==e.key||e.shiftKey||(e.preventDefault(),r&&n())}}))]})}})})}})}function ut(e){return new Promise((function(t){return setTimeout(t,e)}))}function dt(e){var t=Object.create(null);e.forEach((function(e){return t[e.id]=Object(W.a)(Object(W.a)({},e),{},{childNodes:[]})}));var n=[];return e.forEach((function(e){e.parentId?t[e.parentId].childNodes.push(t[e.id]):n.push(t[e.id])})),n}function jt(e){var t=e.eventId,n=Object(k.d)(),c=Object(k.e)((function(e){return e.event})).comments,a=Object(k.e)((function(e){return e.auth})).authenticated,o=Object(r.useState)({open:!1,commentId:null}),i=Object(s.a)(o,2),l=i[0],u=i[1];function b(){u({open:!1,commentId:null})}return Object(r.useEffect)((function(){return ze(t).on("value",(function(e){e.exists()&&n(function(e){return{type:D,payload:e}}(Pe(e.val()).reverse()))})),function(){n({type:V}),ze().off()}}),[t,n]),Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(j.a,{textAlign:"center",attached:"top",inverted:!0,color:"facebook",style:{border:"none"},children:Object(v.jsx)(I.a,{children:a?"Chat about this event":"Sign in to view and comment"})}),a&&Object(v.jsxs)(j.a,{attached:!0,children:[Object(v.jsx)(lt,{eventId:t,parentId:0,closeForm:u}),Object(v.jsx)(ot.a.Group,{children:dt(c).map((function(e){return Object(v.jsxs)(ot.a,{children:[Object(v.jsx)(ot.a.Avatar,{src:e.photoURL||"/event-web-app/assets/user.png"}),Object(v.jsxs)(ot.a.Content,{children:[Object(v.jsx)(ot.a.Author,{as:d.a,to:"/profile/".concat(e.uid),children:e.displayName}),Object(v.jsx)(ot.a.Metadata,{children:Object(v.jsx)("div",{children:Object(tt.a)(e.date,new Date)})}),Object(v.jsx)(ot.a.Text,{children:e.text.split("\n").map((function(e,t){return Object(v.jsxs)("span",{children:[e,Object(v.jsx)("br",{})]},t)}))}),Object(v.jsxs)(ot.a.Actions,{children:[Object(v.jsx)(ot.a.Action,{onClick:function(){return u({open:!0,commentId:e.id})},children:"Reply"}),l.open&&l.commentId===e.id&&Object(v.jsx)(lt,{eventId:t,parentId:e.id,closeForm:b})]})]}),e.childNodes.length>0&&Object(v.jsx)(ot.a.Group,{children:e.childNodes.reverse().map((function(e){return Object(v.jsxs)(ot.a,{children:[Object(v.jsx)(ot.a.Avatar,{src:e.photoURL||"/event-web-app/assets/user.png"}),Object(v.jsxs)(ot.a.Content,{children:[Object(v.jsx)(ot.a.Author,{as:d.a,to:"/profile/".concat(e.uid),children:e.displayName}),Object(v.jsx)(ot.a.Metadata,{children:Object(v.jsx)("div",{children:Object(tt.a)(e.date,new Date)})}),Object(v.jsx)(ot.a.Text,{children:e.text.split("\n").map((function(e,t){return Object(v.jsxs)("span",{children:[e,Object(v.jsx)("br",{})]},t)}))}),Object(v.jsxs)(ot.a.Actions,{children:[Object(v.jsx)(ot.a.Action,{onClick:function(){return u({open:!0,commentId:e.id})},children:"Reply"}),l.open&&l.commentId===e.id&&Object(v.jsx)(lt,{eventId:t,parentId:e.parentId,closeForm:b})]})]})]},e.id)}))})]},e.id)}))})]})]})}var bt=n(203),pt=n(481),ht="OPEN_MODAL",Ot="CLOSE_MODAL";function ft(e){return{type:ht,payload:e}}function xt(){return{type:Ot}}function vt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case ht:var c=r.modalType,a=r.modalProps;return{modalType:c,modalProps:a};case Ot:return null;default:return e}}function mt(e){var t=e.history,n=e.setModalOpen,c=Object(r.useState)(!0),a=Object(s.a)(c,2),o=a[0],i=a[1],l=Object(k.e)((function(e){return e.auth})).prevLocation,u=Object(k.d)();function d(){if(!t)return i(!1),void n(!1);t&&l?t.push(l.pathname):t.push("/events"),i(!1)}function j(e){u(ft({modalType:e})),i(!1),void 0!==n&&n(!1)}return Object(v.jsxs)(bt.a,{open:o,size:"mini",onClose:d,children:[Object(v.jsx)(bt.a.Header,{content:"You need to be signed in to do that"}),Object(v.jsxs)(bt.a.Content,{children:[Object(v.jsx)("p",{children:"Please login or register to see this content"}),Object(v.jsxs)(f.a.Group,{widths:4,children:[Object(v.jsx)(f.a,{fluid:!0,color:"blue",content:"Login",onClick:function(){return j("LoginForm")}}),Object(v.jsx)(f.a.Or,{}),Object(v.jsx)(f.a,{fluid:!0,color:"gray",content:"Register",onClick:function(){return j("RegisterForm")}})]}),Object(v.jsx)(pt.a,{}),Object(v.jsxs)("div",{style:{textAlign:"center"},children:[Object(v.jsx)("p",{children:"Or click cancel to continue as a guest"}),Object(v.jsx)(f.a,{onClick:d,content:"Cancel"})]})]})]})}var gt={filter:"brightness(30%)"},yt={position:"absolute",bottom:"5%",left:"5%",width:"100%",height:"auto",color:"white"};function wt(e){var t=e.event,n=e.isHost,c=e.isGoing,a=Object(r.useState)(!1),o=Object(s.a)(a,2),i=o[0],l=o[1],u=Object(k.e)((function(e){return e.auth})).authenticated,p=Object(r.useState)(!1),h=p.modalOpen,O=p.setModalOpen;function m(){return(m=Object(P.a)(R.a.mark((function e(){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.prev=1,e.next=4,ve(t);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),Re.b.error(e.t0.message);case 9:return e.prev=9,l(!1),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[1,6,9,12]])})))).apply(this,arguments)}function y(){return(y=Object(P.a)(R.a.mark((function e(){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.prev=1,e.next=4,me(t);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),Re.b.error(e.t0.message);case 9:return e.prev=9,l(!1),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[1,6,9,12]])})))).apply(this,arguments)}return Object(v.jsxs)(v.Fragment,{children:[h&&Object(v.jsx)(mt,{setModalOpen:O}),Object(v.jsxs)(j.a.Group,{children:[Object(v.jsxs)(j.a,{basic:!0,attached:"top",style:{padding:"0"},children:[Object(v.jsx)(x.a,{src:"/event-web-app"+"/assets/categoryImages/".concat(t.category,".jpg"),fluid:!0,style:gt}),Object(v.jsx)(j.a,{basic:!0,stye:yt,children:Object(v.jsx)(b.a.Group,{children:Object(v.jsx)(b.a,{children:Object(v.jsxs)(b.a.Content,{children:[Object(v.jsx)(I.a,{size:"huge",content:t.title,style:{color:"black"}}),Object(v.jsx)("p",{children:Object(g.default)(t.date,"MMMM d, yyyy h:mm a")}),Object(v.jsxs)("p",{children:["Hosted by ",Object(v.jsx)("strong",{children:Object(v.jsx)(d.a,{to:"/profile/".concat(t.hostUid),children:t.hostedBy})})]})]})})})})]}),Object(v.jsxs)(j.a,{attached:"bottom",clearing:!0,children:[!n&&Object(v.jsx)(v.Fragment,{children:c?Object(v.jsx)(f.a,{onClick:function(){return y.apply(this,arguments)},loading:i,children:"Cancel My Place"}):Object(v.jsx)(f.a,{onClick:u?function(){return m.apply(this,arguments)}:function(){return O(!0)},loading:i,color:"facebook",children:"JOIN THIS EVENT"})}),n&&Object(v.jsx)(f.a,{as:d.a,to:"/manage/".concat(t.id),color:"facebook",floated:"right",children:"Manage Event"})]})]})]})}var Et=n(194);function Ct(){return Object(v.jsx)(h.a,{name:"marker",size:"big",color:"red"})}function kt(e){var t=e.latLng;return Object(v.jsx)(j.a,{attached:"bottom",style:{padding:0},children:Object(v.jsx)("div",{style:{height:300,width:"100%"},children:Object(v.jsx)(Et.a,{bootstrapURLKeys:{key:"AIzaSyDgO0x7YfN3CkJv_vBMfxnYADSdk2ZUTy0"},center:t,zoom:14,children:Object(v.jsx)(Ct,{lat:t.lat,lng:t.lng})})})})}function St(e){var t=e.event,n=Object(r.useState)(!1),c=Object(s.a)(n,2),a=c[0],o=c[1];return Object(v.jsxs)(j.a.Group,{children:[Object(v.jsx)(j.a,{attached:"top",children:Object(v.jsxs)(l.a,{children:[Object(v.jsx)(l.a.Column,{width:1,children:Object(v.jsx)(h.a,{size:"large",color:"grey",name:"info"})}),Object(v.jsx)(l.a.Column,{width:15,children:Object(v.jsx)("p",{children:t.description})})]})}),Object(v.jsx)(j.a,{attached:!0,children:Object(v.jsxs)(l.a,{verticalAlign:"middle",children:[Object(v.jsx)(l.a.Column,{width:1,children:Object(v.jsx)(h.a,{name:"calendar",size:"large",color:"grey"})}),Object(v.jsx)(l.a.Column,{width:15,children:Object(v.jsx)("span",{children:Object(g.default)(t.date,"MMMM d, yyyy h:mm a")})})]})}),Object(v.jsx)(j.a,{attached:!0,children:Object(v.jsxs)(l.a,{verticalAlign:"middle",children:[Object(v.jsx)(l.a.Column,{width:1,children:Object(v.jsx)(h.a,{name:"marker",size:"large",color:"blue"})}),Object(v.jsx)(l.a.Column,{width:11,children:Object(v.jsx)("span",{children:t.venue.address})}),Object(v.jsx)(l.a.Column,{width:4,children:Object(v.jsx)(f.a,{onClick:function(){return o(!a)},color:"facebook",size:"tiny",content:a?"Hide Map":"Show Map"})})]})}),a&&Object(v.jsx)(kt,{latLng:t.venue.latLng})]})}function Lt(e){var t=e.attendees,n=e.hostUid;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)(j.a,{textAlign:"center",style:{border:"none"},attached:"top",primary:!0,inverted:!0,children:[t.length," ",t.length>1?"People":"Person"," Going"]}),Object(v.jsx)(j.a,{attached:!0,children:Object(v.jsx)(b.a.Group,{relaxed:!0,divided:!0,children:t.map((function(e){return Object(v.jsxs)(b.a,{as:d.a,to:"/profile/".concat(e.id),style:{position:"relative"},children:[n===e.id&&Object(v.jsx)(p.a,{style:{position:"absolute"},color:"orange",ribbon:"right",content:"Host"}),Object(v.jsx)(b.a.Image,{size:"tiny",src:e.photoURL||"/assets/user.png"}),Object(v.jsx)(b.a.Content,{verticalAlign:"middle",children:Object(v.jsx)(b.a.Header,{as:"h3",children:Object(v.jsx)("span",{children:e.displayName})})})]},e.id)}))})})]})}var Ut=n(494);function It(e){var t=e.inverted,n=void 0===t||t,r=e.content,c=void 0===r?"Loading...":r;return Object(v.jsx)(Ut.a,{inverted:n,active:!0,children:Object(v.jsx)(u.a,{content:c})})}function Tt(e){var t,n=e.match,r=Object(k.d)(),c=Object(k.e)((function(e){return e.auth})).currentUser,a=Object(k.e)((function(e){return e.event.selectedEvent})),i=Object(k.e)((function(e){return e.async})),s=i.loading,u=i.error,d=(null===a||void 0===a?void 0:a.hostUid)===(null===c||void 0===c?void 0:c.uid),j=null===a||void 0===a||null===(t=a.attendees)||void 0===t?void 0:t.some((function(e){return e.id===(null===c||void 0===c?void 0:c.uid)}));return at({query:function(){return se(n.params.id)},data:function(e){return r(Ue(e))},deps:[n.params.id,r]}),s||!a&&!u?Object(v.jsx)(It,{content:"Loading event..."}):u?Object(v.jsx)(o.a,{to:"/error"}):Object(v.jsxs)(l.a,{children:[Object(v.jsxs)(l.a.Column,{width:10,children:[Object(v.jsx)(wt,{event:a,isGoing:j,isHost:d}),Object(v.jsx)(St,{event:a}),Object(v.jsx)(jt,{eventId:a.id})]}),Object(v.jsx)(l.a.Column,{width:6,children:Object(v.jsx)(Lt,{attendees:null===a||void 0===a?void 0:a.attendees,hostUid:a.hostUid})})]})}var Nt=n(483),Rt=n(59),Pt=n(492),Ft=["label"];function At(e){var t=e.label,n=Object(Rt.a)(e,Ft),r=Object(it.d)(n),c=Object(s.a)(r,2),a=c[0],o=c[1];return Object(v.jsxs)(Pt.a,{error:o.touched&&!!o.error,children:[Object(v.jsx)("label",{children:t}),Object(v.jsx)("input",Object(W.a)(Object(W.a)({},a),n)),o.touched&&o.error?Object(v.jsx)(p.a,{basic:!0,color:"red",children:o.error}):null]})}var _t=["label"];function Mt(e){var t=e.label,n=Object(Rt.a)(e,_t),r=Object(it.d)(n),c=Object(s.a)(r,2),a=c[0],o=c[1];return Object(v.jsxs)(Pt.a,{error:o.touched&&!!o.error,children:[Object(v.jsx)("label",{children:t}),Object(v.jsx)("textarea",Object(W.a)(Object(W.a)({},a),n)),o.touched&&o.error?Object(v.jsx)(p.a,{basic:!0,color:"red",children:o.error}):null]})}var Dt=n(482),Vt=["label"];function zt(e){var t=e.label,n=Object(Rt.a)(e,Vt),r=Object(it.d)(n),c=Object(s.a)(r,3),a=c[0],o=c[1],i=c[2];return Object(v.jsxs)(Pt.a,{error:o.touched&&!!o.error,children:[Object(v.jsx)("label",{children:t}),Object(v.jsx)(Dt.a,Object(W.a)({clearable:!0,value:a.value||null,onChange:function(e,t){return i.setValue(t.value)},onBlur:function(){return i.setTouched(!0)}},n)),o.touched&&o.error?Object(v.jsx)(p.a,{basic:!0,color:"red",children:o.error}):null]})}var Gt=[{key:"drinks",text:"Drinks",value:"drinks"},{key:"culture",text:"Culture",value:"culture"},{key:"film",text:"Film",value:"film"},{key:"food",text:"Food",value:"food"},{key:"music",text:"Music",value:"music"},{key:"travel",text:"Travel",value:"travel"}],Ht=n(264),Bt=n.n(Ht),qt=(n(411),["label"]);function Kt(e){var t=e.label,n=Object(Rt.a)(e,qt),r=Object(it.e)().setFieldValue,c=Object(it.d)(n),a=Object(s.a)(c,2),o=a[0],i=a[1];return Object(v.jsxs)(Pt.a,{error:i.touched&&!!i.error,children:[Object(v.jsx)("label",{children:t}),Object(v.jsx)(Bt.a,Object(W.a)(Object(W.a)(Object(W.a)({},o),n),{},{selected:o.value&&new Date(o.value)||null,onChange:function(e){return r(o.name,e)}})),i.touched&&i.error?Object(v.jsx)(p.a,{basic:!0,color:"red",children:i.error}):null]})}var Wt=n(97),Yt=n.n(Wt),Jt=["label","options"];function Zt(e){e.label;var t=e.options,n=Object(Rt.a)(e,Jt),r=Object(it.d)(n),c=Object(s.a)(r,3),a=c[0],o=c[1],i=c[2];return Object(v.jsx)(Yt.a,{value:a.value.address,onChange:function(e){return i.setValue({address:e})},onSelect:function(e){return t=e,void Object(Wt.geocodeByAddress)(t).then((function(e){return Object(Wt.getLatLng)(e[0])})).then((function(e){return i.setValue({address:t,latLng:e})})).catch((function(e){return i.setError(e)}));var t},searchOptions:t,children:function(e){var t=e.getInputProps,r=e.suggestions,c=e.getSuggestionItemProps,s=e.loading;return Object(v.jsxs)(Pt.a,{error:o.touched&&!!o.error,children:[Object(v.jsx)("input",Object(W.a)({},t(Object(W.a)({name:a.name,onBlur:function(e){return function(e){a.onBlur(e),a.value.latLng||i.setValue({address:"",latLng:null})}(e)}},n)))),o.touched&&o.error?Object(v.jsx)(p.a,{basic:!0,color:"red",children:o.error.address}):null,(null===r||void 0===r?void 0:r.length)>0&&Object(v.jsx)(j.a,{loading:s,style:{marginTop:0,position:"absolute",zIndex:1e3,width:"100%"},children:Object(v.jsx)(O.a,{selection:!0,children:r.map((function(e){return Object(v.jsxs)(O.a.Item,Object(W.a)(Object(W.a)({},c(e)),{},{children:[Object(v.jsx)(O.a.Header,{children:e.formattedSuggestion.mainText}),Object(v.jsx)(O.a.Description,{children:e.formattedSuggestion.secondaryText})]}))}))})})]})}})}function Qt(e){var t=e.match,n=e.history,c=e.location,a=Object(k.d)(),i=Object(r.useState)(!1),l=Object(s.a)(i,2),u=l[0],b=l[1],p=Object(r.useState)(!1),h=Object(s.a)(p,2),O=h[0],x=h[1],m=Object(k.e)((function(e){return e.event})).selectedEvent,g=Object(k.e)((function(e){return e.async})),y=g.loading,w=g.error;Object(r.useEffect)((function(){"/createEvent"===c.pathname&&a({type:G})}),[a,c.pathname]);var E=null!==m&&void 0!==m?m:{title:"",category:"",description:"",city:{address:"",latLng:null},venue:{address:"",latLng:null},date:""},C=st.a({title:st.c().required("You must provide a title"),category:st.c().required("You must provide a category"),description:st.c().required(),city:st.a().shape({address:st.c().required("City is required")}),venue:st.a().shape({address:st.c().required("Venue is required")}),date:st.c().required()});function S(){return(S=Object(P.a)(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!1),b(!0),e.prev=2,e.next=5,ue(t);case 5:b(!1),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(2),b(!0),Re.b.error(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[2,8]])})))).apply(this,arguments)}return at({shouldExecute:t.params.id!==(null===m||void 0===m?void 0:m.id)&&"/createEvent"!==c.pathname,query:function(){return se(t.params.id)},data:function(e){return a(Ue(e))},deps:[t.params.id,a]}),y?Object(v.jsx)(It,{content:"Loading event..."}):w?Object(v.jsx)(o.a,{to:"/error"}):Object(v.jsxs)(j.a,{clearing:!0,children:[Object(v.jsx)(it.c,{enableReinitialize:!0,initialValues:E,validationSchema:C,onSubmit:function(){var e=Object(P.a)(R.a.mark((function e(t,r){var c;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=r.setSubmitting,e.prev=1,!m){e.next=7;break}return e.next=5,a=t,ae.collection("events").doc(a.id).update(a);case 5:e.next=9;break;case 7:return e.next=9,le(t);case 9:c(!1),n.push("/events"),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),Re.b.error(e.t0.message),c(!1);case 17:case"end":return e.stop()}var a}),e,null,[[1,13]])})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting,n=e.dirty,r=e.isValid,c=e.values;return Object(v.jsxs)(it.b,{className:"ui form",children:[Object(v.jsx)(I.a,{content:"EVENT DETAILS"}),Object(v.jsx)(At,{name:"title",placeholder:"Event Title"}),Object(v.jsx)(zt,{name:"category",placeholder:"Category",options:Gt}),Object(v.jsx)(Mt,{name:"description",placeholder:"Description",rows:3}),Object(v.jsx)(I.a,{content:"EVENT LOCATION DETAILS"}),Object(v.jsx)(Zt,{name:"city",placeholder:"City"}),Object(v.jsx)(Zt,{name:"venue",disabled:!c.city.latLng,placeholder:"Venue",options:{location:new google.maps.LatLng(c.city.latLng),radius:1e3,types:["establishment"]}}),Object(v.jsx)(Kt,{name:"date",placeholderText:"Event Date",timeFormat:"HH:mm",showTimeSelect:!0,timeCaption:"time",dateFormat:"MMMM d, yyyy h:mm a",autoComplete:"off"}),m&&Object(v.jsx)(f.a,{loading:u,type:"button",floated:"left",color:m.isCancelled?"green":"red",content:m.isCancelled?"Reactivate Event":"Cancel Event",onClick:function(){return x(!0)}}),Object(v.jsx)(f.a,{loading:t,disabled:!r||!n||t,type:"submit",floated:"right",positive:!0,content:"Submit"}),Object(v.jsx)(f.a,{disabled:t,as:d.a,to:"/events",type:"submit",floated:"right",content:"Cancel"})]})}}),Object(v.jsx)(Nt.a,{content:(null===m||void 0===m?void 0:m.isCancelled)?"This will reactivate the event - are you sure?":"This will cancel the event - are you sure?",open:O,onCancel:function(){return x(!1)},onConfirm:function(){return function(e){return S.apply(this,arguments)}(m)}})]})}function Xt(e){var t=e.history;return Object(v.jsx)(j.a,{inverted:!0,textAlign:"center",vertical:!0,className:"masthead",children:Object(v.jsxs)(i.a,{children:[Object(v.jsx)(I.a,{as:"h1",inverted:!0,children:"EventSpace"}),Object(v.jsxs)(f.a,{onClick:function(){return t.push("/events")},size:"huge",inverted:!0,children:["Get Started",Object(v.jsx)(h.a,{name:"right arrow",inverted:!0})]})]})})}var $t=n(152);function en(){var e=Object(k.e)((function(e){return e.profile})).currentUserProfile,t=Object(o.f)();function n(){return(n=Object(P.a)(R.a.mark((function e(){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.push("/"),e.next=4,Fe();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),Re.b.error(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}return Object(v.jsxs)(U.a.Item,{position:"right",children:[Object(v.jsx)(x.a,{avatar:!0,spaced:"right",src:(null===e||void 0===e?void 0:e.photoURL)||"/event-web-app/assets/user.png"}),Object(v.jsx)($t.a,{pointing:"top left",text:null===e||void 0===e?void 0:e.displayName,children:Object(v.jsxs)($t.a.Menu,{children:[Object(v.jsx)($t.a.Item,{as:d.a,to:"/createEvent",text:"Create Event",icon:"plus"}),Object(v.jsx)($t.a.Item,{as:d.a,to:"/profile/".concat(null===e||void 0===e?void 0:e.id),text:"My Profile",icon:"user"}),Object(v.jsx)($t.a.Item,{as:d.a,to:"/account",text:"My Account",icon:"settings"}),Object(v.jsx)($t.a.Item,{onClick:function(){return n.apply(this,arguments)},text:"Sign Out",icon:"power"})]})})]})}function tn(e){e.setAuthenticated;var t=Object(k.d)();return Object(v.jsxs)(U.a.Item,{position:"right",children:[Object(v.jsx)(f.a,{onClick:function(){return t(ft({modalType:"LoginForm"}))},basic:!0,inverted:!0,content:"Login"}),Object(v.jsx)(f.a,{onClick:function(){return t(ft({modalType:"RegisterForm"}))},basic:!0,inverted:!0,content:"Register",style:{marginLeft:"0.5em"}})]})}function nn(e){e.setFormOpen;var t=Object(k.e)((function(e){return e.auth})).authenticated;return Object(v.jsx)(U.a,{inverted:!0,fixed:"top",children:Object(v.jsxs)(i.a,{children:[Object(v.jsxs)(U.a.Item,{as:d.b,exact:!0,to:"/",header:!0,children:[Object(v.jsx)("img",{src:"/event-web-app/assets/logo.png",alt:"logo",style:{marginRight:15}}),"EventSpace"]}),Object(v.jsx)(U.a.Item,{as:d.b,to:"/events",name:"Events"}),t&&Object(v.jsx)(U.a.Item,{as:d.b,to:"/createEvent",children:Object(v.jsx)(f.a,{inverted:!0,color:"",content:"Create Event"})}),t?Object(v.jsx)(en,{}):Object(v.jsx)(tn,{})]})})}var rn=function(e){var t=e.text;return Object(v.jsx)("div",{children:t})};function cn(e){var t=e.location;return Object(v.jsx)("div",{style:{height:"100vh",width:"100%"},children:Object(v.jsx)(Et.a,{bootstrapURLKeys:{key:"AIzaSyDgO0x7YfN3CkJv_vBMfxnYADSdk2ZUTy0"},center:t.center,zoom:t.zoom,children:Object(v.jsx)(rn,{lat:t.center.lat,lng:t.center.lng,text:"My Marker"})})})}function an(e){var t=e.setLocation,n=Object(r.useState)(""),c=Object(s.a)(n,2),a=c[0],o=c[1];return Object(v.jsx)(Yt.a,{value:a,onChange:function(e){o(e)},onSelect:function(e){Object(Wt.geocodeByAddress)(e).then((function(e){return Object(Wt.getLatLng)(e[0])})).then((function(e){console.log("Success",e),t(e)})).catch((function(e){return console.error("Error",e)})),o(e)},children:function(e){var t=e.getInputProps,n=e.suggestions,r=e.getSuggestionItemProps,c=e.loading;return Object(v.jsxs)("div",{children:[Object(v.jsx)("input",Object(W.a)({},t({placeholder:"Search Places ...",className:"location-search-input"}))),Object(v.jsxs)("div",{className:"autocomplete-dropdown-container",children:[c&&Object(v.jsx)("div",{children:"Loading..."}),n.map((function(e){var t=e.active?"suggestion-item--active":"suggestion-item",n=e.active?{backgroundColor:"#fafafa",cursor:"pointer"}:{backgroundColor:"#ffffff",cursor:"pointer"};return Object(v.jsx)("div",Object(W.a)(Object(W.a)({},r(e,{className:t,style:n})),{},{children:Object(v.jsx)("span",{children:e.description})}))}))]})]})}})}var on="INCREMENT_COUNTER",sn="DECREMENT_COUNTER";var ln={data:42};function un(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ln,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case on:return Object(W.a)(Object(W.a)({},e),{},{data:e.data+r});case sn:return Object(W.a)(Object(W.a)({},e),{},{data:e.data-r});default:return e}}function dn(){var e=Object(k.d)(),t=Object(r.useState)(null),n=Object(s.a)(t,2),c=n[0],a=n[1],o=Object(k.e)((function(e){return e.test.data})),i=Object(k.e)((function(e){return e.async})).loading,l=Object(r.useState)({center:{lat:10.99835602,lng:77.01502627},zoom:11}),u=Object(s.a)(l,2),d=u[0],j=u[1];return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("h1",{children:"Testing 123"}),Object(v.jsxs)("h2",{children:["The data is: ",o," "]}),Object(v.jsx)(f.a,{name:"increment",loading:i&&"increment"===c,onClick:function(t){var n;e((n=20,function(){var e=Object(P.a)(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(X()),e.prev=1,e.next=4,ut(1e3);case 4:t({type:on,payload:n}),t($()),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t(ee(e.t0));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}())),a(t.target.name)},content:"increment",color:"green"}),Object(v.jsx)(f.a,{name:"decrement",loading:i&&"decrement"===c,onClick:function(t){var n;e((n=10,function(){var e=Object(P.a)(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(X()),e.prev=1,e.next=4,ut(1e3);case 4:t({type:sn,payload:n}),t($()),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),t(ee(e.t0)),Re.b.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}())),a(t.target.name)},content:"decrement",color:"red"}),Object(v.jsx)(f.a,{onClick:function(){return e(ft({modalType:"TestModal",modalProps:{data:o}}))},content:"Open Modal",color:"teal"}),Object(v.jsxs)("div",{style:{marginTop:15},children:[Object(v.jsx)(an,{setLocation:function(e){j(Object(W.a)(Object(W.a)({},d),{},{center:{lat:e.lat,lng:e.lng}}))}}),Object(v.jsx)(cn,{location:d})]})]})}function jn(e){var t=e.children,n=e.size,r=e.header,c=Object(k.d)();return Object(v.jsxs)(bt.a,{open:!0,onClose:function(){return c(xt())},size:n,children:[r&&Object(v.jsx)(bt.a.Header,{children:r}),Object(v.jsx)(bt.a.Content,{children:t})]})}function bn(e){var t=e.data;return Object(v.jsx)(jn,{size:"mini",header:"Test Modal",children:Object(v.jsxs)("div",{children:["The data is: ",t]})})}function pn(){var e=Object(k.d)();function t(t){e(xt()),function(e){Me.apply(this,arguments)}(t)}return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(f.a,{onClick:function(){return t("facebook")},icon:"facebook",fluid:!0,color:"facebook",style:{marginBottom:10},content:"Login with Facebook"}),Object(v.jsx)(f.a,{onClick:function(){return t("google")},icon:"google",fluid:!0,color:"google plus",content:"Login with Google"})]})}function hn(){var e=Object(k.d)();return Object(v.jsx)(jn,{size:"mini",header:"Sign into EventSpace",children:Object(v.jsx)(it.c,{initialValues:{email:"",password:""},validationSchema:st.a({email:st.c().required().email(),password:st.c().required()}),onSubmit:function(){var t=Object(P.a)(R.a.mark((function t(n,r){var c,a;return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=r.setSubmitting,a=r.setErrors,t.prev=1,t.next=4,o=n,ce.auth().signInWithEmailAndPassword(o.email,o.password);case 4:c(!1),e(xt()),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),a({auth:"Invalid email or password"}),c(!1);case 12:case"end":return t.stop()}var o}),t,null,[[1,8]])})));return function(e,n){return t.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting,n=e.isValid,r=e.dirty,c=e.errors;return Object(v.jsxs)(it.b,{className:"ui form",children:[Object(v.jsx)(At,{name:"email",placeholder:"Email Address"}),Object(v.jsx)(At,{name:"password",placeholder:"Password",type:"password"}),c.auth&&Object(v.jsx)(p.a,{basic:!0,color:"red",style:{marginBottom:10},content:c.auth}),Object(v.jsx)(f.a,{loading:t,disabled:!n||!r||t,type:"submit",fluid:!0,size:"large",color:"facebook",content:"Login"}),Object(v.jsx)(pt.a,{horizontal:!0,children:"Or"}),Object(v.jsx)(pn,{})]})}})})}function On(){var e=Object(k.d)();return Object(v.jsx)(jn,{size:"mini",header:"Register to EventSpace",children:Object(v.jsx)(it.c,{initialValues:{displayName:"",email:"",password:""},validationSchema:st.a({displayName:st.c().required(),email:st.c().required().email(),password:st.c().required()}),onSubmit:function(){var t=Object(P.a)(R.a.mark((function t(n,r){var c,a;return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=r.setSubmitting,a=r.setErrors,t.prev=1,t.next=4,Ae(n);case 4:c(!1),e(xt()),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),a({auth:t.t0.message}),c(!1);case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,n){return t.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting,n=e.isValid,r=e.dirty,c=e.errors;return Object(v.jsxs)(it.b,{className:"ui form",children:[Object(v.jsx)(At,{name:"displayName",placeholder:"Display Name"}),Object(v.jsx)(At,{name:"email",placeholder:"Email Address"}),Object(v.jsx)(At,{name:"password",placeholder:"Password",type:"password"}),c.auth&&Object(v.jsx)(p.a,{basic:!0,color:"red",style:{marginBottom:10},content:c.auth}),Object(v.jsx)(f.a,{loading:t,disabled:!n||!r||t,type:"submit",fluid:!0,size:"large",color:"facebook",content:"Register"}),Object(v.jsx)(pt.a,{horizontal:!0,children:"Or"}),Object(v.jsx)(pn,{})]})}})})}function fn(){var e,t={TestModal:bn,LoginForm:hn,RegisterForm:On},n=Object(k.e)((function(e){return e.modals}));if(n){var r=n.modalType,c=n.modalProps,a=t[r];e=Object(v.jsx)(a,Object(W.a)({},c))}return Object(v.jsx)("span",{children:e})}function xn(){var e=Object(k.e)((function(e){return e.async})).error;return Object(v.jsxs)(j.a,{placeholder:!0,children:[Object(v.jsx)(I.a,{textAlign:"center",content:(null===e||void 0===e?void 0:e.message)||"Oops - we have an error."}),Object(v.jsx)(f.a,{as:d.a,to:"/events",primary:!0,style:{marginTop:20},content:"Return to events page"})]})}function vn(){var e=Object(k.e)((function(e){return e.auth})).currentUser;return Object(v.jsxs)(j.a,{children:[Object(v.jsx)(I.a,{dividing:!0,size:"large",content:"Account"}),"password"===e.providerId&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(I.a,{color:"teal",sub:!0,content:"Change Password"}),Object(v.jsx)("p",{children:"Use this form to change your password"}),Object(v.jsx)(it.c,{initialValues:{newPassword1:"",newPassword2:""},validationSchema:st.a({newPassword1:st.c().required("Password is required"),newPassword2:st.c().oneOf([st.b("newPassword1"),null],"Passwords do not match")}),onSubmit:function(){var e=Object(P.a)(R.a.mark((function e(t,n){var r,c;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.setSubmitting,c=n.setErrors,e.prev=1,e.next=4,a=t,ce.auth().currentUser.updatePassword(a.newPassword1);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),c({auth:e.t0.message});case 9:return e.prev=9,r(!1),e.finish(9);case 12:case"end":return e.stop()}var a}),e,null,[[1,6,9,12]])})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){var t=e.errors,n=e.isSubmitting,r=e.isValid,c=e.dirty;return Object(v.jsxs)(it.b,{className:"ui form",children:[Object(v.jsx)(At,{name:"newPassword1",type:"password",placeholder:"New Password"}),Object(v.jsx)(At,{name:"newPassword2",type:"password",placeholder:"Confirm Password"}),t.auth&&Object(v.jsx)(p.a,{basic:!0,color:"red",style:{marginBottom:10},content:t.auth}),Object(v.jsx)(f.a,{type:"submit",style:{display:"block"},disabled:!r||n||!c,loading:n,size:"large",positive:!0,content:"Update Password"})]})}})]}),"facebook.com"===e.providerId&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(I.a,{color:"teal",sub:!0,content:"Facebook account"}),Object(v.jsx)("p",{children:"Please visit Facebook to update your account."}),Object(v.jsx)(f.a,{icon:"facebook",color:"facebook",as:d.a,to:"https://facebook.com",content:"Go to Facebook"})]}),"google.com"===e.providerId&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(I.a,{color:"teal",sub:!0,content:"Google account"}),Object(v.jsx)("p",{children:"Please visit Google to update your account."}),Object(v.jsx)(f.a,{icon:"google",color:"google plus",as:d.a,to:"https://google.com",content:"Go to Google"})]})]})}var mn=n(498);function gn(e){var t=e.profile;return Object(v.jsx)(it.c,{initialValues:{displayName:t.displayName,description:t.description||""},validationSchema:st.a({displayName:st.c().required()}),onSubmit:function(){var e=Object(P.a)(R.a.mark((function e(t,n){var r;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.setSubmitting,e.prev=1,e.next=4,be(t);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),Re.b.error(e.t0.message);case 9:return e.prev=9,r(!1),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[1,6,9,12]])})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting,n=e.isValid,r=e.dirty;return Object(v.jsxs)(it.b,{className:"ui form",children:[Object(v.jsx)(At,{name:"displayName",placeholder:"Display Name"}),Object(v.jsx)(Mt,{name:"description",placeholder:"Description"}),Object(v.jsx)(f.a,{loading:t,disabled:t||!n||!r,floated:"right",type:"submit",size:"large",positive:!0,content:"Update Profile"})]})}})}function yn(e){var t=e.profile,n=e.isCurrentUser,c=Object(r.useState)(!1),a=Object(s.a)(c,2),o=a[0],i=a[1];return Object(v.jsx)(mn.a.Pane,{children:Object(v.jsxs)(l.a,{children:[Object(v.jsxs)(l.a.Column,{width:16,children:[Object(v.jsx)(I.a,{floated:"left",icon:"user",content:"About ".concat(t.displayName)}),n&&Object(v.jsx)(f.a,{onClick:function(){return i(!o)},floated:"right",basic:!0,content:o?"Cancel":"Edit"})]}),Object(v.jsx)(l.a.Column,{width:16,children:o?Object(v.jsx)(gn,{profile:t}):Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("div",{style:{marginBottom:10},children:[Object(v.jsxs)("strong",{children:["Member Since:",Object(g.default)(t.createdAt,"dd MMM yyyy")," "]}),Object(v.jsx)("div",{children:t.description||null})]})})})]})})}var wn=n(490);function En(e){var t=e.query,n=e.data,c=e.deps,a=Object(k.d)();Object(r.useEffect)((function(){a(X());var e=t().onSnapshot((function(e){var t=e.docs.map((function(e){return oe(e)}));n(t),a($())}),(function(e){return a(ee(e))}));return function(){e()}}),c)}function Cn(e){var t=e.profile,n=Object(k.d)(),c=Object(r.useState)(0),a=Object(s.a)(c,2),o=a[0],i=a[1],u=Object(k.e)((function(e){return e.profile})).profileEvents,j=Object(k.e)((function(e){return e.async})).loading;En({query:function(){return function(e,t){var n=ae.collection("events"),r=new Date;switch(e){case 1:return n.where("attendeeIds","array-contains",t).where("date","<=",r).orderBy("date","desc");case 2:return n.where("hostUid","==",t).orderBy("date");default:return n.where("attendeeIds","array-contains",t).where("date",">=",r).orderBy("date")}}(o,t.id)},data:function(e){return n(function(e){return{type:Ke,payload:e}}(e))},deps:[n,o,t.id]});return Object(v.jsx)(mn.a.Pane,{loading:j,children:Object(v.jsxs)(l.a,{children:[Object(v.jsx)(l.a.Column,{width:16,children:Object(v.jsx)(I.a,{floated:"left",icon:"calendar",content:"Events"})}),Object(v.jsxs)(l.a.Column,{width:16,children:[Object(v.jsx)(mn.a,{onTabChange:function(e,t){return i(t.activeIndex)},panes:[{menuItem:"Future Events",pane:{key:"future"}},{menuItem:"Past Events",pane:{key:"past"}},{menuItem:"Hosting Events",pane:{key:"hosting"}}],menu:{secondary:!0,pointing:!0}}),Object(v.jsx)(wn.a.Group,{itemsPerRow:5,style:{marginTop:10},children:u.map((function(e){return Object(v.jsxs)(wn.a,{as:d.a,to:"/events/".concat(e.id),children:[Object(v.jsx)(x.a,{src:"/assets/categoryImages/".concat(e.category,".jpg"),style:{minHeight:100,objectFit:"cover"}}),Object(v.jsxs)(wn.a.Content,{children:[Object(v.jsx)(wn.a.Header,{content:e.title,textAlign:"center"}),Object(v.jsxs)(wn.a.Meta,{textAlign:"center",children:[Object(v.jsx)("div",{children:Object(g.default)(e.date,"dd MMM yyyy")}),Object(v.jsx)("div",{children:Object(g.default)(e.date,"hh:mm a")})]})]})]},e.id)}))})]})]})})}function kn(e){var t=e.profile;return Object(v.jsxs)(wn.a,{as:d.a,to:"/profile/".concat(t.id),children:[Object(v.jsx)(x.a,{src:t.photoURL||"/event-web-app/assets/user.png"}),Object(v.jsx)(wn.a.Content,{children:Object(v.jsx)(wn.a.Header,{content:t.displayName})})]})}function Sn(e){var t=e.profile,n=e.activeTab,r=Object(k.d)(),c=Object(k.e)((function(e){return e.profile})),a=c.followings,o=c.followers;return En({query:3===n?function(){return e=t.id,ae.collection("following").doc(e).collection("userFollowers");var e}:function(){return e=t.id,ae.collection("following").doc(e).collection("userFollowing");var e},data:function(e){return r(3===n?function(e){return{type:We,payload:e}}(e):function(e){return{type:Ye,payload:e}}(e))},deps:[n,r]}),Object(v.jsx)(mn.a.Pane,{children:Object(v.jsxs)(l.a,{children:[Object(v.jsx)(l.a.Column,{width:16,children:Object(v.jsx)(I.a,{floated:"left",icon:"user",content:3===n?"Followers":"Following"})}),Object(v.jsx)(l.a.Column,{width:16,children:Object(v.jsxs)(wn.a.Group,{itemsPerRow:5,children:[3===n&&o.map((function(e){return Object(v.jsx)(kn,{profile:e},e.id)})),4===n&&a.map((function(e){return Object(v.jsx)(kn,{profile:e},e.id)}))]})})]})})}var Ln=n(267),Un=n.n(Ln);n(457);function In(e){var t=e.setImage,n=e.imagePreview,c=Object(r.useRef)(null);return Object(v.jsx)(Un.a,{ref:c,src:n,style:{height:200,width:"100%"},aspectRatio:1,preview:".img-preview",guides:!1,viewMode:1,dragMode:"move",scalable:!0,cropBoxMovable:!0,cropBoxResizable:!0,crop:function(){"undefined"!==typeof c.current.getCroppedCanvas()&&c.current.getCroppedCanvas().toBlob((function(e){t(e)}),"image/jpeg")}})}var Tn=n(275);function Nn(e){var t=e.setFiles,n={border:"dashed 3px #eee",borderRadius:"5%",paddingTop:"30px",textAlign:"center"},c=Object(r.useCallback)((function(e){t(e.map((function(e){return Object.assign(e,{preview:URL.createObjectURL(e)})})))}),[t]),a=Object(Tn.a)({onDrop:c}),o=a.getRootProps,i=a.getInputProps,s=a.isDragActive;return Object(v.jsxs)("div",Object(W.a)(Object(W.a)({},o()),{},{style:s?Object(W.a)(Object(W.a)({},n),{border:"dashed 3px green"}):n,children:[Object(v.jsx)("input",Object(W.a)({},i())),Object(v.jsx)(h.a,{name:"upload",size:"huge"}),Object(v.jsx)(I.a,{content:"Drop image here."})]}))}var Rn=n(269),Pn=n.n(Rn);function Fn(e){var t=e.setEditMode,n=Object(r.useState)([]),c=Object(s.a)(n,2),a=c[0],o=c[1],i=Object(r.useState)(null),u=Object(s.a)(i,2),d=u[0],j=u[1],b=Object(r.useState)(!1),p=Object(s.a)(b,2),h=p[0],O=p[1];function x(){o([]),j(null)}return Object(v.jsxs)(l.a,{children:[Object(v.jsxs)(l.a.Column,{width:4,children:[Object(v.jsx)(I.a,{color:"blue",sub:!0,content:"Step 1 - Add Photo"}),Object(v.jsx)(Nn,{setFiles:o})]}),Object(v.jsx)(l.a.Column,{width:1}),Object(v.jsxs)(l.a.Column,{width:4,children:[Object(v.jsx)(I.a,{color:"blue",sub:!0,content:"Step 2 - Resize"}),a.length>0&&Object(v.jsx)(In,{setImage:j,imagePreview:a[0].preview})]}),Object(v.jsx)(l.a.Column,{width:1}),Object(v.jsxs)(l.a.Column,{width:4,children:[Object(v.jsx)(I.a,{color:"blue",sub:!0,content:"Step 3 - Preview & Upload"}),a.length>0&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"img-preview",style:{minHeight:200,minWidth:200,overflow:"hidden"}}),Object(v.jsxs)(f.a.Group,{children:[Object(v.jsx)(f.a,{loading:h,onClick:function(){O(!0);var e=Pn()()+"."+function(e){return e.slice(2+(e.lastIndexOf(".")-1>>>0))}(a[0].name),n=function(e,t){var n=ce.auth().currentUser;return ce.storage().ref().child("".concat(n.uid,"/user_images/").concat(t)).put(e)}(d,e);n.on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;console.log("upload is "+t+"% done")}),(function(e){Re.b.error(e.message)}),(function(){n.snapshot.ref.getDownloadURL().then((function(n){(function(e,t){return he.apply(this,arguments)})(n,e).then((function(){O(!1),x(),t(!1)})).catch((function(e){Re.b.error(e.message),O(!1)}))}))}))},style:{width:100},positive:!0,icon:"check"}),Object(v.jsx)(f.a,{disabled:h,onClick:x,style:{width:100},icon:"close"})]})]})]})]})}function An(e){var t=e.profile,n=e.isCurrentUser,c=Object(k.d)(),a=Object(r.useState)(!1),o=Object(s.a)(a,2),i=o[0],u=o[1],d=Object(k.e)((function(e){return e.async})).loading,j=Object(k.e)((function(e){return e.profile})).photos,b=Object(r.useState)({isUpdating:!1,target:null}),p=Object(s.a)(b,2),h=p[0],O=p[1],m=Object(r.useState)({isDeleting:!1,target:null}),g=Object(s.a)(m,2),y=g[0],w=g[1];function E(){return(E=Object(P.a)(R.a.mark((function e(t,n){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O({isUpdating:!0,target:n}),e.prev=1,e.next=4,Oe(t);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),Re.b.error(e.t0.message);case 9:return e.prev=9,O({isUpdating:!1,target:null}),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[1,6,9,12]])})))).apply(this,arguments)}function C(){return(C=Object(P.a)(R.a.mark((function e(t,n){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w({isDeleting:!0,target:n}),e.prev=1,e.next=4,De(t.name);case 4:return e.next=6,xe(t.id);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),Re.b.error(e.t0.message);case 11:return e.prev=11,w({isDeleting:!1,target:null}),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])})))).apply(this,arguments)}return En({query:function(){return e=t.id,ae.collection("users").doc(e).collection("photos");var e},data:function(e){return c(function(e){return{type:qe,payload:e}}(e))},deps:[t.id,c]}),Object(v.jsx)(mn.a.Pane,{loading:d,children:Object(v.jsxs)(l.a,{children:[Object(v.jsxs)(l.a.Column,{width:16,children:[Object(v.jsx)(I.a,{floated:"left",icon:"user",content:"Photos"}),n&&Object(v.jsx)(f.a,{onClick:function(){return u(!i)},floated:"right",basic:!0,content:i?"Cancel":"Add Photo"})]}),Object(v.jsx)(l.a.Column,{width:16,children:i?Object(v.jsx)(Fn,{setEditMode:u}):Object(v.jsx)(wn.a.Group,{itemsPerRow:5,children:j.map((function(e){return Object(v.jsxs)(wn.a,{children:[Object(v.jsx)(x.a,{src:e.url}),Object(v.jsxs)(f.a.Group,{fluid:!0,widths:2,children:[Object(v.jsx)(f.a,{name:e.id,loading:h.isUpdating&&h.target===e.id,onClick:function(t){return function(e,t){return E.apply(this,arguments)}(e,t.target.name)},disabled:e.url===t.photoURL,basic:!0,color:"green",content:"Main"}),Object(v.jsx)(f.a,{name:e.id,loading:y.isDeleting&&y.target===e.id,disabled:e.url===t.photoURL,onClick:function(t){return function(e,t){return C.apply(this,arguments)}(e,t.target.name)},basic:!0,color:"red",icon:"trash"})]})]},e.id)}))})})]})})}function _n(e){var t=e.profile,n=e.isCurrentUser,c=Object(r.useState)(0),a=Object(s.a)(c,2),o=a[0],i=a[1],l=[{menuItem:"About",render:function(){return Object(v.jsx)(yn,{profile:t,isCurrentUser:n})}},{menuItem:"Photos",render:function(){return Object(v.jsx)(An,{profile:t,isCurrentUser:n})}},{menuItem:"Events",render:function(){return Object(v.jsx)(Cn,{profile:t})}},{menuItem:"Followers",render:function(){return Object(v.jsx)(Sn,{profile:t,activeTab:o},t.id)}},{menuItem:"Following",render:function(){return Object(v.jsx)(Sn,{profile:t,activeTab:o},t.id)}}];return Object(v.jsx)(mn.a,{menu:{fluid:!0,vertical:!0},menuPosition:"right",panes:l,onTabChange:function(e,t){return i(t.activeIndex)}})}var Mn=n(493),Dn=n(499);function Vn(e){var t=e.profile,n=e.isCurrentUser,c=Object(k.d)(),a=Object(r.useState)(!1),o=Object(s.a)(a,2),i=o[0],u=o[1],d=Object(k.e)((function(e){return e.profile})).followingUser;function p(){return(p=Object(P.a)(R.a.mark((function e(){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.prev=1,e.next=4,ye(t);case 4:c($e()),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),Re.b.error(e.t0.message);case 10:return e.prev=10,u(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[1,7,10,13]])})))).apply(this,arguments)}function h(){return(h=Object(P.a)(R.a.mark((function e(){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.prev=1,e.next=4,Ee(t);case 4:c(et()),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),Re.b.error(e.t0.message);case 10:return e.prev=10,u(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[1,7,10,13]])})))).apply(this,arguments)}return Object(r.useEffect)((function(){if(!n)return u(!0),function(){return e.apply(this,arguments)}().then((function(){return u(!1)})),function(){c({type:Qe})};function e(){return(e=Object(P.a)(R.a.mark((function e(){var n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke(t.id);case 3:(n=e.sent)&&n.exists&&c($e()),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),Re.b.error(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}}),[c,t.id,n]),Object(v.jsx)(j.a,{children:Object(v.jsxs)(l.a,{children:[Object(v.jsx)(l.a.Column,{width:12,children:Object(v.jsx)(b.a.Group,{children:Object(v.jsxs)(b.a,{children:[Object(v.jsx)(b.a.Image,{avatar:!0,size:"small",src:t.photoURL||"/event-web-app/assets/user.png"}),Object(v.jsx)(b.a.Content,{verticalAlign:"middle",children:Object(v.jsx)(I.a,{as:"h1",style:{display:"block",marginBottom:10},content:t.displayName})})]})})}),Object(v.jsxs)(l.a.Column,{width:4,children:[Object(v.jsxs)(Mn.a.Group,{children:[Object(v.jsx)(Mn.a,{label:"Followers",value:t.followerCount||0}),Object(v.jsx)(Mn.a,{label:"Following",value:t.followingCount||0})]}),!n&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(pt.a,{}),Object(v.jsxs)(Dn.a,{animated:"move",children:[Object(v.jsx)(Dn.a.Content,{visible:!0,style:{width:"100%"},children:Object(v.jsx)(f.a,{fluid:!0,color:"facebook",content:d?"Following":"Not Following"})}),Object(v.jsx)(Dn.a.Content,{hidden:!0,style:{width:"100%"},children:Object(v.jsx)(f.a,{onClick:d?function(){return function(){return h.apply(this,arguments)}()}:function(){return function(){return p.apply(this,arguments)}()},loading:i,basic:!0,fluid:!0,color:d?"gray":"facebook",content:d?"Unfollow":"Follow"})})]})]})]})]})})}function zn(e){var t,n=e.match,r=Object(k.d)(),c=Object(k.e)((function(e){return e.profile})),a=c.selectedUserProfile,o=c.currentUserProfile,i=Object(k.e)((function(e){return e.auth})).currentUser,s=Object(k.e)((function(e){return e.async})),u=s.loading,d=s.error;return at({query:function(){return je(n.params.id)},data:function(e){return r(function(e){return{type:Be,payload:e}}(e))},deps:[r,n.params.id],shouldExecute:n.params.id!==i.uid}),t=n.params.id===i.uid?o:a,u&&!t||!t&&!d?Object(v.jsx)(It,{content:"Loading profile...."}):Object(v.jsx)(l.a,{children:Object(v.jsxs)(l.a.Column,{width:16,children:[Object(v.jsx)(Vn,{profile:t,isCurrentUser:i.uid===t.id}),Object(v.jsx)(_n,{profile:t,isCurrentUser:i.uid===t.id})]})})}var Gn=["component","prevLocation"];function Hn(e){var t=e.component,n=(e.prevLocation,Object(Rt.a)(e,Gn)),r=Object(k.e)((function(e){return e.auth})).authenticated;return Object(v.jsx)(o.b,Object(W.a)(Object(W.a)({},n),{},{render:function(e){return r?Object(v.jsx)(t,Object(W.a)({},e)):Object(v.jsx)(mt,Object(W.a)({},e))}}))}function Bn(){var e=Object(o.g)().key;return Object(k.e)((function(e){return e.async})).initialized?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(fn,{}),Object(v.jsx)(Re.a,{position:"bottom-right",hideProgressBar:!0}),Object(v.jsx)(o.b,{exact:!0,path:"/",component:Xt}),Object(v.jsx)(o.b,{path:"/(.+)",render:function(){return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(nn,{}),Object(v.jsxs)(i.a,{className:"main",children:[Object(v.jsx)(o.b,{exact:!0,path:"/events",component:ct}),Object(v.jsx)(o.b,{exact:!0,path:"/sandbox",component:dn}),Object(v.jsx)(o.b,{path:"/events/:id",component:Tt}),Object(v.jsx)(Hn,{path:["/createEvent","/manage/:id"],component:Qt},e),Object(v.jsx)(Hn,{path:"/account",component:vn}),Object(v.jsx)(Hn,{path:"/profile/:id",component:zn}),Object(v.jsx)(o.b,{path:"/error",component:xn})]})]})}})]}):Object(v.jsx)(It,{content:"Loading App..."})}var qn=n(129),Kn=n(270),Wn="SIGN_IN_USER",Yn="SIGN_OUT_USER",Jn=n(47),Zn={authenticated:!1,currentUser:null,prevLocation:null,currentLocation:null};function Qn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zn,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case Wn:return Object(W.a)(Object(W.a)({},e),{},{authenticated:!0,currentUser:{email:r.email,photoURL:r.photoURL,uid:r.uid,displayName:r.displayName,providerId:r.providerData[0].providerId}});case Yn:return Object(W.a)(Object(W.a)({},e),{},{authenticated:!1,currentUser:null});case Jn.a:return Object(W.a)(Object(W.a)({},e),{},{prevLocation:e.currentLocation,currentLocation:r.location});default:return e}}var Xn=n(43),$n={events:[],comments:[],moreEvents:!0,selectedEvent:null,lastVisible:null,filter:"all",startDate:new Date,retainState:!1};function er(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$n,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case F:return Object(W.a)(Object(W.a)({},e),{},{events:[].concat(Object(Xn.a)(e.events),[r])});case A:return Object(W.a)(Object(W.a)({},e),{},{events:[].concat(Object(Xn.a)(e.events.filter((function(e){return e.id!==r.id}))),[r])});case _:return Object(W.a)(Object(W.a)({},e),{},{events:Object(Xn.a)(e.events.filter((function(e){return e.id!==r})))});case M:return Object(W.a)(Object(W.a)({},e),{},{events:[].concat(Object(Xn.a)(e.events),Object(Xn.a)(r.events)),moreEvents:r.moreEvents,lastVisible:r.lastVisible});case D:return Object(W.a)(Object(W.a)({},e),{},{comments:r});case V:return Object(W.a)(Object(W.a)({},e),{},{comments:[]});case z:return Object(W.a)(Object(W.a)({},e),{},{selectedEvent:r});case G:return Object(W.a)(Object(W.a)({},e),{},{selectedEvent:null});case H:return Object(W.a)(Object(W.a)({},e),{},{events:[],moreEvents:!0,lastVisible:null});case B:return Object(W.a)(Object(W.a)({},e),{},{retainState:!1,moreEvents:!0,filter:r});case q:return Object(W.a)(Object(W.a)({},e),{},{retainState:!1,moreEvents:!0,startDate:r});case K:return Object(W.a)(Object(W.a)({},e),{},{retainState:!0});default:return e}}var tr={currentUserProfile:null,selectedUserProfile:null,photos:[],profileEvents:[],followers:[],followings:[],followingUser:!1,feed:[]};function nr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tr,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case He:return Object(W.a)(Object(W.a)({},e),{},{currentUserProfile:r});case Be:return Object(W.a)(Object(W.a)({},e),{},{selectedUserProfile:r});case qe:return Object(W.a)(Object(W.a)({},e),{},{photos:r});case Ke:return Object(W.a)(Object(W.a)({},e),{},{profileEvents:r});case We:return Object(W.a)(Object(W.a)({},e),{},{followers:r});case Ye:return Object(W.a)(Object(W.a)({},e),{},{followings:r});case Je:return Object(W.a)(Object(W.a)({},e),{},{followingUser:!0});case Ze:return Object(W.a)(Object(W.a)({},e),{},{followingUser:!1});case Qe:return Object(W.a)(Object(W.a)({},e),{},{followers:[],followings:[]});case Xe:return Object(W.a)(Object(W.a)({},e),{},{feed:r});default:return e}}var rr=n(146),cr=function(e){return Object(qn.combineReducers)({router:Object(rr.b)(e),test:un,event:er,modals:vt,auth:Qn,async:ne,profile:nr})},ar=n(272);function or(){return function(e){return ce.auth().onAuthStateChanged((function(t){t?(e(function(e){return{type:Wn,payload:e}}(t)),je(t.uid).onSnapshot((function(t){var n;e((n=oe(t),{type:He,payload:n})),e({type:Q})}))):(e({type:Yn}),e({type:Q}))}))}}var ir=n(52),sr=Object(ir.a)();function lr(){var e=Object(o.g)().pathname;return Object(r.useEffect)((function(){window.scrollTo(0,0)}),[e]),null}var ur=function(){var e=Object(qn.createStore)(cr(sr),Object(Kn.composeWithDevTools)(Object(qn.applyMiddleware)(ar.a)));return e.dispatch(or()),e}(),dr=document.getElementById("root");a.a.render(Object(v.jsx)(k.a,{store:ur,children:Object(v.jsxs)(rr.a,{history:sr,children:[Object(v.jsx)(lr,{}),Object(v.jsx)(Bn,{})]})}),dr)}},[[460,1,2]]]);
//# sourceMappingURL=main.92fc2556.chunk.js.map